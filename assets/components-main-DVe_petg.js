var ue=Object.defineProperty,xe=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var oe=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var ne=(e,r,s)=>r in e?ue(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s,C=(e,r)=>{for(var s in r||(r={}))fe.call(r,s)&&ne(e,s,r[s]);if(oe)for(var s of oe(r))he.call(r,s)&&ne(e,s,r[s]);return e},Y=(e,r)=>xe(e,be(r));import{r as y,j as o,R as W}from"./vendor-react-CUeQczFW.js";import{t,B as U,P as X,g as ge,a as V,f as h,W as me}from"./core-Bsm8WMPA.js";import{a as re}from"./components-ui-DPdqUY33.js";import{C as ve,P as ye}from"./components-modals-DTocpHRQ.js";const we=e=>{var z,P;const r=t(1),s=e.clickUpgradeLevel||0,p=Math.min(s,15),w=t(2).pow(p),x=r.times(w),d=re(e.totalRenownEarned);let u=x;d.gt(t(1))&&(u=x.times(d)),e.infiniteTowerLevel&&e.infiniteTowerLevel>0&&(u=u.times(t(1).plus(t(e.infiniteTowerLevel*.01))));const g=ge(s);if(g>0){let a=t(0);U.forEach(l=>{const i=e.buildings[l.id]||t(0);i.gt(0)&&(a=a.plus(i.times(l.baseProduction)))});let M=a;d.gt(t(1))&&(M=a.times(d));let E=0;e.nationalProjects&&Object.values(e.nationalProjects).forEach(l=>E+=l.level||0);const j=t(1).plus(t(E*X));M=M.times(j);const k=((z=e.weather)==null?void 0:z.current)||"clear";let m=t(0);U.forEach(l=>{const i=e.buildings[l.id]||t(0);if(i.gt(0)){let b=t(1);k==="sunny"?(l.id==="peasant"||l.id==="field"||l.id==="stable"||l.id==="cathedral")&&(b=t(1.2)):k==="rainy"?(l.id==="silver_mine"||l.id==="alchemist"||l.id==="market"||l.id==="tavern")&&(b=t(1.2)):k==="stormy"?((l.id==="blacksmith"||l.id==="void_portal")&&(b=t(1.3)),(l.id==="field"||l.id==="stable")&&(b=t(.8))):k==="windy"&&(l.id==="market"||l.id==="castle"||l.id==="time_chamber")&&(b=t(1.15));const v=i.times(l.baseProduction);d.gt(t(1))?m=m.plus(v.times(d).times(j).times(b.minus(t(1)))):m=m.plus(v.times(j).times(b.minus(t(1))))}});const I=M.plus(m),S=t(1).plus(t(e.achievements.length*.02)),T=I.times(S);let R=T;e.globalIncomeMultiplier&&(R=T.times(t(e.globalIncomeMultiplier))),u=u.plus(R.times(g))}const A=t(1).plus(t(e.achievements.length*.02));if(u=u.times(A),e.globalIncomeMultiplier&&(u=u.times(t(e.globalIncomeMultiplier))),e.betaTesterIncomeMultiplier&&(u=u.times(t(e.betaTesterIncomeMultiplier))),e.godMode){let a=t(0);U.forEach(i=>{const b=e.buildings[i.id]||t(0);b.gt(0)&&(a=a.plus(b.times(i.baseProduction)))});let M=a;d.gt(t(1))&&(M=a.times(d));let E=0;e.nationalProjects&&Object.values(e.nationalProjects).forEach(i=>E+=i.level||0);const j=t(1).plus(t(E*X));M=M.times(j);const k=((P=e.weather)==null?void 0:P.current)||"clear";let m=t(0);U.forEach(i=>{const b=e.buildings[i.id]||t(0);if(b.gt(0)){let v=t(1);k==="sunny"?(i.id==="peasant"||i.id==="field"||i.id==="stable"||i.id==="cathedral")&&(v=t(1.2)):k==="rainy"?(i.id==="silver_mine"||i.id==="alchemist"||i.id==="market"||i.id==="tavern")&&(v=t(1.2)):k==="stormy"?((i.id==="blacksmith"||i.id==="void_portal")&&(v=t(1.3)),(i.id==="field"||i.id==="stable")&&(v=t(.8))):k==="windy"&&(i.id==="market"||i.id==="castle"||i.id==="time_chamber")&&(v=t(1.15));const $=b.times(i.baseProduction);d.gt(t(1))?m=m.plus($.times(d).times(j).times(v.minus(t(1)))):m=m.plus($.times(j).times(v.minus(t(1))))}});const I=M.plus(m),S=t(1).plus(t(e.achievements.length*.02)),T=I.times(S);let R=T;e.globalIncomeMultiplier&&(R=T.times(t(e.globalIncomeMultiplier)));const l=R.times(t(99999));u=u.plus(l)}return u},je=({message:e,type:r,x:s,y:p,onComplete:w})=>{const[x,d]=y.useState(!0);y.useEffect(()=>{const A=setTimeout(()=>{d(!1),setTimeout(w,300)},2e3);return()=>clearTimeout(A)},[w]);const u=()=>{switch(r){case"gold":return{background:"#fff3e0",border:"2px solid #ffa726",color:"#e65100"};case"win":return{background:"#e8f5e8",border:"2px solid #66bb6a",color:"#2e7d32"};case"lose":return{background:"#ffebee",border:"2px solid #ef5350",color:"#c62828"};case"damage":return{background:"#fff3e0",border:"2px solid #ff9800",color:"#e65100"};case"reward":return{background:"#e3f2fd",border:"2px solid #42a5f5",color:"#1565c0"};default:return{background:"#f5f5f5",border:"2px solid #9e9e9e",color:"#424242"}}},g=()=>{switch(r){case"gold":return"ðŸ’°";case"win":return"ðŸŽ‰";case"lose":return"ðŸ˜¢";case"damage":return"âš”ï¸";case"reward":return"ðŸ†";default:return"â„¹ï¸"}};return x?o.jsxs("div",{className:`floating-message ${x?"visible":"hidden"}`,style:Y(C({position:"fixed",left:`${s}px`,top:`${p}px`},u()),{zIndex:9999,padding:"8px 12px",borderRadius:"8px",fontSize:"14px",fontWeight:"bold",boxShadow:"2px 2px 8px rgba(0,0,0,0.3)",animation:"floatUp 2s ease-out forwards",transform:"translateX(-50%)",whiteSpace:"nowrap",pointerEvents:"none"}),children:[o.jsx("span",{style:{marginRight:"5px"},children:g()}),e]}):null},ke=W.memo(({gameState:e})=>{const[r,s]=y.useState(!1);if(V(e.infiniteTowerLevel||0).minus(t(1)).times(t(100)).floor().toNumber()<=0)return null;const x=(()=>{if(e.theme==="default"||!e.theme)return{background:"rgba(103, 58, 183, 0.6)",border:"2px solid rgba(103, 58, 183, 0.9)",text:"#7b1fa2",textShadow:"0 0 8px rgba(123, 31, 162, 0.8)"};switch(e.theme){case"dark":case"midnight":return{background:"rgba(103, 58, 183, 0.2)",border:"1px solid rgba(103, 58, 183, 0.6)",text:"#ba68c8",textShadow:"0 0 8px rgba(186, 104, 200, 0.4)"};default:return{background:"rgba(103, 58, 183, 0.6)",border:"2px solid rgba(103, 58, 183, 0.9)",text:"#7b1fa2",textShadow:"0 0 8px rgba(123, 31, 162, 0.8)"}}})();return o.jsx("div",{style:{padding:"5px 15px",background:x.background,border:x.border,borderRadius:"20px",display:"inline-block",cursor:"help"},"data-tooltip":`Infinite Tower Level: ${e.infiniteTowerLevel||0}
Bonus: +${h(V(e.infiniteTowerLevel||0).minus(t(1)).times(t(100)),e.numberFormat)}% to all income
Each tower floor provides +100% bonus
Build floors using Dark Matter Gold`,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:o.jsxs("span",{style:{color:x.text,fontWeight:"bold",textShadow:x.textShadow,fontSize:"0.9rem",lineHeight:"1.2",display:"inline-block"},children:[o.jsxs("span",{className:"badge-compact-text",style:{display:r?"none":"inline-block"},children:["ðŸ—ï¸ +",h(V(e.infiniteTowerLevel||0).minus(t(1)).times(t(100)),e.numberFormat),"%"]}),o.jsxs("span",{className:"badge-full-text",style:{display:r?"inline-block":"none"},children:["ðŸ—ï¸ Tower: +",h(V(e.infiniteTowerLevel||0).minus(t(1)).times(t(100)),e.numberFormat),"%"]})]})})}),Me=W.memo(({gameState:e})=>{const[r,s]=y.useState(!1),p=()=>{let u=0;return e.nationalProjects&&Object.values(e.nationalProjects).forEach(g=>{u+=g.level*X}),t(u)};if(p().times(t(100)).floor().toNumber()<=0)return null;const d=(()=>{if(e.theme==="default"||!e.theme)return{background:"rgba(76, 175, 80, 0.6)",border:"2px solid rgba(76, 175, 80, 0.9)",text:"#1b5e20",textShadow:"0 0 8px rgba(27, 94, 32, 0.8)"};switch(e.theme){case"dark":case"midnight":return{background:"rgba(76, 175, 80, 0.2)",border:"1px solid rgba(76, 175, 80, 0.6)",text:"#81c784",textShadow:"0 0 8px rgba(129, 199, 132, 0.4)"};default:return{background:"rgba(76, 175, 80, 0.6)",border:"2px solid rgba(76, 175, 80, 0.9)",text:"#1b5e20",textShadow:"0 0 8px rgba(27, 94, 32, 0.8)"}}})();return o.jsx("div",{style:{padding:"5px 15px",background:d.background,border:d.border,borderRadius:"20px",display:"inline-block",cursor:"help"},"data-tooltip":`National Projects Bonus: +${h(p().times(t(100)),e.numberFormat)}%
Each project level provides +${X*100}% bonus
Build projects in the Empire menu
Projects enhance all building production`,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:o.jsxs("span",{style:{color:d.text,fontWeight:"bold",textShadow:d.textShadow,fontSize:"0.9rem",lineHeight:"1.2",display:"inline-block"},children:[o.jsxs("span",{className:"badge-compact-text",style:{display:r?"none":"inline-block"},children:["ðŸ—ï¸ +",h(p().times(t(100)),e.numberFormat),"%"]}),o.jsxs("span",{className:"badge-full-text",style:{display:r?"inline-block":"none"},children:["ðŸ—ï¸ Projects: +",h(p().times(t(100)),e.numberFormat),"%"]})]})})}),Ce=W.memo(({gameState:e})=>{const[r,s]=y.useState(!1),p=e.achievements.length*2;if(p<=0)return null;const x=(()=>{if(e.theme==="default"||!e.theme)return{background:"rgba(255, 152, 0, 0.6)",border:"2px solid rgba(255, 152, 0, 0.9)",text:"#bf360c",textShadow:"0 0 8px rgba(191, 54, 12, 0.8)"};switch(e.theme){case"dark":case"midnight":return{background:"rgba(255, 152, 0, 0.25)",border:"1px solid rgba(255, 152, 0, 0.7)",text:"#ffb74d",textShadow:"0 0 8px rgba(255, 183, 77, 0.4)"};default:return{background:"rgba(255, 152, 0, 0.6)",border:"2px solid rgba(255, 152, 0, 0.9)",text:"#bf360c",textShadow:"0 0 8px rgba(191, 54, 12, 0.8)"}}})();return o.jsx("div",{style:{padding:"5px 15px",background:x.background,border:x.border,borderRadius:"20px",display:"inline-block",cursor:"help"},"data-tooltip":`Achievements Bonus: +${p}%
Achievements: ${e.achievements.length} unlocked
Each achievement provides +2% bonus
Complete various challenges to earn achievements
Achievements give permanent income bonuses`,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:o.jsxs("span",{style:{color:x.text,fontWeight:"bold",textShadow:x.textShadow,fontSize:"0.9rem",lineHeight:"1.2",display:"inline-block"},children:[o.jsxs("span",{className:"badge-compact-text",style:{display:r?"none":"inline-block"},children:["ðŸ† +",p,"%"]}),o.jsxs("span",{className:"badge-full-text",style:{display:r?"inline-block":"none"},children:["ðŸ† Achievements: +",p,"%"]})]})})}),Ee=W.memo(({renown:e,totalRenownEarned:r,numberFormat:s,currentTheme:p})=>{const[w,x]=y.useState(!1),d=re(r).minus(t(1)).times(t(100)).floor().toNumber();if(d<=0)return null;const g=(()=>{if(p==="default"||!p)return{background:"rgba(103, 58, 183, 0.6)",border:"2px solid rgba(103, 58, 183, 0.9)",text:"#311b92",textShadow:"0 0 8px rgba(49, 27, 146, 0.8)"};switch(p){case"dark":return{background:"rgba(103, 58, 183, 0.2)",border:"1px solid rgba(103, 58, 183, 0.6)",text:"#9575cd",textShadow:"0 0 8px rgba(149, 117, 205, 0.4)"};case"midnight":return{background:"rgba(103, 58, 183, 0.2)",border:"1px solid rgba(103, 58, 183, 0.6)",text:"#9575cd",textShadow:"0 0 8px rgba(149, 117, 205, 0.4)"};default:return{background:"rgba(103, 58, 183, 0.6)",border:"2px solid rgba(103, 58, 183, 0.9)",text:"#311b92",textShadow:"0 0 8px rgba(49, 27, 146, 0.8)"}}})();return o.jsx("div",{style:{padding:"5px 15px",background:g.background,border:g.border,borderRadius:"20px",display:"inline-block",cursor:"help"},"data-tooltip":`Total Renown: ${h(r,s)}
Bonus: +${d}% to all income
Renown is earned by prestiging and provides permanent bonuses`,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:o.jsxs("span",{style:{color:g.text,fontWeight:"bold",textShadow:g.textShadow,fontSize:"0.9rem",lineHeight:"1.2",display:"inline-block"},children:[o.jsxs("span",{className:"badge-compact-text",style:{display:w?"none":"inline-block"},children:["ðŸ‘‘ +",d,"%"]}),o.jsxs("span",{className:"badge-full-text",style:{display:w?"inline-block":"none"},children:["ðŸ‘‘ Total Renown: ",h(r,s)," +",d,"%"]})]})})}),Ie=W.memo(({gameState:e,gps:r,onClick:s,onEventInteract:p,onOpenTavern:w,onOpenPrestige:x,onOpenSettings:d,onOpenStatistics:u,onOpenLeaderboard:g,onOpenEmpire:A,onUpgradeClickPower:z,onUpgradeOffline:P,isIdle:a})=>{var Q,Z,ee;const[M,E]=y.useState([]),[j,k]=y.useState(!1),[m,I]=y.useState([]),[S,T]=y.useState(!1),[R,l]=y.useState(!1),i=y.useRef(null),[b,v]=y.useState({visible:!1,x:0,y:0,content:""}),$=e.interface||{showFloatingText:!0,showWeatherWidget:!0},G=(n,c,f,B)=>{const L=Date.now()+Math.random();I(N=>[...N,{id:L,message:n,type:c,x:f,y:B}])},ie=n=>{I(c=>c.filter(f=>f.id!==n))},D=(n,c)=>{const f=n.currentTarget.getBoundingClientRect();v({visible:!0,x:f.left+f.width/2,y:f.top,content:c})},_=()=>{v({visible:!1,x:0,y:0,content:""})},se=n=>{var c,f,B;if($.showFloatingText){const L=(c=i.current)==null?void 0:c.getBoundingClientRect(),N=(B=(f=i.current)==null?void 0:f.parentElement)==null?void 0:B.getBoundingClientRect();if(L&&N){const J=n.clientX-N.left+(Math.random()*40-20),H=n.clientY-N.top+(Math.random()*40-20),ce=we(e),de="+"+h(ce,e.numberFormat),te={id:Date.now(),x:J,y:H,val:de};E(K=>[...K,te]),setTimeout(()=>{E(K=>K.filter(pe=>pe.id!==te.id))},1e3)}}s(n)},F=me[((Q=e.weather)==null?void 0:Q.current)||"clear"],O={transition:"transform 0.8s ease-in-out, width 0.8s ease-in-out, height 0.8s ease-in-out, margin 0.8s ease-in-out, position 0.8s ease-in-out"},le=C(a?{position:"fixed",bottom:"120px",right:"30px",transform:"scale(0.8)",transformOrigin:"bottom right",textAlign:"right",zIndex:100}:{transform:"scale(1)",marginBottom:"3rem",zIndex:10,textAlign:"center"},O),ae=C(a?{width:"80px",height:"80px",fontSize:"2rem",position:"fixed",bottom:"30px",right:"30px",borderRadius:"50%",zIndex:100}:{width:"200px",height:"200px",fontSize:"5rem",borderRadius:"50%",position:"relative",zIndex:5,margin:"0 auto"},O),q={opacity:a?0:1,transition:"opacity 0.5s ease-in-out",pointerEvents:a?"none":"auto"};return o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative",padding:"var(--panel-padding)",height:"100%",overflow:"hidden"},onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),children:[$.showWeatherWidget&&o.jsxs("div",{style:C({position:"absolute",top:"10px",left:"10px",zIndex:20,background:F.color,padding:"8px 12px",borderRadius:"20px",border:"2px solid rgba(0,0,0,0.1)",boxShadow:"2px 2px 5px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:"8px",cursor:"help"},q),"data-tooltip":`${F.name}: ${F.description}`,children:[o.jsx("span",{style:{fontSize:"1.5rem"},children:F.icon}),o.jsxs("div",{style:{textAlign:"left",lineHeight:"1.1"},children:[o.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem",color:"#222"},children:F.name}),o.jsxs("div",{style:{fontSize:"0.7rem",color:"#444"},children:[t(Number(((Z=e.weather)==null?void 0:Z.timeLeft)||0)).ceil().toString(),"s remaining"]})]})]}),o.jsxs("div",{style:C({position:"absolute",top:"10px",right:"10px",zIndex:20,display:"flex",gap:"5px"},q),children:[o.jsx("button",{onClick:g,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.8,color:"var(--text-color)",transition:"all 0.2s ease"},title:"Leaderboard (Available for all players)",children:"ðŸ†"}),o.jsx("button",{onClick:u,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.7,color:"var(--text-color)"},title:"Statistics",children:"ðŸ“Š"}),o.jsx("button",{onClick:d,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.7,color:"var(--text-color)"},title:"Kingdom Settings",children:"âš™ï¸"})]}),o.jsxs("div",{style:le,children:[o.jsx("div",{style:{fontSize:"1rem",color:a?"var(--text-color)":"var(--text-secondary)",marginBottom:"5px",textTransform:"uppercase",letterSpacing:"2px",textShadow:a?"1px 1px 2px #000":"none"},children:"Royal Treasury"}),o.jsx("div",{style:{fontSize:"3rem",fontFamily:"var(--font-main)",color:"var(--text-color)",textShadow:a?"2px 2px 4px #000":"2px 2px 0px rgba(255, 215, 0, 0.4)"},children:h(e.gold,e.numberFormat)}),o.jsxs("div",{style:{marginTop:"5px",fontSize:"1.1rem",color:a?"#90ee90":"var(--success-color)",fontStyle:"italic",textShadow:a?"1px 1px 2px #000":"none"},children:["+",h(r,e.numberFormat)," gold / sec"]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"10px",marginTop:"15px"},children:[o.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px",justifyContent:"center"},children:[o.jsx(Ee,{renown:e.renown,totalRenownEarned:e.totalRenownEarned,numberFormat:e.numberFormat,currentTheme:e.theme}),o.jsx(ke,{gameState:e})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px",justifyContent:"center"},children:[o.jsx(Me,{gameState:e}),o.jsx(Ce,{gameState:e})]})]})]}),o.jsxs("div",{style:{position:"relative",marginBottom:a?0:"3rem",display:"flex",justifyContent:"center",alignItems:"center"},children:[o.jsxs("div",{className:"magnetic-container",style:{position:"relative"},children:[o.jsx("button",{ref:i,className:`main-button ${a?"idle":""}`,style:Y(C({},ae),{display:"flex",alignItems:"center",justifyContent:"center",outline:"none",color:"#5d4037",cursor:"pointer",overflow:"hidden",position:"relative",zIndex:2}),onClick:se,children:o.jsx("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",lineHeight:1,marginTop:"-10px"},children:"ðŸ‘‘"})}),o.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"400px",height:"400px",pointerEvents:"none",zIndex:1},children:[e.buildings.field&&e.buildings.field.gt(t(0))&&o.jsx("button",{className:"btn scepter-btn",style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) ${j?"translateX(128px)":"translate(0px, 0px)"}`,transition:"all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)",width:"60px",height:"60px",borderRadius:"50%",background:"var(--accent-color)",borderColor:"var(--gold-color)",fontSize:"1.5rem",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"auto",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},onClick:()=>{T(!0)},onMouseEnter:n=>D(n,`âš¡ Royal Scepter
Upgrade your click power
Each level doubles click strength
Higher levels add GPS bonus`),onMouseLeave:_,children:"âš¡"}),e.buildings.field&&e.buildings.field.gt(t(0))&&e.renown.gt(t(0))&&o.jsx("button",{className:"btn passive-income-btn",style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) ${j?"translateX(-128px)":"translate(0px, 0px)"}`,transition:"all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)",width:"60px",height:"60px",borderRadius:"50%",background:"var(--accent-color)",borderColor:"var(--gold-color)",fontSize:"1.5rem",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"auto",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},onClick:()=>{l(!0)},onMouseEnter:n=>D(n,`ðŸ’° Passive Income
Upgrade offline earnings
Generate gold while away
Based on your current GPS`),onMouseLeave:_,children:"ðŸ’°"}),((ee=e.buildings.tavern)==null?void 0:ee.gt(t(0)))&&o.jsx("button",{className:"btn tavern-btn",style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) ${j?"translate(-91px, 91px)":"translate(0px, 0px)"}`,transition:"all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)",width:"60px",height:"60px",borderRadius:"50%",fontSize:"1.5rem",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"auto",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},onClick:w,onMouseEnter:n=>D(n,`ðŸº Tavern
Visit the local tavern
Play mini-games
Earn bonus gold and rewards`),onMouseLeave:_,children:"ðŸº"}),(e.totalGold.gt(t(5e5))||e.renown.gt(t(0)))&&o.jsx("button",{className:"btn legacy-btn",style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) ${j?"translate(91px, 91px)":"translate(0px, 0px)"}`,transition:"all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)",width:"60px",height:"60px",borderRadius:"50%",background:"var(--accent-color)",fontSize:"1.5rem",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"auto",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},onClick:x,onMouseEnter:n=>D(n,`ðŸ‘‘ Legacy & Prestige
Reset your kingdom for renown
Earn permanent bonuses
Unlock new features`),onMouseLeave:_,children:"ðŸ‘‘"})]})]}),!a&&M.map(n=>o.jsx("div",{className:"floating-text",style:{left:n.x,top:n.y},children:n.val},n.id))]}),!a&&e.event&&e.event.type==="dragon"&&o.jsx("div",{className:"dragon-event",onMouseDown:n=>{try{if(!e.event)return;const c=n.currentTarget.getBoundingClientRect(),f=t(e.event.hp||10),B=t(e.event.maxHp||10),L=f.lte(t(1)),J=(r||t(1)).times(t(30));if(L)try{G(`+${h(J.floor(),e.numberFormat)} gold!`,"reward",c.left+c.width/2,c.top)}catch(H){console.error("Error adding floating message:",H)}else try{G(`-${h(t(1),e.numberFormat)} HP`,"damage",c.left+c.width/2,c.top)}catch(H){console.error("Error adding floating message:",H)}p(e.event)}catch(c){console.error("Error clicking dragon:",c)}},children:"ðŸ‰"}),!a&&e.event&&e.event.type==="merchant"&&o.jsxs("div",{style:{position:"absolute",right:"20px",top:"100px",background:"#fff3e0",padding:"10px",border:"2px solid orange",zIndex:100,cursor:"pointer",animation:"pop 0.5s",borderRadius:"8px",boxShadow:"2px 2px 5px rgba(0,0,0,0.2)"},onClick:n=>{const c=n.currentTarget.getBoundingClientRect(),f=r.times(t(10));G(`+${h(f.floor(),e.numberFormat)} gold`,"gold",c.left+c.width/2,c.top),p(e.event)},children:[o.jsx("div",{style:{fontSize:"1.5rem",textAlign:"center"},children:"ðŸ‘³"}),o.jsx("div",{style:{fontWeight:"bold",color:"#000"},children:"Merchant"}),o.jsx("small",{style:{color:"#444"},children:"Click for gift"})]}),!a&&e.event&&e.event.type==="jester"&&o.jsxs("div",{style:{position:"absolute",left:"20px",top:"100px",background:"#fce4ec",padding:"10px",border:"2px solid pink",zIndex:100,cursor:"pointer",animation:"pop 0.5s",borderRadius:"8px",boxShadow:"2px 2px 5px rgba(0,0,0,0.2)"},onClick:n=>{const c=n.currentTarget.getBoundingClientRect(),f=e.gold.times(t(.1)),B=Math.random()>.5;G(`${B?"+":"-"}${h(f.floor(),e.numberFormat)} gold`,B?"win":"lose",c.left+c.width/2,c.top),p(e.event)},children:[o.jsx("div",{style:{fontSize:"1.5rem",textAlign:"center"},children:"ðŸ¤¡"}),o.jsx("div",{style:{fontWeight:"bold",color:"#000"},children:"Jester"}),o.jsx("small",{style:{color:"#444"},children:"Risk it all?"})]}),m.map(n=>o.jsx(je,{message:n.message,type:n.type,x:n.x,y:n.y,onComplete:()=>ie(n.id)},n.id)),S&&o.jsx(ve,{gameState:e,onClose:()=>T(!1),onUpgrade:()=>z==null?void 0:z()}),R&&o.jsx(ye,{gameState:e,onClose:()=>l(!1),onUpgrade:()=>P==null?void 0:P()}),b.visible&&o.jsx("div",{style:{position:"fixed",left:`${b.x}px`,top:`${b.y-10}px`,transform:"translate(-50%, -100%)",background:"var(--panel-bg)",color:"var(--text-color)",padding:"8px 12px",borderRadius:"6px",border:"2px solid var(--accent-color)",fontSize:"13px",lineHeight:"1.4",whiteSpace:"pre-line",zIndex:1e4,boxShadow:"var(--shadow)",pointerEvents:"none",transition:"all 0.15s ease",maxWidth:"200px",textAlign:"center"},children:b.content})]})});export{Ie as M,we as c};
