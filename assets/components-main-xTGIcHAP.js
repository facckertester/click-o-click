var fe=Object.defineProperty,ge=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var Z=(e,r,c)=>r in e?fe(e,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):e[r]=c,m=(e,r)=>{for(var c in r||(r={}))ye.call(r,c)&&Z(e,c,r[c]);if(Q)for(var c of Q(r))ve.call(r,c)&&Z(e,c,r[c]);return e},S=(e,r)=>ge(e,me(r));import{R as te,j as o,r as ee}from"./vendor-react-CUeQczFW.js";import{t,f as h,W as we,h as je,g as W,P as A,B as G,a as ke}from"./core-OW4WOWX7.js";import{a as oe}from"./components-ui-CI8XsNbF.js";const Ce=te.memo(({renown:e,totalRenownEarned:r,numberFormat:c,currentTheme:y})=>{const j=oe(r).minus(t(1)).times(t(100)).floor().toNumber();if(j<=0)return null;const k=(()=>{if(y==="default"||!y)return{background:"rgba(103, 58, 183, 0.6)",border:"2px solid rgba(103, 58, 183, 0.9)",text:"#311b92",textShadow:"0 0 8px rgba(49, 27, 146, 0.8)"};switch(y){case"dark":return{background:"rgba(103, 58, 183, 0.2)",border:"1px solid rgba(103, 58, 183, 0.6)",text:"#9575cd",textShadow:"0 0 8px rgba(149, 117, 205, 0.4)"};case"midnight":return{background:"rgba(103, 58, 183, 0.2)",border:"1px solid rgba(103, 58, 183, 0.6)",text:"#9575cd",textShadow:"0 0 8px rgba(149, 117, 205, 0.4)"};default:return{background:"rgba(103, 58, 183, 0.6)",border:"2px solid rgba(103, 58, 183, 0.9)",text:"#311b92",textShadow:"0 0 8px rgba(49, 27, 146, 0.8)"}}})();return o.jsx("div",{style:{padding:"5px 15px",background:k.background,border:k.border,borderRadius:"20px",display:"inline-block",cursor:"help"},"data-tooltip":`Total Renown: ${h(r,c)}
Bonus: +${j}% to all income
Renown is earned by prestiging and provides permanent bonuses`,children:o.jsxs("span",{style:{color:k.text,fontWeight:"bold",textShadow:k.textShadow,fontSize:"0.9rem",lineHeight:"1.2",display:"inline-block"},children:[o.jsxs("span",{className:"badge-compact-text",style:{display:"inline-block"},children:["ðŸ‘‘ +",j,"%"]}),o.jsxs("span",{className:"badge-full-text",style:{display:"none"},children:["ðŸ‘‘ Total Renown: ",h(r,c)," +",j,"%"]})]})})}),Ne=te.memo(({gameState:e,gps:r,onClick:c,onEventInteract:y,onOpenTavern:j,onOpenPrestige:D,onOpenSettings:k,onOpenStatistics:ie,onOpenLeaderboard:ne,onOpenEmpire:re,isIdle:l})=>{var _,O,H;const[se,$]=ee.useState([]),I=ee.useRef(null),z=e.interface||{showFloatingText:!0,showWeatherWidget:!0,crownAnimations:!0},N=()=>{let n=0;return e.nationalProjects&&Object.values(e.nationalProjects).forEach(v=>{n+=v.level*A}),t(n)},le=n=>{var v,s,U;if(z.showFloatingText){const F=(v=I.current)==null?void 0:v.getBoundingClientRect();if(F){const de=n.clientX-F.left+(Math.random()*40-20),pe=n.clientY-F.top+(Math.random()*40-20),xe=t(1),J=e.clickUpgradeLevel||0,ue=Math.min(J,15),he=t(2).pow(ue),K=xe.times(he),b=oe(e.totalRenownEarned);let f=K;b.gt(t(1))&&(f=K.times(b));const V=ke(J);if(V>0){let d=t(0);G.forEach(i=>{const u=e.buildings[i.id]||t(0);u.gt(0)&&(d=d.plus(u.times(i.baseProduction)))});let p=d;b.gt(t(1))&&(p=d.times(b));let T=0;e.nationalProjects&&Object.values(e.nationalProjects).forEach(i=>T+=i.level||0);const w=t(1).plus(t(T*A));p=p.times(w);const g=((s=e.weather)==null?void 0:s.current)||"clear";let x=t(0);G.forEach(i=>{const u=e.buildings[i.id]||t(0);if(u.gt(0)){let a=t(1);g==="sunny"?(i.id==="peasant"||i.id==="field"||i.id==="stable"||i.id==="cathedral")&&(a=t(1.2)):g==="rainy"?(i.id==="silver_mine"||i.id==="alchemist"||i.id==="market"||i.id==="tavern")&&(a=t(1.2)):g==="stormy"?((i.id==="blacksmith"||i.id==="void_portal")&&(a=t(1.3)),(i.id==="field"||i.id==="stable")&&(a=t(.8))):g==="windy"&&(i.id==="market"||i.id==="castle"||i.id==="time_chamber")&&(a=t(1.15));const P=u.times(i.baseProduction);b.gt(t(1))?x=x.plus(P.times(b).times(w).times(a.minus(t(1)))):x=x.plus(P.times(w).times(a.minus(t(1))))}});const q=p.plus(x),E=t(1).plus(t(e.achievements.length*.02)),B=q.times(E);let M=B;e.globalIncomeMultiplier&&(M=B.times(t(e.globalIncomeMultiplier))),f=f.plus(M.times(V))}const X=t(1).plus(t(e.achievements.length*.02));if(f=f.times(X),e.globalIncomeMultiplier&&(f=f.times(t(e.globalIncomeMultiplier))),e.godMode){let d=t(0);G.forEach(i=>{const u=e.buildings[i.id]||t(0);u.gt(0)&&(d=d.plus(u.times(i.baseProduction)))});let p=d;b.gt(t(1))&&(p=d.times(b));let T=0;e.nationalProjects&&Object.values(e.nationalProjects).forEach(i=>T+=i.level||0);const w=t(1).plus(t(T*A));p=p.times(w);const g=((U=e.weather)==null?void 0:U.current)||"clear";let x=t(0);G.forEach(i=>{const u=e.buildings[i.id]||t(0);if(u.gt(0)){let a=t(1);g==="sunny"?(i.id==="peasant"||i.id==="field"||i.id==="stable"||i.id==="cathedral")&&(a=t(1.2)):g==="rainy"?(i.id==="silver_mine"||i.id==="alchemist"||i.id==="market"||i.id==="tavern")&&(a=t(1.2)):g==="stormy"?((i.id==="blacksmith"||i.id==="void_portal")&&(a=t(1.3)),(i.id==="field"||i.id==="stable")&&(a=t(.8))):g==="windy"&&(i.id==="market"||i.id==="castle"||i.id==="time_chamber")&&(a=t(1.15));const P=u.times(i.baseProduction);b.gt(t(1))?x=x.plus(P.times(b).times(w).times(a.minus(t(1)))):x=x.plus(P.times(w).times(a.minus(t(1))))}});const E=p.plus(x).times(X);let B=E;e.globalIncomeMultiplier&&(B=E.times(t(e.globalIncomeMultiplier)));const M=B.times(t(99999));f=f.plus(M)}const be="+"+h(f,e.numberFormat),Y={id:Date.now(),x:de,y:pe,val:be};$(d=>[...d,Y]),setTimeout(()=>{$(d=>d.filter(p=>p.id!==Y.id))},1e3)}}c(n)},C=we[((_=e.weather)==null?void 0:_.current)||"clear"],R={transition:"transform 0.8s ease-in-out, width 0.8s ease-in-out, height 0.8s ease-in-out, margin 0.8s ease-in-out, position 0.8s ease-in-out"},ce=m(l?{position:"fixed",bottom:"120px",right:"30px",transform:"scale(0.8)",transformOrigin:"bottom right",textAlign:"right",zIndex:100}:{transform:"scale(1)",marginBottom:"3rem",zIndex:10,textAlign:"center"},R),ae=m(l?{width:"80px",height:"80px",fontSize:"2rem",position:"fixed",bottom:"30px",right:"30px",borderRadius:"50%",zIndex:100}:{width:"260px",height:"260px",fontSize:"6rem",borderRadius:"50%",position:"relative",zIndex:5,margin:"0 auto"},R),L={opacity:l?0:1,transition:"opacity 0.5s ease-in-out",pointerEvents:l?"none":"auto"};return o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative",padding:"var(--panel-padding)",height:"100%",overflow:"hidden"},children:[z.showWeatherWidget&&o.jsxs("div",{style:m({position:"absolute",top:"10px",left:"10px",zIndex:20,background:C.color,padding:"8px 12px",borderRadius:"20px",border:"2px solid rgba(0,0,0,0.1)",boxShadow:"2px 2px 5px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:"8px",cursor:"help"},L),"data-tooltip":`${C.name}: ${C.description}`,children:[o.jsx("span",{style:{fontSize:"1.5rem"},children:C.icon}),o.jsxs("div",{style:{textAlign:"left",lineHeight:"1.1"},children:[o.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem",color:"#222"},children:C.name}),o.jsxs("div",{style:{fontSize:"0.7rem",color:"#444"},children:[t(Number(((O=e.weather)==null?void 0:O.timeLeft)||0)).ceil().toString(),"s remaining"]})]})]}),o.jsxs("div",{style:m({position:"absolute",top:"10px",right:"10px",zIndex:20,display:"flex",gap:"5px"},L),children:[o.jsx("button",{onClick:ne,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.8,color:"var(--text-color)",transition:"all 0.2s ease"},title:"Leaderboard (Available for all players)",children:"ðŸ†"}),o.jsx("button",{onClick:ie,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.7,color:"var(--text-color)"},title:"Statistics",children:"ðŸ“Š"}),o.jsx("button",{onClick:k,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.7,color:"var(--text-color)"},title:"Kingdom Settings",children:"âš™ï¸"})]}),o.jsxs("div",{style:ce,children:[o.jsx("div",{style:{fontSize:"1rem",color:l?"var(--text-color)":"var(--text-secondary)",marginBottom:"5px",textTransform:"uppercase",letterSpacing:"2px",textShadow:l?"1px 1px 2px #000":"none"},children:"Royal Treasury"}),o.jsx("div",{style:{fontSize:"3rem",fontFamily:"var(--font-main)",color:"var(--text-color)",textShadow:l?"2px 2px 4px #000":"2px 2px 0px rgba(255, 215, 0, 0.4)"},children:h(e.gold,e.numberFormat)}),o.jsxs("div",{style:{marginTop:"5px",fontSize:"1.1rem",color:l?"#90ee90":"var(--success-color)",fontStyle:"italic",textShadow:l?"1px 1px 2px #000":"none"},children:["+",h(r,e.numberFormat)," gold / sec"]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"10px",marginTop:"15px"},children:[o.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px",justifyContent:"center"},children:[o.jsx(Ce,{renown:e.renown,totalRenownEarned:e.totalRenownEarned,numberFormat:e.numberFormat,currentTheme:e.theme}),je(e.totalGold)&&(()=>{if(W(e.infiniteTowerLevel||0).minus(t(1)).times(t(100)).floor().toNumber()<=0)return null;const s=(()=>{if(e.theme==="default"||!e.theme)return{background:"rgba(103, 58, 183, 0.6)",border:"2px solid rgba(103, 58, 183, 0.9)",text:"#7b1fa2",textShadow:"0 0 8px rgba(123, 31, 162, 0.8)"};switch(e.theme){case"dark":return{background:"rgba(103, 58, 183, 0.2)",border:"1px solid rgba(103, 58, 183, 0.6)",text:"#ba68c8",textShadow:"0 0 8px rgba(186, 104, 200, 0.4)"};case"midnight":return{background:"rgba(103, 58, 183, 0.2)",border:"1px solid rgba(103, 58, 183, 0.6)",text:"#ba68c8",textShadow:"0 0 8px rgba(186, 104, 200, 0.4)"};default:return{background:"rgba(103, 58, 183, 0.6)",border:"2px solid rgba(103, 58, 183, 0.9)",text:"#7b1fa2",textShadow:"0 0 8px rgba(123, 31, 162, 0.8)"}}})();return o.jsx("div",{style:{padding:"5px 15px",background:s.background,border:s.border,borderRadius:"20px",display:"inline-block",cursor:"help"},"data-tooltip":`Infinite Tower Level: ${e.infiniteTowerLevel||0}
Bonus: +${h(W(e.infiniteTowerLevel||0).minus(t(1)).times(t(100)),e.numberFormat)}% to all income
Each tower floor provides +100% bonus
Build floors using Dark Matter Gold`,children:o.jsxs("span",{style:{color:s.text,fontWeight:"bold",textShadow:s.textShadow,fontSize:"0.9rem",lineHeight:"1.2",display:"inline-block"},children:[o.jsxs("span",{className:"badge-compact-text",style:{display:"inline-block"},children:["ðŸ—ï¸ +",h(W(e.infiniteTowerLevel||0).minus(t(1)).times(t(100)),e.numberFormat),"%"]}),o.jsxs("span",{className:"badge-full-text",style:{display:"none"},children:["ðŸ—ï¸ Tower: +",h(W(e.infiniteTowerLevel||0).minus(t(1)).times(t(100)),e.numberFormat),"%"]})]})})})()]}),o.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px",justifyContent:"center"},children:[(()=>{if(N().times(t(100)).floor().toNumber()<=0)return null;const s=(()=>{if(e.theme==="default"||!e.theme)return{background:"rgba(76, 175, 80, 0.6)",border:"2px solid rgba(76, 175, 80, 0.9)",text:"#1b5e20",textShadow:"0 0 8px rgba(27, 94, 32, 0.8)"};switch(e.theme){case"dark":return{background:"rgba(76, 175, 80, 0.2)",border:"1px solid rgba(76, 175, 80, 0.6)",text:"#81c784",textShadow:"0 0 8px rgba(129, 199, 132, 0.4)"};case"midnight":return{background:"rgba(76, 175, 80, 0.2)",border:"1px solid rgba(76, 175, 80, 0.6)",text:"#81c784",textShadow:"0 0 8px rgba(129, 199, 132, 0.4)"};default:return{background:"rgba(76, 175, 80, 0.6)",border:"2px solid rgba(76, 175, 80, 0.9)",text:"#1b5e20",textShadow:"0 0 8px rgba(27, 94, 32, 0.8)"}}})();return o.jsx("div",{style:{padding:"5px 15px",background:s.background,border:s.border,borderRadius:"20px",display:"inline-block",cursor:"help"},"data-tooltip":`National Projects Bonus: +${h(N().times(t(100)),e.numberFormat)}%
Each project level provides +${A*100}% bonus
Build projects in the Empire menu
Projects enhance all building production`,children:o.jsxs("span",{style:{color:s.text,fontWeight:"bold",textShadow:s.textShadow,fontSize:"0.9rem",lineHeight:"1.2",display:"inline-block"},children:[o.jsxs("span",{className:"badge-compact-text",style:{display:"inline-block"},children:["ðŸ—ï¸ +",h(N().times(t(100)),e.numberFormat),"%"]}),o.jsxs("span",{className:"badge-full-text",style:{display:"none"},children:["ðŸ—ï¸ Projects: +",h(N().times(t(100)),e.numberFormat),"%"]})]})})})(),(()=>{const n=e.achievements.length*2;if(n<=0)return null;const s=(()=>{if(e.theme==="default"||!e.theme)return{background:"rgba(255, 152, 0, 0.6)",border:"2px solid rgba(255, 152, 0, 0.9)",text:"#bf360c",textShadow:"0 0 8px rgba(191, 54, 12, 0.8)"};switch(e.theme){case"dark":return{background:"rgba(255, 152, 0, 0.25)",border:"1px solid rgba(255, 152, 0, 0.7)",text:"#ffb74d",textShadow:"0 0 8px rgba(255, 183, 77, 0.4)"};case"midnight":return{background:"rgba(255, 152, 0, 0.25)",border:"1px solid rgba(255, 152, 0, 0.7)",text:"#ffb74d",textShadow:"0 0 8px rgba(255, 183, 77, 0.4)"};default:return{background:"rgba(255, 152, 0, 0.6)",border:"2px solid rgba(255, 152, 0, 0.9)",text:"#bf360c",textShadow:"0 0 8px rgba(191, 54, 12, 0.8)"}}})();return o.jsx("div",{style:{padding:"5px 15px",background:s.background,border:s.border,borderRadius:"20px",display:"inline-block",cursor:"help"},"data-tooltip":`Achievements Bonus: +${n}%
Achievements: ${e.achievements.length} unlocked
Each achievement provides +2% bonus
Complete various challenges to earn achievements
Achievements give permanent income bonuses`,children:o.jsxs("span",{style:{color:s.text,fontWeight:"bold",textShadow:s.textShadow,fontSize:"0.9rem",lineHeight:"1.2",display:"inline-block"},children:[o.jsxs("span",{className:"badge-compact-text",style:{display:"inline-block"},children:["ðŸ† +",n,"%"]}),o.jsxs("span",{className:"badge-full-text",style:{display:"none"},children:["ðŸ† Achievements: +",n,"%"]})]})})})()]})]})]}),o.jsxs("div",{style:{position:"relative",marginBottom:l?0:"3rem",display:"flex",justifyContent:"center",alignItems:"center"},children:[o.jsx("div",{className:"magnetic-container",children:o.jsx("button",{ref:I,className:`main-button ${l?"idle":""} ${z.crownAnimations?"":"no-animations"}`,style:S(m({},ae),{display:"flex",alignItems:"center",justifyContent:"center",outline:"none",color:"#5d4037",cursor:"pointer",overflow:"hidden"}),onClick:le,children:o.jsx("span",{className:z.crownAnimations?"crown-icon":"",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",lineHeight:1,marginTop:"-10px"},children:"ðŸ‘‘"})})}),!l&&se.map(n=>o.jsx("div",{className:"floating-text",style:{left:n.x,top:n.y},children:n.val},n.id))]}),o.jsxs("div",{style:m({display:"flex",gap:"10px",zIndex:10,flexWrap:"wrap",justifyContent:"center"},L),children:[e.buildings.field&&e.buildings.field.gt(t(0))&&o.jsx("button",{className:"btn",style:{background:"var(--accent-color)",borderColor:"var(--gold-color)"},onClick:re,children:"ðŸ—ï¸ Projects"}),((H=e.buildings.tavern)==null?void 0:H.gt(t(0)))&&o.jsx("button",{className:"btn",onClick:j,children:"ðŸº Tavern"}),(e.totalGold.gt(t(5e5))||e.renown.gt(t(0)))&&o.jsx("button",{className:"btn",style:{background:"var(--accent-color)"},onClick:D,children:"ðŸ‘‘ Legacy"})]}),!l&&e.event&&e.event.type==="dragon"&&o.jsx("div",{className:"dragon-event",onMouseDown:()=>{try{y(e.event)}catch(n){console.error("Error clicking dragon:",n)}},children:"ðŸ‰"}),!l&&e.event&&e.event.type==="merchant"&&o.jsxs("div",{style:{position:"absolute",right:"20px",top:"100px",background:"#fff3e0",padding:"10px",border:"2px solid orange",zIndex:100,cursor:"pointer",animation:"pop 0.5s",borderRadius:"8px",boxShadow:"2px 2px 5px rgba(0,0,0,0.2)"},onClick:()=>y(e.event),children:[o.jsx("div",{style:{fontSize:"1.5rem",textAlign:"center"},children:"ðŸ‘³"}),o.jsx("div",{style:{fontWeight:"bold",color:"#000"},children:"Merchant"}),o.jsx("small",{style:{color:"#444"},children:"Click for gift"})]}),!l&&e.event&&e.event.type==="jester"&&o.jsxs("div",{style:{position:"absolute",left:"20px",top:"100px",background:"#fce4ec",padding:"10px",border:"2px solid pink",zIndex:100,cursor:"pointer",animation:"pop 0.5s",borderRadius:"8px",boxShadow:"2px 2px 5px rgba(0,0,0,0.2)"},onClick:()=>y(e.event),children:[o.jsx("div",{style:{fontSize:"1.5rem",textAlign:"center"},children:"ðŸ¤¡"}),o.jsx("div",{style:{fontWeight:"bold",color:"#000"},children:"Jester"}),o.jsx("small",{style:{color:"#444"},children:"Risk it all?"})]})]})});export{Ne as M};
