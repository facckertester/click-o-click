import{r as Rn,g as Tn}from"./vendor-B--z-fyW.js";import{t,f as w,B as fe,P as Fe,g as ye,a as Xe,b as Bn,U as dn,c as Je,S as _e,W as un,d as We,T as $e,C as Qe,A as Ae,N as Nn,e as gn,M as Oe,h as pn,i as xn,j as Ue,k as Be,l as fn,m as Le,n as Ie}from"./core-DEU_YNIC.js";import{a as he,i as Mn,g as En,d as Ze,s as en,b as nn,q as hn,c as mn,o as bn,l as yn,e as vn}from"./game-DOhdzVw7.js";var Ge={exports:{}},Te={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rn;function zn(){if(rn)return Te;rn=1;var n=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function c(s,i,l){var x=null;if(l!==void 0&&(x=""+l),i.key!==void 0&&(x=""+i.key),"key"in i){l={};for(var d in i)d!=="key"&&(l[d]=i[d])}else l=i;return i=l.ref,{$$typeof:n,type:s,key:x,ref:i!==void 0?i:null,props:l}}return Te.Fragment=o,Te.jsx=c,Te.jsxs=c,Te}var tn;function Wn(){return tn||(tn=1,Ge.exports=zn()),Ge.exports}var e=Wn(),y=Rn();const Se=Tn(y),An={"game.title":{en:"Royal Clicker",ru:"–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π –ö–ª–∏–∫–µ—Ä"},"game.soldiers":{en:"Soldiers",ru:"–°–æ–ª–¥–∞—Ç—ã"},"game.laborers":{en:"General Laborers Available",ru:"–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ"},"game.gold":{en:"Gold",ru:"–ó–æ–ª–æ—Ç–æ"},"game.renown":{en:"Renown",ru:"–†–µ–ø—É—Ç–∞—Ü–∏—è"},"game.totalRenown":{en:"Total Renown",ru:"–û–±—â–∞—è —Ä–µ–ø—É—Ç–∞—Ü–∏—è"},"game.prestige":{en:"Prestige",ru:"–ü—Ä–µ—Å—Ç–∏–∂"},"game.prestigeCount":{en:"Prestige Count",ru:"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ—Å—Ç–∏–∂–µ–π"},"game.clickPower":{en:"Click Power",ru:"–°–∏–ª–∞ –∫–ª–∏–∫–∞"},"game.autoClickerPower":{en:"Auto Clicker Power",ru:"–°–∏–ª–∞ –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä–∞"},"prestige.tip":{en:"Tip",ru:"–°–æ–≤–µ—Ç"},"prestige.tipDescription":{en:"You can abdicate without choosing a ruler name. Choose a name only if you want to appear in leaderboard.",ru:"–í—ã –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–µ—á—å—Å—è –±–µ–∑ –≤—ã–±–æ—Ä–∞ –∏–º–µ–Ω–∏ –ø—Ä–∞–≤–∏—Ç–µ–ª—è. –í—ã–±–∏—Ä–∞–π—Ç–µ –∏–º—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–æ—è–≤–∏—Ç—å—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ –ª–∏–¥–µ—Ä–æ–≤."},"prestige.youWillLose":{en:"You will lose:",ru:"–í—ã –ø–æ—Ç–µ—Ä—è–µ—Ç–µ:"},"prestige.loseGold":{en:"All Gold & Treasury",ru:"–í—Å–µ –∑–æ–ª–æ—Ç–æ –∏ –∫–∞–∑–Ω—É"},"prestige.loseEstates":{en:"All Estates (Buildings)",ru:"–í—Å–µ –ø–æ–º–µ—Å—Ç—å—è (–∑–¥–∞–Ω–∏—è)"},"prestige.loseWorkforce":{en:"Workforce (Laborers & Specialists)",ru:"–†–∞–±–æ—á–∏—Ö (–†–∞–±–æ—á–∏—Ö –∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤)"},"prestige.loseScepterLevels":{en:"Royal Scepter Levels",ru:"–£—Ä–æ–≤–Ω–∏ –∫–æ—Ä–æ–ª–µ–≤—Å–∫–æ–≥–æ —Å–∫–∏–ø–µ—Ç—Ä–∞"},"prestige.loseUnfinishedProjects":{en:"Unfinished National Projects",ru:"–ù–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã"},"prestige.loseUnfinishedProjectsDescription":{en:"Progress & Resources",ru:"–ü—Ä–æ–≥—Ä–µ—Å—Å –∏ —Ä–µ—Å—É—Ä—Å—ã"},"prestige.youWillKeep":{en:"You will keep:",ru:"–í—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ:"},"prestige.keep.achievements":{en:"Achievements",ru:"–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è"},"prestige.keep.currentRenown":{en:"Current Renown",ru:"–¢–µ–∫—É—â–∞—è —Ä–µ–ø—É—Ç–∞—Ü–∏—è"},"prestige.keep.projectLevels":{en:"Completed National Project Levels",ru:"–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤"},"prestige.keep.stats":{en:"Lifetime Stats & Leaderboard Rank",ru:"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è –∏ —Ä–µ–π—Ç–∏–Ω–≥ –≤ —Ç–∞–±–ª–∏—Ü–µ –ª–∏–¥–µ—Ä–æ–≤"},"prestige.activeProjectsWarning":{en:"WARNING: You have a National Project under construction!",ru:"–ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï: –£ –≤–∞—Å –µ—Å—Ç—å –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –≤ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–µ!"},"prestige.activeProjectsDescription":{en:"Abdication will cancel construction. All progress and resources invested in the pending level will be lost.",ru:"–û—Ç—Ä–µ—á–µ–Ω–∏–µ –æ—Ç–º–µ–Ω–∏—Ç —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ. –í–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ —Ä–µ—Å—É—Ä—Å—ã, –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –≤ –æ–∂–∏–¥–∞—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å, –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã."},"prestige.currentRenown":{en:"Current Renown",ru:"–¢–µ–∫—É—â–∞—è —Ä–µ–ø—É—Ç–∞—Ü–∏—è"},"units.train":{en:"Train",ru:"–¢—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å"},"units.hireLaborer":{en:"Hire",ru:"–ù–∞–Ω—è—Ç—å"},"units.specialistGuild":{en:"Specialist Guild",ru:"–ì–∏–ª—å–¥–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤"},"units.trainFromLaborers":{en:"Train from Laborers",ru:"–¢—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–∑ —Ä–∞–±–æ—á–∏—Ö"},"buildings.requires":{en:"Requires",ru:"–¢—Ä–µ–±—É–µ—Ç"},"buildings.cost":{en:"Cost",ru:"–°—Ç–æ–∏–º–æ—Å—Ç—å"},"buildings.and":{en:"and",ru:"–∏"},"mainButton.hire":{en:"Hire",ru:"–ù–∞–Ω—è—Ç—å"},"common.close":{en:"Close",ru:"–ó–∞–∫—Ä—ã—Ç—å"},"common.cancel":{en:"Cancel",ru:"–û—Ç–º–µ–Ω–∞"},"common.confirm":{en:"Confirm",ru:"–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"},"offline.title":{en:"Offline Progress",ru:"–ü—Ä–æ–≥—Ä–µ—Å—Å –æ—Ñ–ª–∞–π–Ω"},"offline.efficiency":{en:"Production Efficiency",ru:"–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞"},"offline.goldEarned":{en:"Gold Earned",ru:"–ó–æ–ª–æ—Ç–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ"},"offline.projectsCompleted":{en:"Projects Completed",ru:"–ü—Ä–æ–µ–∫—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã"},"ruler.congratulations":{en:"Congratulations! Your kingdom has reached",ru:"–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í–∞—à–µ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ –¥–æ—Å—Ç–∏–≥–ª–æ"},"ruler.chooseName":{en:"It's time to choose a name for your ruler and enter the history books!",ru:"–ü—Ä–∏—à–ª–æ –≤—Ä–µ–º—è –≤—ã–±—Ä–∞—Ç—å –∏–º—è –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–∞–≤–∏—Ç–µ–ª—è –∏ –≤–æ–π—Ç–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é!"},"rulerName.title":{en:"Choose Your Ruler Name",ru:"–í—ã–±–µ—Ä–∏—Ç–µ –∏–º—è –≤–∞—à–µ–≥–æ –ø—Ä–∞–≤–∏—Ç–µ–ª—è"},"rulerName.description":{en:"Choose your ruler name to appear on the leaderboard. You can change it anytime in settings.",ru:"–í—ã–±–µ—Ä–∏—Ç–µ –∏–º—è –ø—Ä–∞–≤–∏—Ç–µ–ª—è, —á—Ç–æ–±—ã –ø–æ—è–≤–∏—Ç—å—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ –ª–∏–¥–µ—Ä–æ–≤. –í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –µ–≥–æ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö."},"rulerName.enterName":{en:"Enter your name...",ru:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è..."},"rulerName.submitting":{en:"Submitting...",ru:"–û—Ç–ø—Ä–∞–≤–∫–∞..."},"rulerName.confirm":{en:"Confirm Name",ru:"–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∏–º—è"},"tavern.title":{en:"The Rusty Tankard",ru:"–†–∂–∞–≤–∞—è –±–æ—á–∫–∞"},"tavern.exit":{en:"Exit Tavern",ru:"–í—ã–π—Ç–∏ –∏–∑ —Ç–∞–≤–µ—Ä–Ω—ã"},"tavern.racing":{en:"Racing",ru:"–°–∫–∞—á–∫–∏"},"tavern.coin":{en:"Coin Flip",ru:"–û—Ä–ª—è–Ω–∫–∞ –º–æ–Ω–µ—Ç–∫–∏"},"tavern.dice":{en:"Dice",ru:"–ö–æ—Å—Ç–∏"},"actionBar.upgrades":{en:"‚öîÔ∏è Upgrades",ru:"‚öîÔ∏è –£–ª—É—á—à–µ–Ω–∏—è"},"actionBar.buildings":{en:"üè∞ Buildings",ru:"üè∞ –ó–¥–∞–Ω–∏—è"},"actionBar.tavern":{en:"üç∫ Tavern",ru:"üç∫ –¢–∞–≤–µ—Ä–Ω–∞"},"actionBar.prestige":{en:"üëë Prestige",ru:"üëë –ü—Ä–µ—Å—Ç–∏–∂"},"actionBar.achievements":{en:"üèÜ Achievements",ru:"üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è"},"actionBar.skinShop":{en:"üé® Royal Architect",ru:"üé® –ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä"},"actionBar.statistics":{en:"üìä Statistics",ru:"üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"},"actionBar.settings":{en:"‚öôÔ∏è Settings",ru:"‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"},"actionBar.changelog":{en:"üìú Changelog",ru:"üìú –°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π"},"settings.title":{en:"Settings",ru:"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"},"settings.language":{en:"Language",ru:"–Ø–∑—ã–∫"},"settings.english":{en:"English",ru:"–ê–Ω–≥–ª–∏–π—Å–∫–∏–π"},"settings.russian":{en:"Russian",ru:"–†—É—Å—Å–∫–∏–π"},"settings.save":{en:"Save",ru:"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"},"settings.reset":{en:"Reset Game",ru:"–°–±—Ä–æ—Å–∏—Ç—å –∏–≥—Ä—É"},"settings.close":{en:"Close",ru:"–ó–∞–∫—Ä—ã—Ç—å"},"settings.animationsDesc":{en:"Enable visual effects and animations.",ru:"–í–∫–ª—é—á–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –∏ –∞–Ω–∏–º–∞—Ü–∏–∏."},"settings.clickText":{en:"Click Text",ru:"–¢–µ–∫—Å—Ç –∫–ª–∏–∫–∞"},"settings.clickTextDesc":{en:"Show floating numbers on click.",ru:"–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–ª–∞–≤–∞—é—â–∏–µ —á–∏—Å–ª–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ."},"settings.system":{en:"System",ru:"–°–∏—Å—Ç–µ–º–∞"},"game.godModeEnabled":{en:"God Mode Enabled: +99999s per click",ru:"–†–µ–∂–∏–º –±–æ–≥–∞ –≤–∫–ª—é—á–µ–Ω: +99999s –∑–∞ –∫–ª–∏–∫"},"game.godModeDisabled":{en:"God Mode Disabled",ru:"–†–µ–∂–∏–º –±–æ–≥–∞ –æ—Ç–∫–ª—é—á–µ–Ω"},"tooltip.count":{en:"Count",ru:"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ"},"tooltip.production":{en:"Production",ru:"–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ"},"tooltip.incomeShare":{en:"Income Share",ru:"–î–æ–ª—è –¥–æ—Ö–æ–¥–∞"},"tooltip.nextBuilding":{en:"Next Building",ru:"–°–ª–µ–¥—É—é—â–µ–µ –∑–¥–∞–Ω–∏–µ"},"tooltip.eachProduces":{en:"Each Produces",ru:"–ö–∞–∂–¥–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç"},"tooltip.gold":{en:"gold",ru:"–∑–æ–ª–æ—Ç–∞"},"horseRacing.andTheyreOff":{en:"And they're off!",ru:"–ò –æ–Ω–∏ –ø–æ—à–ª–∏!"},"horseRacing.winner":{en:"Winner!",ru:"–ü–æ–±–µ–¥–∏—Ç–µ–ª—å!"},"horseRacing.betterLuckNextTime":{en:"Better luck next time",ru:"–í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –ø–æ–≤–µ–∑–µ—Ç –±–æ–ª—å—à–µ"},"horseRacing.winnerIs":{en:"Winner is",ru:"–ü–æ–±–µ–¥–∏—Ç–µ–ª—å"},"horseRacing.youWon":{en:"You won",ru:"–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏"},"horseRacing.youLost":{en:"You lost",ru:"–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏"},"horseRacing.gold":{en:"Gold",ru:"–ó–æ–ª–æ—Ç–æ"},"horseRacing.start":{en:"START",ru:"–°–¢–ê–†–¢"},"horseRacing.raceAgain":{en:"RACE AGAIN",ru:"–°–ö–ê–ß–ê–¢–¨ –°–ù–û–í–ê"},"coinFlip.victory":{en:"Victory!",ru:"–ü–æ–±–µ–¥–∞!"},"coinFlip.defeat":{en:"Defeat!",ru:"–ü–æ—Ä–∞–∂–µ–Ω–∏–µ!"},"coinFlip.result":{en:"Result",ru:"–†–µ–∑—É–ª—å—Ç–∞—Ç"},"coinFlip.heads":{en:"Heads",ru:"–û—Ä—ë–ª"},"coinFlip.tails":{en:"Tails",ru:"–†–µ—à–∫–∞"},"diceGame.youWon":{en:"You Won!",ru:"–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏!"},"diceGame.youLost":{en:"You Lost",ru:"–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏!"},"diceGame.snakeEyes":{en:"Sum 2 (Snake Eyes)",ru:"–°—É–º–º–∞ 2 (–ó–º–µ–∏–Ω—ã–µ –≥–ª–∞–∑–∞)"},"diceGame.boxcars":{en:"Sum 12 (Boxcars)",ru:"–°—É–º–º–∞ 12 (–î–≤—É–∫–æ–ª–∫–∏)"},"diceGame.sum7":{en:"Sum 7",ru:"–°—É–º–º–∞ 7"},"diceGame.sum8to11":{en:"Sum 8-11",ru:"–°—É–º–º–∞ 8-11"},"diceGame.houseWins":{en:"Sum 3-6: House Wins",ru:"–°—É–º–º–∞ 3-6: –í—ã–∏–≥—Ä—ã—à –∫–∞–∑–∏–Ω–æ"},"diceGame.sum":{en:"Sum",ru:"–°—É–º–º–∞"},"diceGame.roll":{en:"ROLL",ru:"–ë–†–û–°–ò–¢–¨"},"diceGame.result":{en:"Result",ru:"–†–µ–∑—É–ª—å—Ç–∞—Ç"},"diceGame.rolled":{en:"Rolled",ru:"–í—ã–±—Ä–æ—à–µ–Ω–æ"},"diceGame.noResultsYet":{en:"No results yet",ru:"–†–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç"},"error.placeValidBet":{en:"Place a valid bet!",ru:"–°–¥–µ–ª–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç–∞–≤–∫—É!"},"error.notEnoughGold":{en:"Not enough gold!",ru:"–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–æ–ª–æ—Ç–∞!"},"error.enterValidBet":{en:"Please enter a valid bet amount.",ru:"–í–≤–µ–¥–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—É–º–º—É —Å—Ç–∞–≤–∫–∏."},"error.selectHeadsOrTails":{en:"Please select Heads or Tails!",ru:"–í—ã–±–µ—Ä–∏—Ç–µ –û—Ä—ë–ª –∏–ª–∏ –†–µ—à–∫–∞!"},"error.rolling":{en:"Rolling...",ru:"–ë—Ä–æ—Å–∞–µ–º..."},"error.couldNotFindRoot":{en:"Could not find root element to mount to",ru:"–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –∫–æ—Ä–Ω–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"},"settings.cinematicIdleMode":{en:"Cinematic Idle Mode",ru:"–ö–∏–Ω–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è"},"settings.cinematicIdleModeDesc":{en:"Show landscape when inactive. Wait 30 seconds after enabling.",ru:"–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–µ–π–∑–∞–∂ –ø—Ä–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 30 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è."},"settings.left":{en:"Left",ru:"–õ–µ–≤–∞—è"},"settings.center":{en:"Center",ru:"–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è"},"settings.right":{en:"Right",ru:"–ü—Ä–∞–≤–∞—è"},"barracks.name":{en:"Barracks",ru:"–ö–∞–∑–∞—Ä–º—ã"},"barracks.description":{en:"Train soldiers automatically",ru:"–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç—Ä–µ–Ω–∏—Ä—É—é—Ç —Å–æ–ª–¥–∞—Ç"},"statistics.none":{en:"None",ru:"–ù–µ—Ç"},"statistics.unknown":{en:"Unknown",ru:"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"},"farm.name":{en:"Farm",ru:"–§–µ—Ä–º–∞"},"farm.description":{en:"Generate gold over time",ru:"–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∑–æ–ª–æ—Ç–æ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º"},"market.name":{en:"Market",ru:"–†—ã–Ω–æ–∫"},"market.description":{en:"Increase gold generation",ru:"–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∑–æ–ª–æ—Ç–∞"},"academy.name":{en:"Academy",ru:"–ê–∫–∞–¥–µ–º–∏—è"},"academy.description":{en:"Increase click power",ru:"–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∏–ª—É –∫–ª–∏–∫–∞"},"castle.name":{en:"Castle",ru:"–ó–∞–º–æ–∫"},"castle.description":{en:"Prestige building",ru:"–ó–¥–∞–Ω–∏–µ –ø—Ä–µ—Å—Ç–∏–∂–∞"},"upgrades.sharperSwords":{en:"Sharper Swords",ru:"–û—Å—Ç—Ä—ã–µ –º–µ—á–∏"},"upgrades.betterTraining":{en:"Better Training",ru:"–£–ª—É—á—à–µ–Ω–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞"},"upgrades.goldenArmor":{en:"Golden Armor",ru:"–ó–æ–ª–æ—Ç–∞—è –±—Ä–æ–Ω—è"},"upgrades.warHorses":{en:"War Horses",ru:"–ë–æ–µ–≤—ã–µ –ª–æ—à–∞–¥–∏"},"achievements.title":{en:"Royal Decree (Achievements)",ru:"–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π –£–∫–∞–∑ (–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è)"},"achievements.unlocked":{en:"Unlocked",ru:"–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ"},"achievements.locked":{en:"Locked",ru:"–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ"},"achievements.in":{en:"in",ru:"–≤"},"achievements.categories.all":{en:"All",ru:"–í—Å–µ"},"achievements.categories.buildings":{en:"Buildings",ru:"–ó–¥–∞–Ω–∏—è"},"achievements.categories.clicks":{en:"Clicks",ru:"–ö–ª–∏–∫–∏"},"achievements.categories.gold":{en:"Gold",ru:"–ó–æ–ª–æ—Ç–æ"},"achievements.categories.army":{en:"Army",ru:"–ê—Ä–º–∏—è"},"achievements.categories.prestige":{en:"Prestige",ru:"–ü—Ä–µ—Å—Ç–∏–∂"},"achievements.categories.dragons":{en:"Dragons",ru:"–î—Ä–∞–∫–æ–Ω—ã"},"achievements.categories.tavern":{en:"Tavern",ru:"–¢–∞–≤–µ—Ä–Ω–∞"},"achievements.categories.totalBuildings":{en:"Total Buildings",ru:"–í—Å–µ–≥–æ –∑–¥–∞–Ω–∏–π"},"achievements.categories.efficiency":{en:"Efficiency",ru:"–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"},"achievements.categories.wonders":{en:"Wonders",ru:"–ß—É–¥–µ—Å–∞"},"achievements.categories.trade":{en:"Trade",ru:"–¢–æ—Ä–≥–æ–≤–ª—è"},"achievements.firstRecruitDesc":{en:"Recruit your first soldier",ru:"–ù–∞–Ω—è—Ç—å –ø–µ—Ä–≤–æ–≥–æ —Å–æ–ª–¥–∞—Ç–∞"},"achievements.popupUnlocked":{en:"Achievement Unlocked!",ru:"–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ!"},"achievements.squad":{en:"Squad",ru:"–û—Ç—Ä—è–¥"},"achievements.squadDesc":{en:"Have 100 soldiers",ru:"–ò–º–µ—Ç—å 100 —Å–æ–ª–¥–∞—Ç"},"achievements.army":{en:"Army",ru:"–ê—Ä–º–∏—è"},"achievements.armyDesc":{en:"Have 1000 soldiers",ru:"–ò–º–µ—Ç—å 1000 —Å–æ–ª–¥–∞—Ç"},"achievements.legion":{en:"Legion",ru:"–õ–µ–≥–∏–æ–Ω"},"achievements.legionDesc":{en:"Have 10000 soldiers",ru:"–ò–º–µ—Ç—å 10000 —Å–æ–ª–¥–∞—Ç"},"skinShop.title":{en:"Royal Architect",ru:"–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä"},"skinShop.shapes":{en:"Shapes",ru:"–§–æ—Ä–º—ã"},"skinShop.catalog":{en:"Catalog",ru:"–ö–∞—Ç–∞–ª–æ–≥"},"skinShop.aiForge":{en:"AI Forge",ru:"AI –ö—É–∑–Ω–∏—Ü–∞"},"skinShop.select":{en:"Select",ru:"–í—ã–±—Ä–∞—Ç—å"},"skinShop.selected":{en:"Selected",ru:"–í—ã–±—Ä–∞–Ω–æ"},"skinShop.buy":{en:"Buy",ru:"–ö—É–ø–∏—Ç—å"},"skinShop.generate":{en:"Generate Skin",ru:"–°–æ–∑–¥–∞—Ç—å —Å–∫–∏–Ω"},"skinShop.material":{en:"Material",ru:"–ú–∞—Ç–µ—Ä–∏–∞–ª"},"skinShop.element":{en:"Element",ru:"–≠–ª–µ–º–µ–Ω—Ç"},"skinShop.style":{en:"Style",ru:"–°—Ç–∏–ª—å"},"toast.leaderboardSubmitted":{en:"Leaderboard data submitted successfully!",ru:"–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤!"},"toast.projectCompleted":{en:"Project Completed: {building} Infrastructure Level {level}!",ru:"–ü—Ä–æ–µ–∫—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: {building} –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –£—Ä–æ–≤–µ–Ω—å {level}!"},"toast.gameReset":{en:"Game Reset",ru:"–ò–≥—Ä–∞ —Å–±—Ä–æ—à–µ–Ω–∞"},"toast.gameSaved":{en:"Game Saved",ru:"–ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞"},"toast.abdicationSuccessful":{en:"Abdication Successful. Long live the new King!",ru:"–û—Ç—Ä–µ—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ. –î–∞ –∑–¥—Ä–∞–≤—Å—Ç–≤—É–µ—Ç –Ω–æ–≤—ã–π –ö–æ—Ä–æ–ª—å!"},"leaderboard.title":{en:"Leaderboard",ru:"–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤"},"leaderboard.loading":{en:"Loading leaderboard",ru:"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤"},"leaderboard.youArePlayingAs":{en:"You are playing as",ru:"–í—ã –∏–≥—Ä–∞–µ—Ç–µ –∫–∞–∫"},"leaderboard.ourRank":{en:"Your rank",ru:"–í–∞—à —Ä–µ–π—Ç–∏–Ω–≥"},"leaderboard.notRankedYet":{en:"Not ranked yet",ru:"–ï—â–µ –Ω–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞"},"leaderboard.in":{en:"in",ru:"–≤"},"leaderboard.allTime":{en:"All Time",ru:"–í—Å–µ –≤—Ä–µ–º—è"},"leaderboard.weekly":{en:"This Week",ru:"–≠—Ç–∞ –Ω–µ–¥–µ–ª—è"},"leaderboard.viewOnlyMode":{en:"View Only Mode",ru:"–¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä"},"leaderboard.anyoneCanView":{en:"Anyone can view leaderboard!",ru:"–õ—é–±–æ–π –º–æ–∂–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤!"},"leaderboard.chooseName":{en:"Choose a name at 10M gold to participate.",ru:"–í—ã–±–µ—Ä–∏—Ç–µ –∏–º—è –ø—Ä–∏ 10–ú –∑–æ–ª–æ—Ç–µ –¥–ª—è —É—á–∞—Å—Ç–∏—è."},"leaderboard.chooseRulerName":{en:"Choose Ruler Name",ru:"–í—ã–±–µ—Ä–∏—Ç–µ –∏–º—è –ø—Ä–∞–≤–∏—Ç–µ–ª—è"},"leaderboard.dataUpdated":{en:"Data updated",ru:"–î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã"},"leaderboard.minutesAgo":{en:"minutes ago",ru:"–º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥"},"leaderboard.rank":{en:"Rank",ru:"–†–µ–π—Ç–∏–Ω–≥"},"leaderboard.ruler":{en:"Ruler",ru:"–ü—Ä–∞–≤–∏—Ç–µ–ª—å"},"leaderboard.gold":{en:"Gold",ru:"–ó–æ–ª–æ—Ç–æ"},"leaderboard.renown":{en:"Renown",ru:"–†–µ–ø—É—Ç–∞—Ü–∏—è"},"leaderboard.buildings":{en:"Buildings",ru:"–ó–¥–∞–Ω–∏—è"},"leaderboard.achievements":{en:"Achievements",ru:"–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è"},"leaderboard.updatesAutomatically":{en:"Leaderboard updates automatically every hour. Data is cached for performance.",ru:"–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–π —á–∞—Å. –î–∞–Ω–Ω—ã–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏."},"tabs.estates":{en:"Estates",ru:"–ü–æ–º–µ—Å—Ç—å—è"},"tabs.workforce":{en:"Workforce",ru:"–†–∞–±–æ—á–∏–µ"},"tabs.throne":{en:"Throne",ru:"–¢—Ä–æ–Ω"},"tabs.empire":{en:"Empire",ru:"–ò–º–ø–µ—Ä–∏—è"},"store.max":{en:"Max",ru:"–ú–∞–∫—Å–∏–º—É–º"},"store.mode":{en:"Mode",ru:"–†–µ–∂–∏–º"},"store.buy":{en:"Buy",ru:"–ü–æ–∫—É–ø–∫–∞"},"store.sell":{en:"Sell",ru:"–ü—Ä–æ–¥–∞–∂–∞"},"store.hire":{en:"Hire",ru:"–ù–∞–Ω—è—Ç—å"},"store.for":{en:"for",ru:"–¥–ª—è"},"store.holdCtrl":{en:"Hold Ctrl",ru:"–£–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ Ctrl"},"store.holdShift":{en:"Hold Shift",ru:"–£–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ Shift"},"common.cost":{en:"Cost",ru:"–°—Ç–æ–∏–º–æ—Å—Ç—å"},"common.effect":{en:"Effect",ru:"–≠—Ñ—Ñ–µ–∫—Ç"},"common.buy":{en:"Buy",ru:"–ö—É–ø–∏—Ç—å"},"common.sell":{en:"Sell",ru:"–ü—Ä–æ–¥–∞—Ç—å"},"common.on":{en:"ON",ru:"–í–ö–õ"},"common.off":{en:"OFF",ru:"–í–´–ö–õ"},"common.maxed":{en:"MAXED",ru:"–ú–ê–ö–°"}},r=(n,o="en")=>{const c=An[n];return c?c[o]||c.en||n:(console.warn(`Translation missing for key: ${n}`),n)},He=(n,o="en")=>{const s={peasant:{en:"Peasant",ru:"–ö—Ä–µ—Å—Ç—å—è–Ω–∏–Ω"},field:{en:"Wheat Field",ru:"–ü—à–µ–Ω–∏—á–Ω–æ–µ –ø–æ–ª–µ"},blacksmith:{en:"Blacksmith",ru:"–ö—É–∑–Ω–µ—Ü"},market:{en:"Market",ru:"–†—ã–Ω–æ–∫"},tavern:{en:"Tavern",ru:"–¢–∞–≤–µ—Ä–Ω–∞"},stable:{en:"Stables",ru:"–ö–æ–Ω—é—à–Ω—è"},castle:{en:"Castle",ru:"–ó–∞–º–æ–∫"},silver_mine:{en:"Silver Mine",ru:"–°–µ—Ä–µ–±—Ä—è–Ω–∞—è —à–∞—Ö—Ç–∞"},alchemist:{en:"Alchemist Guild",ru:"–ì–∏–ª—å–¥–∏—è –∞–ª—Ö–∏–º–∏–∫–æ–≤"},cathedral:{en:"Cathedral",ru:"–°–æ–±–æ—Ä"},palace:{en:"Grand Palace",ru:"–ë–æ–ª—å—à–æ–π –¥–≤–æ—Ä–µ—Ü"},void_portal:{en:"Void Portal",ru:"–ü–æ—Ä—Ç–∞–ª –ø—É—Å—Ç–æ—Ç—ã"},time_chamber:{en:"Time Chamber",ru:"–í—Ä–µ–º–µ–Ω–Ω–∞—è –∫–∞–º–µ—Ä–∞"},dimension_gate:{en:"Dimension Gate",ru:"–í—Ä–∞—Ç–∞ –∏–∑–º–µ—Ä–µ–Ω–∏–π"},astral_rift:{en:"Astral Rift",ru:"–ê—Å—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–∞–∑–ª–æ–º"},chronosphere:{en:"Chronosphere",ru:"–•—Ä–æ–Ω–æ—Å—Ñ–µ—Ä–∞"},reality_engine:{en:"Reality Engine",ru:"–î–≤–∏–∂–æ–∫ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏"},quantum_computer:{en:"Quantum Supercomputer",ru:"–ö–≤–∞–Ω—Ç–æ–≤—ã–π —Å—É–ø–µ—Ä–∫–æ–º–ø—å—é—Ç–µ—Ä"},multiverse_nexus:{en:"Multiverse Nexus",ru:"–ù–µ–∫—Å—É—Å –º—É–ª—å—Ç–∏–≤—Å–µ–ª–µ–Ω–Ω–æ–π"},dyson_sphere:{en:"Dyson Sphere",ru:"–°—Ñ–µ—Ä–∞ –î–∞–π—Å–æ–Ω–∞"},matter_replicator:{en:"Matter Replicator",ru:"–†–µ–ø–ª–∏–∫–∞—Ç–æ—Ä –º–∞—Ç–µ—Ä–∏–∏"},architect_quill:{en:"The Architect's Quill",ru:"–ü–µ—Ä–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞"}}[n];return s?s[o]||s.en||n:(console.warn(`Building name missing for id: ${n}`),n)},Ln=(n,o="en")=>{const s={peasant:{en:"A loyal subject to work fields.",ru:"–í–µ—Ä–Ω–æ–ø–æ–¥–¥–∞–Ω–Ω—ã–π –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ –ø–æ–ª—è—Ö."},field:{en:"Golden wheat to feed kingdom.",ru:"–ó–æ–ª–æ—Ç–∞—è –ø—à–µ–Ω–∏—Ü–∞ –¥–ª—è –∫–æ—Ä–º–ª–µ–Ω–∏—è –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞."},blacksmith:{en:"Forging tools and weapons.",ru:"–ö–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏ –æ—Ä—É–∂–∏—è."},market:{en:"Trade hub for exotic goods.",ru:"–¢–æ—Ä–≥–æ–≤—ã–π —Ü–µ–Ω—Ç—Ä –¥–ª—è —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤."},tavern:{en:"Where gold flows as freely as ale.",ru:"–ú–µ—Å—Ç–æ, –≥–¥–µ –∑–æ–ª–æ—Ç–æ —Ç–µ—á–µ—Ç —Ç–∞–∫ –∂–µ —Å–≤–æ–±–æ–¥–Ω–æ, –∫–∞–∫ –∏ —ç–ª—å."},stable:{en:"Horses for trade and war.",ru:"–õ–æ—à–∞–¥–∏ –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏ –∏ –≤–æ–π–Ω—ã."},castle:{en:"The seat of your power.",ru:"–ú–µ—Å—Ç–æ –≤–∞—à–µ–π –≤–ª–∞—Å—Ç–∏."},silver_mine:{en:"Deep shafts rich with precious metal.",ru:"–ì–ª—É–±–æ–∫–∏–µ —à–∞—Ö—Ç—ã, –±–æ–≥–∞—Ç—ã–µ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∞–ª–ª–∞–º–∏."},alchemist:{en:"Transmuting lead into gold.",ru:"–ü—Ä–µ–≤—Ä–∞—â–µ–Ω–∏–µ —Å–≤–∏–Ω—Ü–∞ –≤ –∑–æ–ª–æ—Ç–æ."},cathedral:{en:"Divine blessings bring great fortune.",ru:"–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏—è –ø—Ä–∏–Ω–æ—Å—è—Ç –≤–µ–ª–∏–∫—É—é —É–¥–∞—á—É."},palace:{en:"A wonder of world to cement your legacy.",ru:"–ß—É–¥–æ —Å–≤–µ—Ç–∞ –¥–ª—è –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è –≤–∞—à–µ–≥–æ –Ω–∞—Å–ª–µ–¥–∏—è."},void_portal:{en:"Gateway to endless void energy.",ru:"–í—Ä–∞—Ç–∞ –∫ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏ –ø—É—Å—Ç–æ—Ç—ã."},time_chamber:{en:"Manipulate time flow for infinite wealth.",ru:"–ú–∞–Ω–∏–ø—É–ª—è—Ü–∏—è –ø–æ—Ç–æ–∫–æ–º –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –±–æ–≥–∞—Ç—Å—Ç–≤–∞."},dimension_gate:{en:"Open portals to parallel dimensions.",ru:"–û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ—Ä—Ç–∞–ª–æ–≤ –≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è."},astral_rift:{en:"Tear open reality to harvest void energy.",ru:"–†–∞–∑—Ä—ã–≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è —Å–±–æ—Ä–∞ —ç–Ω–µ—Ä–≥–∏–∏ –ø—É—Å—Ç–æ—Ç—ã."},chronosphere:{en:"Manipulate time to generate endless wealth.",ru:"–ú–∞–Ω–∏–ø—É–ª—è—Ü–∏—è –≤—Ä–µ–º–µ–Ω–µ–º –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –±–æ–≥–∞—Ç—Å—Ç–≤–∞."},reality_engine:{en:"Rewrite physical laws of universe.",ru:"–ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –∑–∞–∫–æ–Ω–æ–≤ –≤—Å–µ–ª–µ–Ω–Ω–æ–π."},quantum_computer:{en:"Simulate infinite universes for profit.",ru:"–°–∏–º—É–ª—è—Ü–∏—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –≤—Å–µ–ª–µ–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–∏–±—ã–ª–∏."},multiverse_nexus:{en:"Trade with parallel realities.",ru:"–¢–æ—Ä–≥–æ–≤–ª—è —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—è–º–∏."},dyson_sphere:{en:"Harness entire energy of a star.",ru:"–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å–µ–π —ç–Ω–µ—Ä–≥–∏–∏ –∑–≤–µ–∑–¥—ã."},matter_replicator:{en:"Convert energy directly into gold.",ru:"–ü—Ä—è–º–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ –≤ –∑–æ–ª–æ—Ç–æ."},architect_quill:{en:"Rewrite code of existence itself.",ru:"–ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ –∫–æ–¥–∞ —Å–∞–º–æ–≥–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è."}}[n];return s?s[o]||s.en||n:(console.warn(`Building description missing for id: ${n}`),n)},Pn=(n,o="en")=>{const s={carpenter:{en:"Master Carpenter",ru:"–ú–∞—Å—Ç–µ—Ä –ø–ª–æ—Ç–Ω–∏–∫"},mason:{en:"Stone Mason",ru:"–ö–∞–º–µ–Ω—â–∏–∫"},architect:{en:"Grand Architect",ru:"–í–µ–ª–∏–∫–∏–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä"}}[n];return s?s[o]||s.en||n:(console.warn(`Unit name missing for id: ${n}`),n)},Fn=(n,o="en")=>{const s={carpenter:{en:"Skilled woodworker for advanced structures.",ru:"–£–º–µ–ª—ã–π –ø–ª–æ—Ç–Ω–∏–∫ –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π."},mason:{en:"Expert in stone fortifications.",ru:"–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –∫–∞–º–µ–Ω–Ω—ã–º —É–∫—Ä–µ–ø–ª–µ–Ω–∏—è–º."},architect:{en:"Visionary builder of impossible structures.",ru:"–ü—Ä–æ–≤–∏–¥–µ—Ü —Å—Ç—Ä–æ–∏—Ç–µ–ª—å –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π."}}[n];return s?s[o]||s.en||n:(console.warn(`Unit description missing for id: ${n}`),n)},Dn=({gameState:n,building:o,x:c,y:s,visible:i,onHide:l})=>{const x=y.useRef(null),[d,h]=y.useState({x:0,y:0});if(y.useEffect(()=>{if(!i||!x.current)return;const j=x.current.getBoundingClientRect();let W=c+15,b=s-j.height/2;W+j.width>window.innerWidth&&(W=c-j.width-15),b<10&&(b=10),b+j.height>window.innerHeight-10&&(b=window.innerHeight-j.height-10),h({x:W,y:b})},[i,c,s]),!i||!o)return null;const u=n.buildings[o.id]||t(0);if(!(n.totalGold.gte(o.baseCost)||u.gt(t(0))))return e.jsxs("div",{ref:x,className:"advanced-tooltip",style:{position:"fixed",left:`${d.x}px`,top:`${d.y}px`,background:"var(--panel-bg)",color:"var(--text-color)",padding:"12px",borderRadius:"2px",border:"4px double var(--accent-color)",fontSize:"15px",lineHeight:"1.4",width:"240px",minWidth:"240px",zIndex:1e4,boxShadow:"var(--shadow)",pointerEvents:"none",transition:"all 0.15s ease"},onMouseLeave:l,children:[e.jsxs("div",{style:{fontWeight:"bold",fontSize:"16px",marginBottom:"8px",color:"var(--accent-color)",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid var(--accent-color)",paddingBottom:"6px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"‚ùì"}),e.jsx("span",{children:"???"})]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(33, 150, 243, 0.1), rgba(33, 150, 243, 0.05))",borderRadius:"6px",border:"1px solid rgba(33, 150, 243, 0.3)",marginBottom:"6px"},children:[e.jsx("span",{style:{color:"rgba(33, 150, 243, 0.9)",fontWeight:"bold",fontSize:"13px"},children:r("tooltip.count",n.interface.language)}),e.jsx("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:"???"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(76, 175, 80, 0.05))",borderRadius:"6px",border:"1px solid rgba(76, 175, 80, 0.3)",marginBottom:"6px"},children:[e.jsx("span",{style:{color:"var(--success-color)",fontWeight:"bold",fontSize:"13px"},children:r("tooltip.production",n.interface.language)}),e.jsx("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:"???/s"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(255, 152, 0, 0.1), rgba(255, 152, 0, 0.05))",borderRadius:"6px",border:"1px solid rgba(255, 152, 0, 0.3)"},children:[e.jsx("span",{style:{color:"#ff9800",fontWeight:"bold",fontSize:"13px"},children:r("tooltip.incomeShare",n.interface.language)}),e.jsx("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:"???%"})]})]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(141, 110, 99, 0.1), rgba(141, 110, 99, 0.05))",borderRadius:"6px",border:"1px solid var(--accent-color)",marginBottom:"6px"},children:[e.jsx("span",{style:{color:"var(--accent-color)",fontWeight:"bold",fontSize:"13px"},children:r("tooltip.nextBuilding",n.interface.language)}),e.jsxs("span",{style:{color:"var(--accent-color)",fontWeight:"bold",fontSize:"14px"},children:["??? ",r("tooltip.gold",n.interface.language)]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(156, 39, 176, 0.1), rgba(156, 39, 176, 0.05))",borderRadius:"6px",border:"1px solid rgba(156, 39, 176, 0.3)"},children:[e.jsx("span",{style:{color:"#9c27b0",fontWeight:"bold",fontSize:"13px"},children:r("tooltip.eachProduces",n.interface.language)}),e.jsx("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:"???/s"})]})]}),e.jsx("div",{style:{padding:"6px",background:"rgba(0, 0, 0, 0.05)",borderRadius:"6px",borderTop:"1px solid var(--border-color)",fontSize:"11px",color:"var(--text-secondary)",fontStyle:"italic",textAlign:"center"},children:"???"})]});const g=n.buildings[o.id]||t(0),E=jn(n,o),R=E.times(g),C=In(n),L=C.gt(0)?R.div(C).times(100):t(0),T=Gn(o.baseCost,g);return(T.gt(0)?E.div(T):t(0)).gt(0)?T.div(E):t(0),e.jsxs("div",{ref:x,className:"advanced-tooltip",style:{position:"fixed",left:`${d.x}px`,top:`${d.y}px`,background:"var(--panel-bg)",color:"var(--text-color)",padding:"12px",borderRadius:"2px",border:"4px double var(--accent-color)",fontSize:"15px",lineHeight:"1.4",width:"240px",minWidth:"240px",zIndex:1e4,boxShadow:"var(--shadow)",pointerEvents:"none",transition:"all 0.15s ease"},onMouseLeave:l,children:[e.jsxs("div",{style:{fontWeight:"bold",fontSize:"16px",marginBottom:"8px",color:"var(--accent-color)",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid var(--accent-color)",paddingBottom:"6px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:o.icon}),e.jsx("span",{children:He(o.id,n.interface.language)})]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(33, 150, 243, 0.1), rgba(33, 150, 243, 0.05))",borderRadius:"6px",border:"1px solid rgba(33, 150, 243, 0.3)",marginBottom:"6px"},children:[e.jsx("span",{style:{color:"rgba(33, 150, 243, 0.9)",fontWeight:"bold",fontSize:"13px"},children:r("tooltip.count",n.interface.language)}),e.jsx("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:w(g,n.numberFormat)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(76, 175, 80, 0.05))",borderRadius:"6px",border:"1px solid rgba(76, 175, 80, 0.3)",marginBottom:"6px"},children:[e.jsx("span",{style:{color:"var(--success-color)",fontWeight:"bold",fontSize:"13px"},children:r("tooltip.production",n.interface.language)}),e.jsxs("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:[w(R,n.numberFormat),"/s"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(255, 152, 0, 0.1), rgba(255, 152, 0, 0.05))",borderRadius:"6px",border:"1px solid rgba(255, 152, 0, 0.3)"},children:[e.jsx("span",{style:{color:"#ff9800",fontWeight:"bold",fontSize:"13px"},children:r("tooltip.incomeShare",n.interface.language)}),e.jsxs("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:[w(L,n.numberFormat),"%"]})]})]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(141, 110, 99, 0.1), rgba(141, 110, 99, 0.05))",borderRadius:"6px",border:"1px solid var(--accent-color)",marginBottom:"6px"},children:[e.jsx("span",{style:{color:"var(--accent-color)",fontWeight:"bold",fontSize:"13px"},children:r("tooltip.nextBuilding",n.interface.language)}),e.jsxs("span",{style:{color:"var(--accent-color)",fontWeight:"bold",fontSize:"14px"},children:[w(T,n.numberFormat)," gold"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(156, 39, 176, 0.1), rgba(156, 39, 176, 0.05))",borderRadius:"6px",border:"1px solid rgba(156, 39, 176, 0.3)"},children:[e.jsx("span",{style:{color:"#9c27b0",fontWeight:"bold",fontSize:"13px"},children:r("tooltip.eachProduces",n.interface.language)}),e.jsxs("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:[w(E,n.numberFormat),"/s"]})]})]}),e.jsx("div",{style:{padding:"6px",background:"rgba(0, 0, 0, 0.05)",borderRadius:"6px",borderTop:"1px solid var(--border-color)",fontSize:"11px",color:"var(--text-secondary)",fontStyle:"italic",textAlign:"center"},children:Ln(o.id,n.interface.language)})]})};function jn(n,o){var d;let c=o.baseProduction;const s=((d=n.weather)==null?void 0:d.current)||"clear";s==="sunny"&&(o.id==="peasant"||o.id==="field")?c=c.times(t(1.2)):s==="rainy"&&(o.id==="silver_mine"||o.id==="alchemist")?c=c.times(t(1.2)):s==="stormy"?(o.id==="blacksmith"&&(c=c.times(t(1.3))),o.id==="field"&&(c=c.times(t(.8)))):s==="windy"&&o.id==="market"&&(c=c.times(t(1.15)));let i=0;n.nationalProjects&&Object.values(n.nationalProjects).forEach(h=>{i+=h.level||0});const l=1+i*Fe;c=c.times(t(l));const x=de(n.renown);return c=c.times(x),c}function de(n){const o=n.toNumber();if(o<=0)return t(1);let c=t(1);o<=100?c=t(1+o*.01):o<=1e3?c=t(2).plus(t(o-100).times(t(.005))):o<=1e4?c=t(2.5).plus(t(o-1e3).times(t(.001))):c=t(10).plus(t(10).times(Math.log10(o)));const s=t(1e3);return he.min(c,s)}function In(n){let o=t(0);return fe.forEach(c=>{const s=n.buildings[c.id]||t(0);if(s.gt(0)){const i=jn(n,c);o=o.plus(i.times(s))}}),o}function Gn(n,o){return n.times(t(1.15).pow(o)).floor()}const on=(n,o=!1,c=!1,s=!1)=>({display:"flex",alignItems:"center",padding:"var(--panel-padding)",background:c?"rgba(0,0,0,0.05)":o?"rgba(46, 125, 50, 0.1)":s?"#f3e5f5":"var(--panel-bg)",border:"1px solid",borderColor:c?"rgba(0,0,0,0.2)":s?"#7b1fa2":n?"var(--accent-color)":"rgba(0,0,0,0.1)",borderRadius:"2px",cursor:n&&!c?"pointer":"default",opacity:n&&!c||o?1:.7,transition:"all 0.2s",boxShadow:n&&!c?"2px 2px 0 rgba(0,0,0,0.1)":"none",position:"relative",userSelect:"none",marginBottom:"var(--gap-size)",filter:c?"grayscale(1)":"none"}),wn={display:"flex",flexDirection:"column",gap:"var(--gap-size)",height:"100%",overflowY:"auto",padding:"var(--panel-padding)"},sn=({gameState:n,onBuyBuilding:o,onSellBuilding:c,onSetBuyAmount:s})=>{var T;const[i,l]=y.useState({visible:!1,x:0,y:0,building:null}),x=t(1),d=((T=n.interface)==null?void 0:T.lastBuyAmount)||t(1),[h,u]=y.useState(!1),[k,g]=y.useState(1);y.useEffect(()=>{const m=W=>{W.ctrlKey?g(10):W.shiftKey?g(100):g(1)},z=W=>m(W),j=W=>m(W);return window.addEventListener("keydown",z),window.addEventListener("keyup",j),()=>{window.removeEventListener("keydown",z),window.removeEventListener("keyup",j)}},[]);const E=(m,z)=>{const j=m.currentTarget.getBoundingClientRect();l({visible:!0,x:j.right,y:j.top+j.height/2,building:z})},R=()=>{l({visible:!1,x:0,y:0,building:null})},C=(m,z)=>{var M;let j=z;const W=((M=n.weather)==null?void 0:M.current)||"clear";W==="sunny"&&(m==="peasant"||m==="field")?j=j.times(t(1.2)):W==="rainy"&&(m==="silver_mine"||m==="alchemist")?j=j.times(t(1.2)):W==="stormy"?(m==="blacksmith"&&(j=j.times(t(1.3))),m==="field"&&(j=j.times(t(.8)))):W==="windy"&&m==="market"&&(j=j.times(t(1.15)));let b=t(1),B=0;n.nationalProjects&&Object.values(n.nationalProjects).forEach(F=>B+=F.level||0);const I=1+B*.05;b=b.times(t(I));const U=de(n.renown);return b=b.times(U),j.times(b)};let L=0;return e.jsxs("div",{style:wn,children:[e.jsx("div",{style:{display:"flex",gap:"5px",marginBottom:"10px",justifyContent:"center"},children:[t(1),t(10),t(100),t(500),t(1e3),t(-1)].map(m=>e.jsx("button",{onClick:()=>s(m),style:{padding:"5px 10px",border:"1px solid var(--accent-color)",background:d.equals(m)?"var(--accent-color)":"var(--panel-bg)",color:d.equals(m)?"var(--text-on-accent)":"var(--text-color)",cursor:"pointer",fontWeight:"bold",fontSize:"0.8rem"},children:m.equals(t(-1))?r("store.max",n.interface.language):`${m.toString()}`},`amount-${m.toString()}`))}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center"},children:[r("store.holdCtrl",n.interface.language),": x10 ‚Ä¢ ",r("store.holdShift",n.interface.language),": x100"]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",justifyContent:"center"},children:[e.jsxs("button",{className:"btn",style:{background:h?"var(--panel-bg)":"var(--accent-color)",color:h?"var(--text-color)":"var(--text-on-accent)",border:"1px solid var(--accent-color)",padding:"5px 15px",fontSize:"0.8rem"},onClick:()=>u(!1),children:["üõí ",r("store.buy",n.interface.language)," ",r("store.mode",n.interface.language)]}),e.jsxs("button",{className:"btn",style:{background:h?"#e65100":"var(--panel-bg)",color:h?"var(--text-on-accent)":"var(--text-color)",border:"1px solid #e65100",padding:"5px 15px",fontSize:"0.8rem"},onClick:()=>u(!0),children:["üí∞ ",r("store.sell",n.interface.language)," ",r("store.mode",n.interface.language)," (25%)"]})]}),e.jsx("h3",{style:{fontSize:"1rem",color:"var(--text-secondary)",fontWeight:"bold",borderBottom:"1px solid var(--border-color)",paddingBottom:"5px"},children:r("actionBar.buildings",n.interface.language)}),fe.map((m,z)=>{const j=n.buildings[m.id]||t(0),W=n.totalGold.gte(m.baseCost)||j.gt(t(0));if(W||L++,!W&&L>2)return null;if(h){if(j.eq(t(0)))return null;let O;d.equals(t(-1))?O=j:(O=d.times(k),O.gt(j)&&(O=j));const K=ye(m.baseCost,j.minus(O),O).times(t(.25)).floor();return C(m.id,m.baseProduction),e.jsxs("div",{style:on(!0,!1,!1,!1),onClick:()=>c(m.id,O.toNumber()),onMouseEnter:ee=>E(ee,m),onMouseLeave:R,children:[e.jsx("div",{style:{fontSize:"2rem",marginRight:"15px",width:"40px",textAlign:"center"},children:m.icon}),e.jsx("div",{style:{flex:1},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"var(--text-color)"},children:He(m.id,n.interface.language)}),e.jsx("span",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"var(--accent-color)"},children:w(j,n.numberFormat)})]})}),e.jsxs("div",{style:{marginLeft:"12px",minWidth:"70px",textAlign:"right"},children:[e.jsxs("div",{style:{color:"var(--accent-color)",fontWeight:"bold"},children:["+",w(K,n.numberFormat)]}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:[r("store.for",n.interface.language)," ",w(O,n.numberFormat)]})]})]},m.id)}let b=t(0),B=t(0);d.equals(t(-1))?(b=Xe(m.baseCost,j,n.gold.div(x)),b.eq(t(0))?(b=t(1),B=Bn(m.baseCost,j).times(x).floor()):B=ye(m.baseCost,j,b).times(x).floor()):(b=d,B=ye(m.baseCost,j,b).times(x).floor());const I=n.gold.gte(B),U=d.equals(t(-1))&&Xe(m.baseCost,j,n.gold.div(x)).eq(t(0));let M=b,F=B,G=I;return d.equals(t(-1))||(M=b.times(k),F=ye(m.baseCost,j,M).times(x).floor(),G=n.gold.gte(F)),e.jsxs("div",{style:on(G&&!U,!1,!W),onClick:()=>{if(!(G&&!U))return;const O=d.equals(t(-1))?b:M;o(m.id,O.toNumber())},onMouseEnter:O=>E(O,m),onMouseLeave:R,children:[e.jsx("div",{style:{fontSize:"2rem",marginRight:"15px",width:"40px",textAlign:"center"},children:W?m.icon:"‚ùì"}),e.jsx("div",{style:{flex:1},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"var(--text-color)"},children:W?He(m.id,n.interface.language):"???"}),e.jsx("span",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"var(--accent-color)"},children:w(j,n.numberFormat)})]})}),e.jsxs("div",{style:{marginLeft:"12px",minWidth:"70px",textAlign:"right"},children:[e.jsx("div",{style:{color:G&&!U?"var(--gold-color)":"var(--text-secondary)",fontWeight:"bold"},children:w(d.equals(t(-1))?B:F,n.numberFormat)}),!d.equals(t(-1))&&e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:[r("store.for",n.interface.language)," ",w(M,n.numberFormat)]})]})]},m.id)}),e.jsx(Dn,{gameState:n,building:i.building,x:i.x,y:i.y,visible:i.visible,onHide:R})]})},ln=({gameState:n,onTrainSoldier:o,onTrainElite:c})=>{const[s,i]=y.useState(1);y.useEffect(()=>{const x=h=>{h.ctrlKey&&!h.shiftKey?i(10):h.shiftKey&&!h.ctrlKey?i(100):h.ctrlKey&&h.shiftKey&&i(1e3)},d=()=>i(1);return window.addEventListener("keydown",x),window.addEventListener("keyup",d),()=>{window.removeEventListener("keydown",x),window.removeEventListener("keyup",d)}},[]);const l=x=>Je(_e.times(t(x)),n.renown);return e.jsxs("div",{style:wn,children:[e.jsxs("div",{style:{padding:"15px",background:"var(--panel-bg)",borderRadius:"4px",marginBottom:"10px",border:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"5px",color:"var(--text-color)"},children:r("game.soldiers",n.interface.language)}),e.jsx("div",{style:{fontSize:"2rem",color:"var(--text-color)"},children:w(n.soldiers,n.numberFormat)}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:r("game.laborers",n.interface.language)})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"20px"},children:[e.jsxs("button",{className:"btn",disabled:n.gold.lt(l(1*s)),onClick:()=>{o(1*s)},"data-tooltip":`${r("units.hireLaborer",n.interface.language)} 1 ${r("game.laborers",n.interface.language)} - ${r("buildings.cost",n.interface.language)}: ${w(l(1*s),n.numberFormat)} ${r("game.gold",n.interface.language)}`,children:[r("store.hire",n.interface.language)," ",s>1?`${1*s}`:"1"," (",w(l(1*s),n.numberFormat)," ",r("game.gold",n.interface.language).charAt(0),")"]}),e.jsxs("button",{className:"btn",disabled:n.gold.lt(l(10*s)),onClick:()=>{o(10*s)},"data-tooltip":`${r("units.hireLaborer",n.interface.language)} 10 ${r("game.laborers",n.interface.language)} - ${r("buildings.cost",n.interface.language)}: ${w(l(10*s),n.numberFormat)} ${r("game.gold",n.interface.language)}`,children:[r("store.hire",n.interface.language)," ",s>1?`${10*s}`:"10"," (",w(l(10*s),n.numberFormat)," ",r("game.gold",n.interface.language).charAt(0),")"]}),e.jsxs("button",{className:"btn",disabled:n.gold.lt(l(100*s)),onClick:()=>{o(100*s)},"data-tooltip":`${r("units.hireLaborer",n.interface.language)} 100 ${r("game.laborers",n.interface.language)} - ${r("buildings.cost",n.interface.language)}: ${w(l(100*s),n.numberFormat)} ${r("game.gold",n.interface.language)}`,children:[r("store.hire",n.interface.language)," ",s>1?`${100*s}`:"100"," (",w(l(100*s),n.numberFormat)," ",r("game.gold",n.interface.language).charAt(0),")"]}),e.jsxs("button",{className:"btn",disabled:n.gold.lt(l(1e3*s)),onClick:()=>{o(1e3*s)},"data-tooltip":`${r("units.hireLaborer",n.interface.language)} 1K ${r("game.laborers",n.interface.language)} - ${r("buildings.cost",n.interface.language)}: ${w(l(1e3*s),n.numberFormat)} ${r("game.gold",n.interface.language)}`,children:[r("store.hire",n.interface.language)," ",s>1?`${1e3*s/1e3}K`:"1K"," (",w(l(1e3*s),n.numberFormat)," ",r("game.gold",n.interface.language).charAt(0),")"]}),e.jsxs("button",{className:"btn",disabled:n.gold.lt(l(1e6*s)),onClick:()=>{o(1e6*s)},"data-tooltip":`${r("units.hireLaborer",n.interface.language)} 1M ${r("game.laborers",n.interface.language)} - ${r("buildings.cost",n.interface.language)}: ${w(l(1e6*s),n.numberFormat)} ${r("game.gold",n.interface.language)}`,children:[r("store.hire",n.interface.language)," ",s>1?`${1e5*s/1e6}M`:"1M"," (",w(l(1e6*s),n.numberFormat)," G)"]})]}),e.jsxs("div",{style:{borderTop:"2px solid var(--border-color)",paddingTop:"15px"},children:[e.jsxs("h3",{style:{fontSize:"1rem",color:"var(--accent-color)",fontWeight:"bold",marginBottom:"10px"},children:[r("units.specialistGuild",n.interface.language)," ",e.jsxs("span",{style:{fontSize:"0.8rem",fontWeight:"normal",color:"var(--text-secondary)"},children:["(",r("units.trainFromLaborers",n.interface.language),")"]})]}),dn.map(x=>{const d=n.eliteUnits[x.id]||t(0),u={carpenter:"blacksmith",mason:"castle",architect:"palace"}[x.id],k=u?n.buildings[u]||t(0):t(0),g=Je(x.goldCost,n.renown),E=n.soldiers.gte(x.soldierCost),R=n.gold.gte(g)&&E;return!u||k.lt(t(1))?null:e.jsxs("div",{style:{marginBottom:"10px",padding:"10px",background:"var(--panel-bg)",border:"1px solid var(--border-color)",borderRadius:"4px",display:"flex",alignItems:"center",gap:"10px"},"data-tooltip":"",children:[e.jsx("div",{style:{fontSize:"2rem"},children:x.icon}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontWeight:"bold",color:"var(--text-color)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{children:[Pn(x.id,n.interface.language)," ",e.jsxs("span",{style:{color:"var(--text-secondary)"},children:["x",w(d,n.numberFormat)]})]}),e.jsxs("button",{className:"btn",style:{padding:"5px 10px",fontSize:"0.8rem"},disabled:!R,onClick:()=>c(x.id,s),onMouseEnter:C=>{R||(C.currentTarget.style.cursor="not-allowed")},onMouseLeave:C=>{C.currentTarget.style.cursor="pointer"},"data-tooltip":"",children:[r("store.hire",n.interface.language)," ",r("store.train",n.interface.language)," ",s>1?`x${s}`:""]})]}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginTop:"4px"},children:Fn(x.id,n.interface.language)}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginTop:"2px"},children:[r("store.requires",n.interface.language)," ",w(g,n.numberFormat)," ",r("game.gold",n.interface.language)," ",r("buildings.and",n.interface.language)," ",w(x.soldierCost,n.numberFormat)," ",r("game.laborers",n.interface.language)]})]})]},x.id)})]})]})},_n=Se.memo(({renown:n,totalRenownEarned:o,numberFormat:c,language:s})=>{const i=de(o).minus(t(1)).times(t(100)).floor().toString();return e.jsxs("div",{style:{padding:"5px 15px",background:"rgba(103, 58, 183, 0.1)",border:"1px solid rgba(103, 58, 183, 0.3)",borderRadius:"20px",display:"inline-block"},children:[e.jsxs("div",{style:{color:"#673ab7",fontWeight:"bold",fontSize:"1rem"},children:["üëë ",r("game.renown",s),": ",w(n,c)]}),e.jsxs("div",{style:{color:"#673ab7",fontWeight:"bold",fontSize:"1rem"},children:["üëë ",r("game.totalRenown",s),": ",w(o,c)," (+",i,"% Bonus)"]})]})}),an=Se.memo(({gameState:n,gps:o,onClick:c,onEventInteract:s,onOpenTavern:i,onOpenPrestige:l,onOpenSettings:x,onOpenStatistics:d,onOpenLeaderboard:h,onOpenEmpire:u,isIdle:k})=>{var B,I,U;const[g,E]=y.useState([]),R=y.useRef(null),C=n.interface||{showFloatingText:!0,showWeatherWidget:!0,crownAnimations:!0},L=()=>{let M=0;return n.nationalProjects&&Object.values(n.nationalProjects).forEach(F=>{M+=F.level*Fe}),t(M)},T=M=>{var F;if(C.showFloatingText){const G=(F=R.current)==null?void 0:F.getBoundingClientRect();if(G){const O=M.clientX-G.left+(Math.random()*40-20),K=M.clientY-G.top+(Math.random()*40-20),ee=de(n.renown),ne=t(1),X=n.clickUpgradeLevel||0,te=Math.min(X,15),Z=t(2).pow(te),oe=ne.times(Z),ue=We(X),ge=o.times(ue);let ie=oe.plus(ge);if(ie=ie.times(ee),n.godMode){const re=o.times(t(99999));ie=ie.plus(re)}const q="+"+w(ie,n.numberFormat),ae={id:Date.now(),x:O,y:K,val:q};E(re=>[...re,ae]),setTimeout(()=>{E(re=>re.filter(ce=>ce.id!==ae.id))},1e3)}}c(M)},m=un[((B=n.weather)==null?void 0:B.current)||"clear"],z={transition:"transform 0.8s ease-in-out, width 0.8s ease-in-out, height 0.8s ease-in-out, margin 0.8s ease-in-out, position 0.8s ease-in-out"},j=k?{position:"fixed",bottom:"120px",right:"30px",transform:"scale(0.8)",transformOrigin:"bottom right",textAlign:"right",zIndex:100,...z}:{transform:"scale(1)",marginBottom:"3rem",zIndex:10,textAlign:"center",...z},W=k?{width:"80px",height:"80px",fontSize:"2rem",position:"fixed",bottom:"30px",right:"30px",borderRadius:"50%",zIndex:100,...z}:{width:"260px",height:"260px",fontSize:"6rem",borderRadius:"50%",position:"relative",zIndex:5,margin:"0 auto",...z},b={opacity:k?0:1,transition:"opacity 0.5s ease-in-out",pointerEvents:k?"none":"auto"};return e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative",padding:"var(--panel-padding)",height:"100%",overflow:"hidden"},children:[C.showWeatherWidget&&e.jsxs("div",{style:{position:"absolute",top:"10px",left:"10px",zIndex:20,background:m.color,padding:"8px 12px",borderRadius:"20px",border:"2px solid rgba(0,0,0,0.1)",boxShadow:"2px 2px 5px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:"8px",cursor:"help",...b},"data-tooltip":`${m.name}: ${m.description}`,children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:m.icon}),e.jsxs("div",{style:{textAlign:"left",lineHeight:"1.1"},children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem",color:"#222"},children:m.name}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"#444"},children:[t(Number(((I=n.weather)==null?void 0:I.timeLeft)||0)).ceil().toString(),"s remaining"]})]})]}),e.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",zIndex:20,display:"flex",gap:"5px",...b},children:[e.jsx("button",{onClick:h,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.8,color:"var(--text-color)",transition:"all 0.2s ease"},title:r("actionBar.achievements",n.interface.language),children:"üèÜ"}),e.jsx("button",{onClick:d,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.7,color:"var(--text-color)"},title:r("actionBar.statistics",n.interface.language),children:"üìä"}),e.jsx("button",{onClick:x,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.7,color:"var(--text-color)"},title:r("actionBar.settings",n.interface.language),children:"‚öôÔ∏è"})]}),e.jsxs("div",{style:j,children:[e.jsx("div",{style:{fontSize:"1rem",color:k?"var(--text-color)":"var(--text-secondary)",marginBottom:"5px",textTransform:"uppercase",letterSpacing:"2px",textShadow:k?"1px 1px 2px #000":"none"},children:r("game.gold",n.interface.language)}),e.jsx("div",{style:{fontSize:"3rem",fontFamily:"var(--font-main)",color:"var(--text-color)",textShadow:k?"2px 2px 4px #000":"2px 2px 0px rgba(255, 215, 0, 0.4)"},children:w(n.gold,n.numberFormat)}),e.jsxs("div",{style:{marginTop:"5px",fontSize:"1.1rem",color:k?"#90ee90":"var(--success-color)",fontStyle:"italic",textShadow:k?"1px 1px 2px #000":"none"},children:["+",w(o,n.numberFormat)," ",r("game.gold",n.interface.language).toLowerCase()," / sec"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"10px",marginTop:"15px"},children:[e.jsx(_n,{renown:n.renown,totalRenownEarned:n.totalRenownEarned,numberFormat:n.numberFormat,language:n.interface.language}),e.jsx("div",{style:{padding:"5px 15px",background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"20px",display:"inline-block"},children:e.jsxs("span",{style:{color:"#4caf50",fontWeight:"bold"},children:["üèóÔ∏è Projects: +",L().times(t(100)).floor().toString(),"%"]})})]})]}),e.jsxs("div",{style:{position:"relative",marginBottom:k?0:"3rem",display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx("div",{className:"magnetic-container",children:e.jsx("button",{ref:R,className:`main-button ${k?"idle":""} ${C.crownAnimations?"":"no-animations"}`,style:{...W,display:"flex",alignItems:"center",justifyContent:"center",outline:"none",color:"#5d4037",cursor:"pointer",overflow:"hidden"},onClick:T,children:e.jsx("span",{className:C.crownAnimations?"crown-icon":"",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",lineHeight:1,marginTop:"-10px"},children:"üëë"})})}),!k&&g.map(M=>e.jsx("div",{className:"floating-text",style:{left:M.x,top:M.y},children:M.val},M.id))]}),e.jsxs("div",{style:{display:"flex",gap:"10px",zIndex:10,flexWrap:"wrap",justifyContent:"center",...b},children:[n.buildings.field&&n.buildings.field.gt(t(0))&&e.jsxs("button",{className:"btn",style:{background:"var(--accent-color)",borderColor:"var(--gold-color)"},onClick:u,children:["üèóÔ∏è ",r("actionBar.buildings",n.interface.language)]}),((U=n.buildings.tavern)==null?void 0:U.gt(t(0)))&&e.jsxs("button",{className:"btn",onClick:i,children:["üç∫ ",r("actionBar.tavern",n.interface.language)]}),(n.totalGold.gt(t(5e5))||n.renown.gt(t(0)))&&e.jsxs("button",{className:"btn",style:{background:"var(--accent-color)"},onClick:l,children:["üëë ",r("actionBar.prestige",n.interface.language)]})]}),!k&&n.event&&n.event.type==="dragon"&&e.jsx("div",{className:"dragon-event",onMouseDown:()=>{try{s(n.event)}catch(M){console.error("Error clicking dragon:",M)}},children:"üêâ"}),!k&&n.event&&n.event.type==="merchant"&&e.jsxs("div",{style:{position:"absolute",right:"20px",top:"100px",background:"#fff3e0",padding:"10px",border:"2px solid orange",zIndex:100,cursor:"pointer",animation:"pop 0.5s",borderRadius:"8px",boxShadow:"2px 2px 5px rgba(0,0,0,0.2)"},onClick:()=>s(n.event),children:[e.jsx("div",{style:{fontSize:"1.5rem",textAlign:"center"},children:"üë≥"}),e.jsx("div",{style:{fontWeight:"bold",color:"#000"},children:"Merchant"}),e.jsx("small",{style:{color:"#444"},children:"Click for gift"})]}),!k&&n.event&&n.event.type==="jester"&&e.jsxs("div",{style:{position:"absolute",left:"20px",top:"100px",background:"#fce4ec",padding:"10px",border:"2px solid pink",zIndex:100,cursor:"pointer",animation:"pop 0.5s",borderRadius:"8px",boxShadow:"2px 2px 5px rgba(0,0,0,0.2)"},onClick:()=>s(n.event),children:[e.jsx("div",{style:{fontSize:"1.5rem",textAlign:"center"},children:"ü§°"}),e.jsx("div",{style:{fontWeight:"bold",color:"#000"},children:"Jester"}),e.jsx("small",{style:{color:"#444"},children:"Risk it all?"})]})]})}),Ye=({currentBet:n,maxGold:o,onBetChange:c,numberFormat:s})=>{const[i,l]=y.useState(n===0?"":n.toString());y.useEffect(()=>{var k,g;n===0&&((k=document.activeElement)==null?void 0:k.tagName)!=="INPUT"?l(""):Math.abs(parseFloat(i)-n)>1e-4&&((g=document.activeElement)==null?void 0:g.tagName)!=="INPUT"&&l(n>1e9?n.toExponential(2).replace("+",""):n.toString())},[n]);const x=k=>{try{if(k.trim()===""){c(0),l("");return}let g=parseFloat(k);const E=k.toLowerCase().trim(),R={k:1e3,m:1e6,b:1e9,t:1e12,qa:1e15,qi:1e18,sx:1e21,sp:1e24,oc:1e27,no:1e30,dc:1e33,ud:1e36,dd:1e39,td:1e42,qd:1e45,qn:1e48};for(const L of Object.keys(R))if(E.endsWith(L)){const T=parseFloat(E.slice(0,-L.length));isNaN(T)||(g=T*R[L]);break}(isNaN(g)||g<0)&&(g=0);const C=o.toNumber();isFinite(C)&&g>C?g=C:!isFinite(C)&&t(g).gt(o)&&(g=Number.MAX_VALUE),c(g),g===0?l(""):g>=1e6?l(g.toExponential(2).replace("+","")):l(Math.floor(g).toString())}catch{l(n===0?"":n.toString())}},d=()=>{x(i)},h=k=>{k.key==="Enter"&&(x(i),k.target.blur())},u=k=>{let E=o.times(k).floor().toNumber();isFinite(E)||(E=Number.MAX_VALUE),E<1&&o.gt(0)&&(E=1),c(E),E>=1e6?l(E.toExponential(2).replace("+","")):l(E.toString())};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",width:"100%"},children:[e.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{position:"absolute",left:"10px",pointerEvents:"none",fontSize:"1.2rem"},children:"üí∞"}),e.jsx("input",{type:"text",value:i,onChange:k=>l(k.target.value),onBlur:d,onKeyDown:h,style:{width:"100%",padding:"10px 30px 10px 35px",fontSize:"1.1rem",border:"2px solid var(--border-color)",borderRadius:"4px",fontFamily:"monospace",background:"#fff",color:"#000",outline:"none",fontWeight:"bold"},placeholder:"Wager (100, 1k, 2.5m, 1b, 2e13)..."}),n>0&&e.jsx("button",{onClick:()=>{c(0),l("")},style:{position:"absolute",right:"5px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",color:"#999",fontSize:"1.2rem",cursor:"pointer",padding:"0 5px"},title:"Clear",children:"‚úï"})]}),e.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"space-between"},children:[e.jsx("button",{className:"btn",style:{padding:"4px 8px",fontSize:"0.7rem",flex:1,background:"rgba(0,0,0,0.1)",color:"var(--text-color)",border:"1px solid var(--border-color)"},onClick:()=>u(.1),children:"10%"}),e.jsx("button",{className:"btn",style:{padding:"4px 8px",fontSize:"0.7rem",flex:1,background:"rgba(0,0,0,0.1)",color:"var(--text-color)",border:"1px solid var(--border-color)"},onClick:()=>u(.5),children:"50%"}),e.jsx("button",{className:"btn",style:{padding:"4px 8px",fontSize:"0.7rem",flex:1,background:"var(--gold-color)",color:"#000",border:"1px solid #b8860b"},onClick:()=>u(1),children:"MAX"}),e.jsx("div",{style:{width:"4px"}}),e.jsx("button",{className:"btn",style:{padding:"4px 8px",fontSize:"0.7rem",flex:1,background:"rgba(0,0,0,0.1)",color:"var(--text-color)",border:"1px solid var(--border-color)"},onClick:()=>x(Math.floor(n/2).toString()),children:"¬Ω"}),e.jsx("button",{className:"btn",style:{padding:"4px 8px",fontSize:"0.7rem",flex:1,background:"rgba(0,0,0,0.1)",color:"var(--text-color)",border:"1px solid var(--border-color)"},onClick:()=>x((n*2).toString()),children:"x2"})]})]})},$n=["Shadowfax","Roach","Bucephalus","Pegasus","Sleipnir","Epona","Agro","Artax","Rapidash","Spirit","Bullseye","Maximus","Khan","Buckbeak","Chestnut","Midnight","Storm","Blaze","Comet","Dakota"],On=["#d32f2f","#1976d2","#388e3c","#fbc02d","#8e24aa","#ef6c00"],Un=50,Hn=({gameState:n,onGamble:o,onLeave:c})=>{const[s,i]=y.useState([]),[l,x]=y.useState(null),[d,h]=y.useState(0),[u,k]=y.useState("betting"),[g,E]=y.useState(""),[R,C]=y.useState(null),L=y.useRef(null),T=y.useRef([]);y.useEffect(()=>{m()},[]);const m=()=>{const b=[],B=[...$n].sort(()=>.5-Math.random());for(let I=0;I<6;I++){const U=Math.random()*5+5,M=Math.random()*5+5;let G=25-(U+M);G=G+(Math.random()*4-2),G<1.5&&(G=1.5),G>20&&(G=20),b.push({id:I,name:B[I],color:On[I],icon:"üêé",odds:parseFloat(G.toFixed(1)),progress:0,finished:!1,rank:0,speedRating:U,staminaRating:M})}i(b),x(null),C(null),T.current=[],E("Select a horse and place your bet!")},z=()=>{if(l===null){E("Select a horse first!");return}if(d<=0){E(r("error.placeValidBet",n.interface.language));return}if(n.gold.lt(t(d))){E(r("error.notEnoughGold",n.interface.language));return}k("racing"),E(r("horseRacing.andTheyreOff",n.interface.language));let b=0;const B=400;L.current=setInterval(()=>{b++,i(I=>I.map(M=>{if(M.finished)return M;const F=Math.random()<.05?1:0,G=Math.random()<.05?-.5:0,O=.15,K=M.speedRating/10*.15,ee=Math.random()*.2;let ne=O+K+ee+F+G,X=M.progress+ne;return X>=100&&(X=100,!T.current.includes(M.id))?(T.current.push(M.id),{...M,progress:100,finished:!0,rank:T.current.length}):{...M,progress:X}}).slice(0,6)),(T.current.length===6||b>=B)&&(T.current.length<6&&i(I=>(I.filter(M=>!M.finished).sort((M,F)=>F.progress-M.progress).forEach(M=>{T.current.includes(M.id)||T.current.push(M.id)}),I.map(M=>{const F=T.current.indexOf(M.id);return F!==-1?{...M,rank:F+1,finished:!0,progress:100}:M}))),j())},Un)},j=()=>{L.current&&clearInterval(L.current);const b=s.map(M=>{const F=T.current.indexOf(M.id);return F!==-1?{...M,rank:F+1,finished:!0}:M});i(b);const B=T.current[0],I=b.find(M=>M.id===B);if(!I)return;if(k("finished"),B===l){const M=b.find(O=>O.id===l),F=(M==null?void 0:M.odds)||1,G=Math.max(1,Math.floor(d*(F-1)));o(G,!0),C({won:!0,amount:G,winnerName:I.name})}else o(d,!1),C({won:!1,amount:d,winnerName:I.name})};y.useEffect(()=>()=>{L.current&&clearInterval(L.current)},[]);const W=()=>{k("betting"),h(0),m()};return R&&(R.won,R.won,R.won,R.won,R.won?r("horseRacing.winner",n.interface.language):r("horseRacing.betterLuckNextTime",n.interface.language),r("horseRacing.winnerIs",n.interface.language),R.winnerName,R.won?(e.Fragment,r("horseRacing.youWon",n.interface.language),w(t(R.amount),n.numberFormat),r("horseRacing.gold",n.interface.language)):(e.Fragment,r("horseRacing.youLost",n.interface.language),w(t(R.amount),n.numberFormat),r("horseRacing.gold",n.interface.language))),e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"5px",textAlign:"center",background:"#e0cda9",borderBottom:"1px solid #5d4037",color:"#5d4037",fontWeight:"bold"},children:g}),e.jsxs("div",{style:{flex:1,background:"#e0cda9",padding:"10px 0",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",right:"40px",top:0,bottom:0,width:"10px",background:"repeating-linear-gradient(45deg, #000, #000 10px, #fff 10px, #fff 20px)",zIndex:0,borderLeft:"2px solid rgba(0,0,0,0.2)",borderRight:"2px solid rgba(0,0,0,0.2)",height:"100%"}}),s.map(b=>e.jsxs("div",{onClick:()=>u==="betting"&&x(b.id),style:{position:"relative",flex:1,minHeight:"30px",borderBottom:"1px dashed rgba(93, 64, 55, 0.3)",display:"flex",alignItems:"center",cursor:u==="betting"?"pointer":"default",background:l===b.id?"rgba(255, 215, 0, 0.3)":"rgba(255,255,255,0.1)",transition:"background 0.2s"},children:[e.jsxs("div",{style:{width:"100px",padding:"0 10px",borderRight:"1px solid var(--border-color)",display:"flex",flexDirection:"column",justifyContent:"center",zIndex:2,background:"var(--panel-bg)",height:"100%"},children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.8rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"var(--text-color)"},children:b.name}),e.jsxs("div",{style:{fontSize:"0.9rem",color:l===b.id?"var(--accent-color)":"var(--text-secondary)",fontWeight:"bold"},children:[b.odds.toFixed(1),"x"]})]}),e.jsx("div",{style:{position:"absolute",left:`calc(100px + ${b.progress}% - ${b.progress*.8}px)`,transition:u==="racing"?"left 0.05s linear":"left 0.3s ease",fontSize:"2rem",zIndex:1,transform:"scaleX(-1) translateY(-5px)",filter:l===b.id?"drop-shadow(0 0 5px gold)":"drop-shadow(0 2px 2px rgba(0,0,0,0.3))",color:b.color},children:e.jsx("div",{style:{fontSize:"2rem"},children:b.icon})}),b.finished&&e.jsx("div",{style:{position:"absolute",right:"10px",fontWeight:"bold",fontSize:"1.2rem",zIndex:5,color:"#000",textShadow:"0 0 2px rgba(0,0,0,0.3)"},children:b.rank===1?"ü•á":b.rank===2?"ü•à":b.rank===3?"ü•â":b.rank?`#${b.rank}`:"?"})]},b.id))]}),e.jsxs("div",{style:{padding:"15px 20px",background:"var(--panel-bg)",borderTop:"2px solid var(--border-color)",flexShrink:0,display:"flex",flexDirection:"row",gap:"15px",alignItems:"flex-end"},children:[e.jsx("div",{style:{flex:1},children:e.jsx(Ye,{currentBet:d,maxGold:n.gold,onBetChange:h,numberFormat:n.numberFormat})}),e.jsxs("div",{style:{flexShrink:0},children:[u==="betting"&&e.jsx("button",{className:"btn",onClick:z,disabled:l===null||d<=0,style:{opacity:l===null||d<=0?.5:1,fontSize:"1.2rem",padding:"0 30px",height:"60px",background:"var(--accent-color)",boxShadow:"0 4px 0 rgba(0,0,0,0.2)",fontWeight:"bold"},children:r("horseRacing.start",n.interface.language)}),u==="finished"&&e.jsx("button",{className:"btn",onClick:W,style:{fontSize:"1.2rem",padding:"0 30px",height:"60px",background:"var(--accent-color)",boxShadow:"0 4px 0 rgba(0,0,0,0.2)",fontWeight:"bold"},children:r("horseRacing.raceAgain",n.interface.language)}),u==="racing"&&e.jsx("div",{style:{width:"100%",height:"60px"}})]})]}),e.jsxs("div",{style:{padding:"10px 20px",background:"var(--panel-bg)",borderTop:"1px solid var(--border-color)",textAlign:"center",fontSize:"1rem",fontWeight:"bold"},children:[e.jsx("span",{style:{marginRight:"10px",color:"var(--text-secondary)"},children:"Result:"}),R?e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{marginRight:"10px"},children:R.won?"üèá":"üê¢"}),e.jsx("span",{style:{color:R.won?"#4caf50":"#f44336",marginRight:"10px"},children:R.won?"Winner!":"Better luck next time"}),e.jsxs("span",{style:{color:"var(--accent-color)",marginRight:"10px"},children:["Winner: ",R.winnerName]}),e.jsxs("span",{style:{color:R.won?"gold":"#ef5350"},children:[R.won?"+":"-",w(t(R.amount),n.numberFormat)," Gold"]})]}):e.jsx("span",{style:{color:"var(--text-secondary)",fontStyle:"italic"},children:"No results yet"})]})]})},Sn=({gameState:n,onGamble:o,onLeave:c})=>{const[s,i]=y.useState(0),[l,x]=y.useState(null),[d,h]=y.useState(!1),[u,k]=y.useState(0),[g,E]=y.useState(null),[R,C]=y.useState("Select a side and place your wager.");g&&(g.won,g.won,g.won,g.won,g.won?r("coinFlip.victory",n.interface.language):r("coinFlip.defeat",n.interface.language),r("coinFlip.result",n.interface.language),g.side,g.won?(e.Fragment,r("coinFlip.victory",n.interface.language),w(t(g.amount),n.numberFormat),r("game.gold",n.interface.language)):(e.Fragment,r("coinFlip.defeat",n.interface.language),w(t(g.amount),n.numberFormat),r("game.gold",n.interface.language)));const L=()=>{if(!l){C(r("error.selectHeadsOrTails",n.interface.language));return}if(s<=0){C(r("error.enterValidBet",n.interface.language));return}if(n.gold.lt(t(s))){C(r("error.notEnoughGold",n.interface.language));return}h(!0),C("");const m=Math.random()>.5?"heads":"tails",z=l===m,j=u,b=360*5;let B=j+b;const I=B%360;m==="heads"?B+=360-I:B+=180-I+360,k(B),setTimeout(()=>{h(!1),z?(o(s,!0),C("Victory!")):(o(s,!1),C("Defeat!")),setTimeout(()=>{E({won:z,amount:s,side:m})},500)},3e3)};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[e.jsx("style",{children:`
            .coin-container {
                perspective: 1000px;
                width: 180px;
                height: 180px;
                margin: 0 auto;
            }
            .coin {
                width: 100%;
                height: 100%;
                position: relative;
                transform-style: preserve-3d;
                transition: transform 3s cubic-bezier(0.1, 0.7, 0.1, 1);
            }
            .coin-face {
                position: absolute;
                width: 100%;
                height: 100%;
                backface-visibility: hidden;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 5rem;
                box-shadow: inset 0 0 30px rgba(0,0,0,0.5), 0 10px 20px rgba(0,0,0,0.3);
                border: 10px solid #b8860b;
            }
            .coin-front {
                background: radial-gradient(#ffd700, #daa520);
                color: #5d4037;
                transform: rotateY(0deg);
            }
            .coin-back {
                background: radial-gradient(#e6c200, #b8860b);
                color: #5d4037;
                transform: rotateY(180deg);
            }
            .coin-text {
                font-family: 'Cinzel', serif;
                font-weight: bold;
                text-shadow: 2px 2px 0 rgba(255,255,255,0.4);
            }
        `}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative",background:"var(--bg-color)",overflow:"hidden"},children:[e.jsx("div",{className:"coin-container",children:e.jsxs("div",{className:"coin",style:{transform:`rotateY(${u}deg)`},children:[e.jsx("div",{className:"coin-face coin-front",children:e.jsx("span",{className:"coin-text",children:"üëë"})}),e.jsx("div",{className:"coin-face coin-back",children:e.jsx("span",{className:"coin-text",children:"1"})})]})}),e.jsx("div",{style:{fontSize:"1.4rem",fontWeight:"bold",marginTop:"20px",minHeight:"30px",color:"var(--accent-color)",textAlign:"center",padding:"0 20px"},children:R}),e.jsxs("div",{style:{display:"flex",gap:"20px",marginTop:"20px"},children:[e.jsxs("button",{onClick:()=>x("heads"),disabled:d,style:{padding:"10px 20px",border:`3px solid ${l==="heads"?"var(--gold-color)":"transparent"}`,background:l==="heads"?"rgba(255, 215, 0, 0.2)":"var(--bg-color)",color:"var(--text-color)",borderRadius:"8px",cursor:d?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",flexDirection:"column",alignItems:"center",minWidth:"100px",transform:d?"none":"scale(1)",boxShadow:d?"none":"0 4px 8px rgba(0,0,0,0.15)",opacity:d?.6:1},onMouseEnter:T=>{!d&&l!=="heads"&&(T.currentTarget.style.transform="scale(1.1)",T.currentTarget.style.boxShadow="0 6px 12px rgba(0,0,0,0.3)",T.currentTarget.style.border="3px solid var(--accent-color)",T.currentTarget.style.background="rgba(33, 150, 243, 0.2)")},onMouseLeave:T=>{!d&&l!=="heads"&&(T.currentTarget.style.transform="scale(1)",T.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)",T.currentTarget.style.border="3px solid transparent",T.currentTarget.style.background="var(--bg-color)")},children:[e.jsx("div",{style:{fontSize:"1.5rem"},children:"üëë"}),e.jsx("div",{style:{fontWeight:"bold"},children:r("coinFlip.heads",n.interface.language)})]}),e.jsxs("button",{onClick:()=>x("tails"),disabled:d,style:{padding:"10px 20px",border:`3px solid ${l==="tails"?"var(--gold-color)":"transparent"}`,background:l==="tails"?"rgba(255, 215, 0, 0.2)":"var(--bg-color)",color:"var(--text-color)",borderRadius:"8px",cursor:d?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",flexDirection:"column",alignItems:"center",minWidth:"100px",transform:d?"none":"scale(1)",boxShadow:d?"none":"0 4px 8px rgba(0,0,0,0.15)",opacity:d?.6:1},onMouseEnter:T=>{!d&&l!=="tails"&&(T.currentTarget.style.transform="scale(1.1)",T.currentTarget.style.boxShadow="0 6px 12px rgba(0,0,0,0.3)",T.currentTarget.style.border="3px solid var(--accent-color)",T.currentTarget.style.background="rgba(33, 150, 243, 0.2)")},onMouseLeave:T=>{!d&&l!=="tails"&&(T.currentTarget.style.transform="scale(1)",T.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)",T.currentTarget.style.border="3px solid transparent",T.currentTarget.style.background="var(--bg-color)")},children:[e.jsx("div",{style:{fontSize:"1.5rem"},children:"1"}),e.jsx("div",{style:{fontWeight:"bold"},children:r("coinFlip.tails",n.interface.language)})]})]})]}),e.jsxs("div",{style:{padding:"15px 20px",background:"var(--panel-bg)",borderTop:"2px solid var(--border-color)",flexShrink:0,display:"flex",flexDirection:"row",gap:"15px",alignItems:"flex-end"},children:[e.jsx("div",{style:{flex:1},children:e.jsx(Ye,{currentBet:s,maxGold:n.gold,onBetChange:i,numberFormat:n.numberFormat})}),e.jsx("button",{className:"btn",onClick:L,disabled:!l||s<=0||d,style:{opacity:!l||s<=0||d?.5:1,fontSize:"1.2rem",padding:"0 30px",height:"60px",background:"var(--accent-color)",boxShadow:"0 4px 0 rgba(0,0,0,0.2)",flexShrink:0,fontWeight:"bold"},children:"FLIP"})]}),e.jsxs("div",{style:{padding:"10px 20px",background:"var(--panel-bg)",borderTop:"1px solid var(--border-color)",textAlign:"center",fontSize:"1rem",fontWeight:"bold"},children:[e.jsx("span",{style:{marginRight:"10px",color:"var(--text-secondary)"},children:"Result:"}),g?e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{marginRight:"10px"},children:g.won?"‚ú®":"üí∏"}),e.jsx("span",{style:{color:g.won?"#4caf50":"#f44336",marginRight:"10px"},children:g.won?"Victory!":"Defeat!"}),e.jsxs("span",{style:{color:"var(--accent-color)",marginRight:"10px"},children:["Result: ",g.side]}),e.jsxs("span",{style:{color:g.won?"gold":"#ef5350"},children:[g.won?"+":"-",w(t(g.amount),n.numberFormat)," Gold"]})]}):e.jsx("span",{style:{color:"var(--text-secondary)",fontStyle:"italic"},children:"No results yet"})]})]})},cn=({value:n,size:o=80,color:c="#3e2723"})=>{const s=o*.18,i=o*.25,l=o*.5,x=o*.75,d=[];return(n===1||n===3||n===5)&&d.push({cx:l,cy:l}),n>1&&(d.push({cx:i,cy:i}),d.push({cx:x,cy:x})),n>3&&(d.push({cx:x,cy:i}),d.push({cx:i,cy:x})),n===6&&(d.push({cx:i,cy:l}),d.push({cx:x,cy:l})),e.jsx("div",{style:{width:o,height:o,backgroundColor:"#fff",borderRadius:o*.15,boxShadow:"0 4px 8px rgba(0,0,0,0.2), inset 0 -4px 4px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #ccc"},children:e.jsx("svg",{width:o,height:o,viewBox:`0 0 ${o} ${o}`,children:d.map((h,u)=>e.jsx("circle",{cx:h.cx,cy:h.cy,r:s/2,fill:c},u))})})},Yn=({gameState:n,onGamble:o,onLeave:c})=>{const[s,i]=y.useState(0),[l,x]=y.useState(!1),[d,h]=y.useState([1,1]),[u,k]=y.useState(null),[g,E]=y.useState(r("diceGame.placeYourWager",n.interface.language)),R=()=>{if(s<=0){E(r("error.enterValidBet",n.interface.language));return}if(n.gold.lt(t(s))){E(r("error.notEnoughGold",n.interface.language));return}x(!0),E(r("error.rolling",n.interface.language)),k(null);let L=0;const T=10,m=setInterval(()=>{h([Math.floor(Math.random()*6)+1,Math.floor(Math.random()*6)+1]),L++,L>=T&&(clearInterval(m),C())},100)},C=()=>{const L=Math.floor(Math.random()*6)+1,T=Math.floor(Math.random()*6)+1,m=L+T;h([L,T]),x(!1);let z=0,j=!1,W="";if(m===2?(z=10,j=!0,W="Snake Eyes! JACKPOT (x10)!"):m>=3&&m<=6?(z=0,j=!1,W="Low roll... House wins."):m===7?(z=2,j=!0,W="Lucky Seven! (x2)"):m>=8&&m<=11?(z=1.5,j=!0,W="Good roll! (x1.5)"):m===12&&(z=5,j=!0,W="Boxcars! Huge Win (x5)!"),j){const b=Math.max(1,Math.floor(s*(z-1)));o(b,!0),E(W),k({won:!0,amount:b,sum:m})}else o(s,!1),E(W),k({won:!1,amount:s,sum:m})};return u&&(u.won,u.won,u.won,u.won,u.won?r("diceGame.youWon",n.interface.language):r("diceGame.youLost",n.interface.language),u.sum,u.won?(e.Fragment,w(t(u.amount),n.numberFormat)):(e.Fragment,w(t(u.amount),n.numberFormat))),e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",background:"var(--bg-color)",overflow:"hidden",padding:"10px"},children:[e.jsxs("div",{style:{background:"var(--panel-bg)",padding:"10px",borderRadius:"8px",fontSize:"0.8rem",border:"1px solid var(--border-color)",width:"100%",maxWidth:"400px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"2px"},children:[e.jsx("span",{style:{color:"var(--text-color)"},children:r("diceGame.snakeEyes",n.interface.language)}),e.jsx("span",{style:{color:"var(--gold-color)",fontWeight:"bold"},children:"x10"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"2px"},children:[e.jsx("span",{style:{color:"var(--text-color)"},children:r("diceGame.boxcars",n.interface.language)}),e.jsx("span",{style:{color:"var(--gold-color)",fontWeight:"bold"},children:"x5"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"2px"},children:[e.jsx("span",{style:{color:"var(--text-color)"},children:r("diceGame.sum7",n.interface.language)}),e.jsx("span",{style:{color:"var(--success-color)",fontWeight:"bold"},children:"x2"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-color)"},children:r("diceGame.sum8to11",n.interface.language)}),e.jsx("span",{style:{color:"var(--success-color)",fontWeight:"bold"},children:"x1.5"})]}),e.jsx("div",{style:{textAlign:"center",color:"var(--danger-color)",borderTop:"1px solid var(--border-color)",marginTop:"5px"},children:r("diceGame.houseWins",n.interface.language)})]}),e.jsxs("div",{style:{display:"flex",gap:"30px",transform:"scale(1.2)"},children:[e.jsx(cn,{value:d[0],size:100}),e.jsx(cn,{value:d[1],size:100})]}),e.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold",minHeight:"40px",color:"var(--accent-color)"},children:l?"":`${r("diceGame.sum",n.interface.language)}: ${d[0]+d[1]}`}),e.jsx("div",{style:{fontSize:"1rem",minHeight:"20px",color:"var(--text-color)"},children:g})]}),e.jsxs("div",{style:{padding:"15px 20px",background:"var(--panel-bg)",borderTop:"2px solid var(--border-color)",flexShrink:0,display:"flex",flexDirection:"row",gap:"15px",alignItems:"flex-end"},children:[e.jsx("div",{style:{flex:1},children:e.jsx(Ye,{currentBet:s,maxGold:n.gold,onBetChange:i,numberFormat:n.numberFormat})}),e.jsx("button",{className:"btn",onClick:R,disabled:s<=0||l,style:{fontSize:"1.2rem",padding:"0 30px",height:"60px",background:"var(--accent-color)",opacity:s<=0||l?.5:1,boxShadow:"0 4px 0 rgba(0,0,0,0.2)",flexShrink:0,fontWeight:"bold"},children:r("diceGame.roll",n.interface.language)})]}),e.jsxs("div",{style:{padding:"10px 20px",background:"var(--panel-bg)",borderTop:"1px solid var(--border-color)",textAlign:"center",fontSize:"1rem",fontWeight:"bold"},children:[e.jsxs("span",{style:{marginRight:"10px",color:"var(--text-secondary)"},children:[r("diceGame.result",n.interface.language),":"]}),u?e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{marginRight:"10px"},children:u.won?"üé≤":"üìâ"}),e.jsx("span",{style:{color:u.won?"#4caf50":"#f44336",marginRight:"10px"},children:u.won?r("diceGame.youWon",n.interface.language):r("diceGame.youLost",n.interface.language)}),e.jsxs("span",{style:{color:"var(--accent-color)",marginRight:"10px"},children:[r("diceGame.rolled",n.interface.language),": ",u.sum]}),e.jsxs("span",{style:{color:u.won?"gold":"#ef5350"},children:[u.won?"+":"-",w(t(u.amount),n.numberFormat)," Gold"]})]}):e.jsx("span",{style:{color:"var(--text-secondary)",fontStyle:"italic"},children:r("diceGame.noResultsYet",n.interface.language)})]})]})},qn=({gameState:n,onGamble:o,onClose:c})=>{const[s,i]=y.useState("racing");return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",style:{height:"95vh",maxWidth:"1000px",width:"98%",padding:"0",display:"flex",flexDirection:"column",overflow:"hidden",borderRadius:"12px",border:"4px double var(--border-color)"},children:[e.jsxs("div",{style:{padding:"10px 20px",borderBottom:"2px solid var(--border-color)",background:"var(--accent-color)",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h2",{style:{borderBottom:"none",margin:0,fontSize:"1.4rem",textShadow:"1px 1px 0 rgba(0,0,0,0.3)"},children:["üç∫ ",r("tavern.title",n.interface.language)]}),e.jsxs("div",{style:{fontSize:"0.9rem",background:"rgba(0,0,0,0.2)",padding:"4px 10px",borderRadius:"4px"},children:[r("game.gold",n.interface.language),": ",e.jsx("span",{style:{color:"var(--gold-color)",fontWeight:"bold"},children:w(n.gold,n.numberFormat)})]})]}),e.jsxs("div",{style:{display:"flex",background:"var(--bg-color)",borderBottom:"2px solid var(--border-color)",overflowX:"auto"},children:[e.jsx("button",{onClick:()=>i("racing"),style:{flex:1,minWidth:"90px",padding:"12px 10px",border:"none",background:s==="racing"?"var(--panel-bg)":"transparent",fontWeight:"bold",color:s==="racing"?"var(--accent-color)":"var(--text-secondary)",cursor:"pointer",borderBottom:s==="racing"?"3px solid var(--accent-color)":"3px solid transparent",transition:"all 0.2s"},children:r("tavern.racing",n.interface.language)}),e.jsx("button",{onClick:()=>i("coin"),style:{flex:1,minWidth:"90px",padding:"12px 10px",border:"none",background:s==="coin"?"var(--panel-bg)":"transparent",fontWeight:"bold",color:s==="coin"?"var(--accent-color)":"var(--text-secondary)",cursor:"pointer",borderBottom:s==="coin"?"3px solid var(--accent-color)":"3px solid transparent",transition:"all 0.2s"},children:r("tavern.coin",n.interface.language)}),e.jsx("button",{onClick:()=>i("dice"),style:{flex:1,minWidth:"90px",padding:"12px 10px",border:"none",background:s==="dice"?"var(--panel-bg)":"transparent",fontWeight:"bold",color:s==="dice"?"var(--accent-color)":"var(--text-secondary)",cursor:"pointer",borderBottom:s==="dice"?"3px solid var(--accent-color)":"3px solid transparent",transition:"all 0.2s"},children:r("tavern.dice",n.interface.language)})]}),e.jsxs("div",{style:{background:"var(--bg-color)",flex:1,overflow:"hidden",position:"relative",display:"flex",flexDirection:"column"},children:[s==="racing"&&e.jsx(Hn,{gameState:n,onGamble:(l,x)=>o(l,x),onLeave:c}),s==="coin"&&e.jsx(Sn,{gameState:n,onGamble:(l,x)=>o(l,x),onLeave:c}),s==="dice"&&e.jsx(Yn,{gameState:n,onGamble:(l,x)=>o(l,x),onLeave:c})]}),e.jsx("div",{style:{padding:"8px",borderTop:"2px solid var(--border-color)",background:"var(--panel-bg)",textAlign:"center",flexShrink:0},children:e.jsx("button",{className:"btn",onClick:c,style:{background:"#5d4037",padding:"8px 20px",fontSize:"0.9rem",width:"auto"},children:r("tavern.exit",n.interface.language)})})]})})},Vn=({gameState:n,onPrestige:o,onClose:c})=>{var m;const i=t(1e12),l=n.totalGold;let x=t(0),d=!1,h=i.minus(l);if(l.gte(i)){const z=l.dividedBy(i);x=t(Math.floor(Math.pow(z.toNumber(),.33))).times(1).minus(n.renown),x.lt(0)&&(x=t(0)),d=x.gt(0)}const u=n.renown.plus(x),k=i.times(Math.pow(Math.floor(u.dividedBy(1).toNumber()+1),1/.33)),g=k.minus(l),R=de(n.renown).minus(t(1)).times(t(100)),L=de(n.renown.plus(x)).minus(t(1)).times(t(100)),T=Object.values(n.nationalProjects||{}).some(z=>z==null?void 0:z.active);return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",style:{border:"4px solid #673ab7",maxHeight:"90vh",display:"flex",flexDirection:"column"},children:[e.jsx("h2",{style:{color:"#673ab7"},children:"üëë Abdication"}),e.jsx("p",{children:"Are you ready to pass the crown to your heir?"}),e.jsxs("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:[!((m=n.playerProfile)!=null&&m.hasChosenName)&&e.jsxs("div",{style:{background:"rgba(255, 235, 59, 0.1)",border:"1px solid #ffc107",padding:"10px",borderRadius:"4px",marginBottom:"15px",fontSize:"0.9rem"},children:["üí° ",e.jsxs("strong",{children:[r("prestige.tip",n.interface.language),":"]})," ",r("prestige.tipDescription",n.interface.language)]}),e.jsxs("div",{style:{textAlign:"left",margin:"20px 0",background:"rgba(243, 229, 245, 0.5)",padding:"15px",borderRadius:"4px"},children:[e.jsx("div",{children:e.jsxs("strong",{children:[r("prestige.youWillLose",n.interface.language),":"]})}),e.jsxs("ul",{children:[e.jsx("li",{children:r("prestige.loseGold",n.interface.language)}),e.jsx("li",{children:r("prestige.loseEstates",n.interface.language)}),e.jsx("li",{children:r("prestige.loseWorkforce",n.interface.language)}),e.jsx("li",{children:r("prestige.loseScepterLevels",n.interface.language)}),e.jsxs("li",{children:[e.jsx("strong",{children:r("prestige.loseUnfinishedProjects",n.interface.language)})," (",r("prestige.loseUnfinishedProjectsDescription",n.interface.language),")"]})]}),e.jsx("div",{children:e.jsxs("strong",{children:[r("prestige.youWillKeep",n.interface.language),":"]})}),e.jsxs("ul",{children:[e.jsx("li",{children:r("prestige.keep.achievements",n.interface.language)}),e.jsxs("li",{children:[r("prestige.keep.currentRenown",n.interface.language)," (",w(n.renown,n.numberFormat),")"]}),e.jsx("li",{children:r("prestige.keep.projectLevels",n.interface.language)}),e.jsx("li",{children:r("prestige.keep.stats",n.interface.language)})]})]}),T&&e.jsxs("div",{style:{marginBottom:"20px",padding:"10px",background:"rgba(255, 0, 0, 0.1)",border:"1px solid red",borderRadius:"4px",color:"#d32f2f",fontSize:"0.9rem",fontWeight:"bold",textAlign:"center"},children:["‚ö†Ô∏è ",r("prestige.activeProjectsWarning",n.interface.language),r("prestige.activeProjectsDescription",n.interface.language)]}),e.jsxs("div",{style:{fontSize:"1.2rem",marginBottom:"20px"},children:[e.jsxs("div",{style:{marginBottom:"5px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:[r("prestige.currentRenown",n.interface.language),": ",w(n.renown,n.numberFormat)]}),e.jsxs("div",{style:{marginBottom:"5px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:[r("prestige.totalGoldEarned",n.interface.language),": ",w(l,n.numberFormat)]}),e.jsx("hr",{style:{margin:"15px 0",borderTop:"1px dashed #ccc",borderBottom:"none"}}),e.jsxs("div",{style:{marginBottom:"5px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:[e.jsxs("strong",{children:[r("prestige.currentBonus",n.interface.language),":"]})," +",R.toNumber().toFixed(1),"%"]}),e.jsxs("div",{style:{marginBottom:"5px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:[e.jsxs("strong",{children:[r("prestige.renownGain",n.interface.language),":"]})," ",w(x,n.numberFormat)]}),e.jsxs("div",{style:{marginBottom:"5px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:[e.jsxs("strong",{children:[r("prestige.totalAfter",n.interface.language),":"]})," ",w(n.renown.plus(x),n.numberFormat)," (+",L.toNumber().toFixed(1),"% ",r("prestige.bonus",n.interface.language),")"]}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"10px",background:"rgba(0,0,0,0.05)",padding:"5px",borderRadius:"4px"},children:[e.jsxs("div",{children:["Next Renown at: ",e.jsx("strong",{children:w(k,n.numberFormat)})," Lifetime Gold"]}),e.jsxs("div",{style:{color:g.gt(0)?"#cc0000":"var(--success-color)",fontWeight:"bold"},children:["(Need ",w(g.gt(0)?g:t(0),n.numberFormat)," more)"]})]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"20px"},children:[e.jsx("button",{className:"btn",style:{background:"#666"},onClick:c,children:r("common.cancel",n.interface.language)}),e.jsx("button",{className:"btn",style:{background:"#673ab7"},onClick:o,disabled:!d,children:d?r("prestige.abdicate",n.interface.language):l.lt(i)?`${r("prestige.need",n.interface.language)} ${w(h,n.numberFormat)} ${r("prestige.moreGold",n.interface.language)}`:r("prestige.unavailable",n.interface.language)})]})]})})},Kn=({gameState:n,onClose:o,onHardReset:c,onSave:s,onSetTheme:i,onSetNumberFormat:l,onToggleIdleMode:x,onUpdateInterface:d,onSetLanguage:h})=>{var j,W,b;const[u,k]=Se.useState(!1),g=n.interface||{density:"normal",showFloatingText:!0,showWeatherWidget:!0,reduceMotion:!1,crownAnimations:!0,layout:{left:t(1),center:t(1),right:t(1)}},E=(j=g.layout.left)!=null&&j.toNumber?g.layout.left.toNumber():Number(g.layout.left),R=(W=g.layout.center)!=null&&W.toNumber?g.layout.center.toNumber():Number(g.layout.center),C=(b=g.layout.right)!=null&&b.toNumber?g.layout.right.toNumber():Number(g.layout.right),L=()=>{u?c():k(!0)},T=(B,I)=>{d({layout:{...g.layout,[B]:t(I)}})},m={marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px",background:"rgba(0,0,0,0.03)",borderRadius:"4px"},z={width:"100%",marginBottom:"5px"};return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",style:{maxHeight:"90vh",display:"flex",flexDirection:"column"},children:[e.jsxs("h2",{children:["‚öôÔ∏è ",r("settings.title",n.interface.language)]}),n.playerProfile&&e.jsxs("div",{style:{backgroundColor:"rgba(191, 144, 0, 0.1)",border:"2px solid var(--gold-color)",borderRadius:"4px",padding:"12px",marginBottom:"20px",textAlign:"center"},children:[e.jsxs("div",{style:{color:"var(--gold-color)",fontSize:"16px",fontWeight:"bold"},children:["üëë ",r("settings.yourRuler",n.interface.language),": ",n.playerProfile.rulerName," ",n.playerProfile.rulerId]}),e.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"5px"},children:r("settings.registered",n.interface.language)})]}),e.jsxs("div",{style:{textAlign:"left",marginBottom:"20px",maxHeight:"60vh",overflowY:"auto",paddingRight:"5px",flex:1,overflowX:"hidden",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:[e.jsx("h3",{style:{marginBottom:"10px"},children:r("settings.layoutConfiguration",n.interface.language)}),e.jsxs("div",{style:{marginBottom:"15px",background:"rgba(0,0,0,0.03)",padding:"10px",borderRadius:"4px"},children:[e.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:r("settings.columnWidths",n.interface.language)}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[e.jsx("span",{style:{fontSize:"0.8rem"},children:r("settings.left",n.interface.language)}),e.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:E,onChange:B=>T("left",parseFloat(B.target.value)),style:z}),e.jsx("span",{style:{fontSize:"0.8rem"},children:E})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[e.jsx("span",{style:{fontSize:"0.8rem"},children:r("settings.center",n.interface.language)}),e.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:R,onChange:B=>T("center",parseFloat(B.target.value)),style:z}),e.jsx("span",{style:{fontSize:"0.8rem"},children:R})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"10px",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.8rem"},children:r("settings.right",n.interface.language)}),e.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:C,onChange:B=>T("right",parseFloat(B.target.value)),style:z}),e.jsx("span",{style:{fontSize:"0.8rem"},children:C})]})]}),e.jsx("div",{style:{borderTop:"1px dashed #ccc",margin:"15px 0"}}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:"Preset Themes"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"5px",justifyContent:"center"},children:Object.values($e).map(B=>e.jsx("button",{className:"btn",style:{background:n.theme===B.id?"var(--accent-color)":"var(--panel-bg)",color:n.theme===B.id?"var(--text-on-accent)":"var(--text-color)",border:"1px solid var(--border-color)",fontSize:"0.8rem",padding:"5px 10px",minWidth:"120px",textAlign:"center"},onClick:()=>i(B.id),children:B.name},B.id))})]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:r("settings.language",n.interface.language)}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"5px",justifyContent:"center"},children:[e.jsx("button",{className:"btn",style:{background:n.interface.language==="en"?"var(--accent-color)":"var(--panel-bg)",color:n.interface.language==="en"?"var(--text-on-accent)":"var(--text-color)",border:"1px solid var(--border-color)",fontSize:"0.8rem",minWidth:"120px",textAlign:"center",padding:"5px 10px"},onClick:()=>h("en"),children:r("settings.english",n.interface.language)}),e.jsx("button",{className:"btn",style:{background:n.interface.language==="ru"?"var(--accent-color)":"var(--panel-bg)",color:n.interface.language==="ru"?"var(--text-on-accent)":"var(--text-color)",border:"1px solid var(--border-color)",fontSize:"0.8rem",minWidth:"120px",textAlign:"center",padding:"5px 10px"},onClick:()=>h("ru"),children:r("settings.russian",n.interface.language)})]})]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:"Layout Density"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"5px",justifyContent:"center"},children:["compact","normal","spacious"].map(B=>e.jsx("button",{className:"btn",style:{background:g.density===B?"var(--accent-color)":"var(--panel-bg)",color:g.density===B?"var(--text-on-accent)":"var(--text-color)",border:"1px solid var(--border-color)",fontSize:"0.8rem",textTransform:"capitalize",minWidth:"120px",textAlign:"center",padding:"5px 10px"},onClick:()=>d({density:B}),children:B},B))})]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:"Number Format"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"5px",justifyContent:"center"},children:["standard","scientific","plain"].map(B=>e.jsx("button",{className:"btn",style:{background:n.numberFormat===B?"var(--accent-color)":"var(--panel-bg)",color:n.numberFormat===B?"var(--text-on-accent)":"var(--text-color)",border:"1px solid var(--border-color)",fontSize:"0.8rem",padding:"5px 10px",textTransform:"capitalize",minWidth:"120px",textAlign:"center"},onClick:()=>l(B),children:B},B))})]}),e.jsx("div",{style:{borderTop:"1px dashed #ccc",margin:"15px 0"}}),e.jsxs("div",{style:m,children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:r("settings.cinematicIdleMode",n.interface.language)}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:r("settings.cinematicIdleModeDesc",n.interface.language)})]}),e.jsx("button",{className:"btn",style:{background:n.idleModeEnabled?"var(--success-color)":"#9e9e9e",minWidth:"60px"},onClick:x,children:n.idleModeEnabled?r("common.on",n.interface.language):r("common.off",n.interface.language)})]}),e.jsxs("div",{style:m,children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:r("settings.clickText",n.interface.language)}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:r("settings.clickTextDesc",n.interface.language)})]}),e.jsx("button",{className:"btn",style:{background:g.showFloatingText?"var(--success-color)":"#9e9e9e",minWidth:"60px"},onClick:()=>d({showFloatingText:!g.showFloatingText}),children:g.showFloatingText?r("common.on",n.interface.language):r("common.off",n.interface.language)})]}),e.jsxs("div",{style:m,children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:r("settings.weatherWidget",n.interface.language)}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:r("settings.weatherWidgetDesc",n.interface.language)})]}),e.jsx("button",{className:"btn",style:{background:g.showWeatherWidget?"var(--success-color)":"#9e9e9e",minWidth:"60px"},onClick:()=>d({showWeatherWidget:!g.showWeatherWidget}),children:g.showWeatherWidget?r("common.on",n.interface.language):r("common.off",n.interface.language)})]}),e.jsxs("div",{style:m,children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:r("settings.crownAnimations",n.interface.language)}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:r("settings.crownAnimationsDesc",n.interface.language)})]}),e.jsx("button",{className:"btn",style:{background:g.crownAnimations?"var(--success-color)":"#9e9e9e",minWidth:"60px"},onClick:()=>d({crownAnimations:!g.crownAnimations}),children:g.crownAnimations?r("common.on",n.interface.language):r("common.off",n.interface.language)})]}),e.jsxs("div",{style:m,children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:r("settings.animations",n.interface.language)}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:r("settings.animationsDesc",n.interface.language)})]}),e.jsx("button",{className:"btn",style:{background:g.reduceMotion?"#9e9e9e":"var(--success-color)",minWidth:"60px"},onClick:()=>d({reduceMotion:!g.reduceMotion}),children:g.reduceMotion?r("common.off",n.interface.language):r("common.on",n.interface.language)})]})]}),e.jsxs("div",{style:{borderTop:"2px solid #ccc",paddingTop:"15px",marginTop:"15px",flexShrink:0},children:[e.jsx("h3",{children:r("settings.system",n.interface.language)}),e.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center",flexWrap:"wrap"},children:[e.jsx("button",{className:"btn",onClick:s,children:r("settings.save",n.interface.language)}),e.jsx("button",{className:"btn",style:{backgroundColor:u?"red":"#d32f2f"},onClick:L,children:u?r("settings.reset",n.interface.language)+"?":r("settings.reset",n.interface.language)})]}),u&&e.jsx("div",{style:{color:"red",fontSize:"0.8rem",marginTop:"5px"},children:"Warning: This will delete all progress permanently!"})]}),e.jsx("button",{className:"btn",style:{marginTop:"20px",background:"#5d4037",width:"100%",flexShrink:0},onClick:o,children:r("settings.close",n.interface.language)}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginTop:"10px",flexShrink:0},children:"v2.3.0 - Kingdom Clicker"})]})})},Xn=({onClose:n})=>e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column"},children:[e.jsx("h2",{children:"üìú Royal Chronicles"}),e.jsx("div",{style:{overflowY:"auto",textAlign:"left",padding:"0 20px",flex:1},children:Qe.map((o,c)=>e.jsxs("div",{style:{marginBottom:"20px",borderBottom:c<Qe.length-1?"1px dashed #ccc":"none",paddingBottom:"10px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[e.jsxs("span",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"var(--accent-color)"},children:["v",o.version]}),e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:o.date})]}),e.jsx("ul",{style:{margin:"5px 0",paddingLeft:"20px"},children:o.changes.map((s,i)=>e.jsx("li",{style:{marginBottom:"3px"},children:s},i))})]},o.version))}),e.jsx("button",{className:"btn",onClick:n,style:{background:"#5d4037",padding:"8px 20px",fontSize:"0.9rem",width:"auto"},children:r("common.close","en")})]})}),Jn=({gameState:n})=>{var d;const[o,c]=y.useState("all"),s=()=>{const h=Ae.sort((u,k)=>{const g=n.achievements.includes(u.id),E=n.achievements.includes(k.id);return g&&!E?-1:!g&&E?1:0});return o==="all"?h:h.filter(u=>o==="buildings"?u.id.startsWith("build_"):o==="clicks"?u.id.startsWith("clicks_"):o==="gold"?u.id.startsWith("gold_"):o==="soldiers"?u.id.startsWith("soldiers_"):o==="renown"?u.id.startsWith("renown_"):o==="dragons"?u.id.startsWith("dragons_"):o==="gambler"?u.id.startsWith("gambler_"):o==="total_builds"?u.id.startsWith("total_builds"):o==="efficiency"?["speed_1m","speed_1b","prestige_master"].includes(u.id):o==="wonders"?["first_wonder","complete_wonder","all_wonders"].includes(u.id):o==="trade"?["first_trade","trade_master"].includes(u.id):o==="secret"?["click_master","idle_time_master"].includes(u.id):o==="bonus"?["gold_veteran","production_master","speed_baker","prestige_novice","golden_touch","combo_master"].includes(u.id):o==="combo"?["building_soldier_combo"].includes(u.id):!0)},i=[{id:"all",name:r("achievements.categories.all",n.interface.language),icon:"üèÜ"},{id:"buildings",name:r("achievements.categories.buildings",n.interface.language),icon:"üèóÔ∏è"},{id:"clicks",name:r("achievements.categories.clicks",n.interface.language),icon:"üëÜ"},{id:"gold",name:r("achievements.categories.gold",n.interface.language),icon:"üí∞"},{id:"soldiers",name:r("achievements.categories.army",n.interface.language),icon:"‚öîÔ∏è"},{id:"renown",name:r("achievements.categories.prestige",n.interface.language),icon:"üëë"},{id:"dragons",name:r("achievements.categories.dragons",n.interface.language),icon:"üêâ"},{id:"gambler",name:r("achievements.categories.tavern",n.interface.language),icon:"üé≤"},{id:"total_builds",name:r("achievements.categories.totalBuildings",n.interface.language),icon:"üèõÔ∏è"},{id:"efficiency",name:r("achievements.categories.efficiency",n.interface.language),icon:"‚ö°"},{id:"wonders",name:r("achievements.categories.wonders",n.interface.language),icon:"üåü"},{id:"trade",name:r("achievements.categories.trade",n.interface.language),icon:"üö¢"},{id:"secret",name:"Secret",icon:"üîç"},{id:"bonus",name:"Bonus",icon:"‚ú®"},{id:"combo",name:"Combo",icon:"‚ö°"}],l={display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"5px",padding:"5px",background:"var(--panel-bg)",border:"1px solid var(--border-color)",borderRadius:"4px",marginTop:"10px"},x=h=>({width:"100%",aspectRatio:"1",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:`2px solid ${h?"var(--gold-color)":"#ccc"}`,background:h?"#fff8e1":"#eee",borderRadius:"4px",opacity:h?1:.3,cursor:h?"help":"default",position:"relative",fontSize:"0.8rem"});return e.jsxs("div",{style:{marginTop:"auto",padding:"10px"},children:[e.jsx("h3",{style:{fontSize:"1rem",margin:"0 0 5px 0"},children:r("achievements.title",n.interface.language)}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:"10px",textAlign:"center"},children:[n.achievements.length," / ",Ae.length," ",r("achievements.unlocked",n.interface.language),o!=="all"&&e.jsxs("span",{children:[" | ",s().filter(h=>n.achievements.includes(h.id)).length," / ",s().length," ",r("achievements.in",n.interface.language)," ",(d=i.find(h=>h.id===o))==null?void 0:d.name]})]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"5px",marginBottom:"10px",padding:"5px",background:"var(--panel-bg)",border:"1px solid var(--border-color)",borderRadius:"4px"},children:i.map(h=>e.jsxs("button",{onClick:()=>c(h.id),style:{padding:"4px 8px",fontSize:"0.75rem",border:`1px solid ${o===h.id?"var(--gold-color)":"var(--border-color)"}`,borderRadius:"3px",background:o===h.id?"#fff8e1":"var(--panel-bg)",cursor:"pointer",transition:"all 0.2s"},title:h.name,children:[e.jsx("span",{style:{marginRight:"2px"},children:h.icon}),e.jsx("span",{style:{display:o===h.id?"inline":"none"},children:h.name})]},h.id))}),e.jsx("div",{style:l,children:s().map(h=>{const u=n.achievements.includes(h.id);return e.jsx("div",{style:x(u),"data-tooltip":u?`${h.name}: ${h.description}`:r("achievements.locked",n.interface.language),children:e.jsx("div",{style:{fontSize:"1rem",filter:u?"none":"grayscale(100%)",opacity:u?1:.2},children:u?h.icon:"‚ùì"})},h.id)})})]})},Qn=({gameState:n,currentGps:o,onClose:c})=>{var m,z;const s=Object.values(n.buildings).reduce((j,W)=>j.plus(W),t(0)),i=n.achievements.length,l=Ae.length;let x=r("statistics.none","en"),d=r("statistics.none","en"),h=-1,u=t(0);fe.forEach((j,W)=>{const b=n.buildings[j.id]||t(0);b.gt(t(0))&&W>h&&(h=W,x=j.name),b.gt(u)&&(u=b,d=j.name)});const g=(()=>{let j=t(1);return j=j.times(de(n.totalRenownEarned)),j})(),[E,R]=y.useState("");y.useEffect(()=>{const j=()=>{const b=t(Date.now()).minus(n.startTime),B=b.dividedBy(t(1e3)),I=B.minus(B.dividedBy(t(60)).floor().times(t(60))).floor(),U=b.dividedBy(t(6e4)),M=U.minus(U.dividedBy(t(60)).floor().times(t(60))).floor(),F=b.dividedBy(t(36e5)),G=F.minus(F.dividedBy(t(24)).floor().times(t(24))).floor(),O=b.dividedBy(t(864e5)).floor();let K="";O.gt(t(0))&&(K+=`${O.toString()}d `),G.gt(t(0))&&(K+=`${G.toString()}h `),K+=`${M.toString()}m ${I.toString()}s`,R(K)};j();const W=setInterval(j,1e3);return()=>clearInterval(W)},[n.startTime]);const C={display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px dashed rgba(0,0,0,0.1)",fontSize:"0.9rem"},L={fontSize:"1rem",color:"var(--accent-color)",marginTop:"15px",borderBottom:"2px solid var(--border-color)",paddingBottom:"2px",marginBottom:"5px"},T=(m=n.weather)!=null&&m.current&&((z=un[n.weather.current])==null?void 0:z.name)||r("statistics.unknown","en");return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"500px",maxHeight:"90vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("h2",{style:{borderBottom:"none",margin:0,fontSize:"1.4rem",textShadow:"1px 1px 0 rgba(0,0,0,0.3)"},children:["üìä ",r("statistics.title",n.interface.language)]}),e.jsxs("div",{style:{textAlign:"left",marginBottom:"20px",overflowY:"auto",paddingRight:"10px",flex:1,minHeight:0},children:[e.jsxs("h3",{style:L,children:["‚ö° ",r("statistics.currentStatus",n.interface.language)]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.goldPerSecond",n.interface.language),":"]}),e.jsxs("strong",{style:{color:"var(--success-color)"},children:[w(o,n.numberFormat)," / sec"]})]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.clickPower",n.interface.language),":"]}),e.jsxs("strong",{style:{color:"var(--success-color)"},children:[w(g,n.numberFormat)," / click"]})]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.currentWeather",n.interface.language),":"]}),e.jsx("strong",{children:T})]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.currentRenown",n.interface.language),":"]}),e.jsx("strong",{style:{color:"#673ab7"},children:w(n.renown,n.numberFormat)})]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.totalRenownEarned",n.interface.language),":"]}),e.jsx("strong",{style:{color:"#9575cd"},children:w(n.totalRenownEarned,n.numberFormat)})]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.renownBonus",n.interface.language),":"]}),e.jsxs("strong",{style:{color:"#9575cd"},children:["+",de(n.totalRenownEarned).minus(t(1)).times(t(100)).toNumber().toString(),"%"]})]}),e.jsxs("h3",{style:L,children:["‚è≥ ",r("statistics.timeAndLegacy",n.interface.language)]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.timePlayed",n.interface.language),":"]}),e.jsx("strong",{children:E})]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.kingdomFounded",n.interface.language),":"]}),e.jsx("span",{children:new Date(n.startTime.toNumber()).toLocaleDateString()})]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.totalRenown",n.interface.language),":"]}),e.jsx("strong",{children:w(n.renown,n.numberFormat)})]}),e.jsxs("h3",{style:L,children:["üí∞ ",r("statistics.economySummary",n.interface.language)]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.currentGold",n.interface.language),":"]}),e.jsx("strong",{children:w(n.gold,n.numberFormat)})]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.lifetimeGold",n.interface.language),":"]}),e.jsx("strong",{children:w(n.totalGold,n.numberFormat)})]}),e.jsxs("h3",{style:L,children:["üè∞ ",r("statistics.dominion",n.interface.language)]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.totalBuildings",n.interface.language),":"]}),e.jsx("strong",{children:w(s,n.numberFormat)})]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.highestTechBuilding",n.interface.language),":"]}),e.jsx("strong",{children:x})]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.mostNumerous",n.interface.language),":"]}),e.jsxs("strong",{children:[d," (",w(u,n.numberFormat),")"]})]}),e.jsxs("h3",{style:L,children:["‚öîÔ∏è ",r("statistics.workforceAndCourt",n.interface.language)]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.totalWorkforce",n.interface.language),":"]}),e.jsxs("strong",{children:[w(n.soldiers,n.numberFormat)," Laborers"]})]}),e.jsxs("h3",{style:L,children:["üìà ",r("statistics.playerStats",n.interface.language)]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.manualClicks",n.interface.language),":"]}),e.jsx("span",{children:w(n.stats.totalClicks,n.numberFormat)})]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.dragonsSlain",n.interface.language),":"]}),e.jsx("span",{children:w(n.stats.dragonsKilled,n.numberFormat)})]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.tavernGames",n.interface.language),":"]}),e.jsx("span",{children:w(n.stats.tavernGamesPlayed,n.numberFormat)})]}),e.jsxs("h3",{style:L,children:["üéñÔ∏è ",r("statistics.completion",n.interface.language)]}),e.jsxs("div",{style:C,children:[e.jsxs("span",{children:[r("statistics.achievements",n.interface.language),":"]}),e.jsxs("span",{children:[i," / ",l," (",Math.floor(i/l*100),"%)"]})]}),e.jsxs("h3",{style:L,children:["üèÜ ",r("statistics.achievementsList",n.interface.language)]}),e.jsx(Jn,{gameState:n})]}),e.jsx("button",{className:"btn",onClick:c,style:{background:"#5d4037",padding:"8px 20px",fontSize:"0.9rem",width:"auto"},children:r("common.close",n.interface.language)})]})})},Zn=[0,10,25,50,100,150,200,250,300,350,400,450,500,550,550,600],er=({gameState:n,onStartProject:o,onUpgradeClickPower:c,onUpgradeOffline:s,onClose:i})=>{const[l,x]=y.useState("infrastructure");if(!(n.buildings.field||t(0)).gt(0))return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"üèóÔ∏è National Projects"}),e.jsxs("div",{style:{padding:"20px",color:"var(--text-secondary)"},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"10px"},children:"üîí"}),e.jsx("p",{children:"You must establish a functioning economy before launching national projects."}),e.jsx("p",{style:{fontWeight:"bold",color:"var(--accent-color)"},children:"Requirement: Build a Wheat Field."})]}),e.jsx("button",{className:"btn",onClick:i,children:"Close"})]})});const u=()=>e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"15px"},children:Nn.map(g=>{var ne,X,te,Z;const E=n.buildings[g.id]||t(0);if(E.lt(10))return null;const R=n.nationalProjects[g.id]||{level:0,active:!1,startTime:0,endTime:0},C=R.level,L=C>=Oe,T=R.active,m=C+1,z=gn(g.id,m),j=fn(m),W=Zn[m]||0,b=E.gte(W),B=n.gold.gte(z.gold),I=n.soldiers.gte(z.laborers),U=!z.carpenter.gt(0)||((ne=n.eliteUnits.carpenter)==null?void 0:ne.gte(z.carpenter)),M=!z.mason.gt(0)||((X=n.eliteUnits.mason)==null?void 0:X.gte(z.mason)),F=!z.architect.gt(0)||((te=n.eliteUnits.architect)==null?void 0:te.gte(z.architect)),G=B&&I&&U&&M&&F&&b;let O=0,K=0;if(T){const oe=Date.now(),ue=R.endTime-R.startTime,ge=oe-R.startTime;O=Math.min(100,ge/ue*100),K=Math.max(0,Math.ceil((R.endTime-oe)/1e3))}const ee=((Z=fe.find(oe=>oe.id===g.id))==null?void 0:Z.name)||"Building";return e.jsxs("div",{style:{border:"2px solid var(--border-color)",borderRadius:"8px",background:T?"#fff8e1":"var(--bg-color)",overflow:"hidden",position:"relative"},children:[e.jsxs("div",{style:{padding:"10px",background:T?"var(--accent-color)":"rgba(0,0,0,0.05)",color:T?"#fff":"var(--text-color)",fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:g.name.replace(" Infrastructure","")}),e.jsxs("span",{children:["Lvl ",C," / ",Oe]})]}),e.jsxs("div",{style:{padding:"15px"},children:[e.jsx("div",{style:{fontSize:"0.85rem",color:T?"#000":"#fff",marginBottom:"10px",fontStyle:"italic"},children:g.description}),e.jsxs("div",{style:{marginBottom:"10px",fontSize:"0.9rem",color:"var(--success-color)",fontWeight:"bold"},children:["Current Bonus: +",(C*Fe*100).toFixed(0),"% Global"]}),T?e.jsxs("div",{children:[e.jsx("div",{style:{width:"100%",height:"10px",background:"#ccc",borderRadius:"5px",overflow:"hidden",marginBottom:"5px"},children:e.jsx("div",{style:{width:`${O}%`,height:"100%",background:"var(--success-color)",transition:"width 1s linear"}})}),e.jsxs("div",{style:{textAlign:"center",fontSize:"0.8rem",color:"#3e2723"},children:["Under Construction... ",Math.floor(K/3600),"h ",Math.floor(K%3600/60),"m"]})]}):L?e.jsx("div",{style:{textAlign:"center",padding:"10px",color:"var(--gold-color)",fontWeight:"bold",border:"1px solid var(--gold-color)",borderRadius:"4px",background:"rgba(255, 215, 0, 0.1)"},children:"MAXIMUM LEVEL REACHED"}):e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.85rem",marginBottom:"10px",background:"rgba(255,255,255,0.5)",padding:"5px",borderRadius:"4px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"Next Level Requirements:"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"5px"},children:[e.jsxs("span",{style:{color:B?"green":"red"},children:["üí∞ ",w(z.gold)," Gold"]}),e.jsxs("span",{style:{color:I?"green":"red"},children:["üë∑ ",w(z.laborers)," Laborers"]}),z.carpenter.gt(0)&&e.jsxs("span",{style:{color:U?"green":"red"},children:["ü™ö ",w(z.carpenter)," Carpenters"]}),z.mason.gt(0)&&e.jsxs("span",{style:{color:M?"green":"red"},children:["üß± ",w(z.mason)," Masons"]}),z.architect.gt(0)&&e.jsxs("span",{style:{color:F?"green":"red"},children:["üìê ",w(z.architect)," Architects"]}),e.jsxs("span",{style:{color:b?"green":"red"},children:["üè† ",w(t(W))," ",ee,"s"]})]}),e.jsxs("div",{style:{marginTop:"5px",fontSize:"0.8rem"},children:["‚è≥ Duration: ",Math.floor(j/3600),"h ",Math.floor(j%3600/60),"m"]})]}),e.jsx("button",{className:"btn",style:{width:"100%",background:G?"var(--accent-color)":"var(--border-color)",cursor:G?"pointer":"not-allowed"},disabled:!G,onClick:()=>o(g.id),children:"Start Project (Units Consumed)"})]})]})]},g.id)})}),k=()=>{const g=n.clickUpgradeLevel||0,E=g>=Ue,R=g+1,C=pn(R),L=n.gold.gte(C),T=t(2).pow(Math.min(g,15)),m=We(g),z=m>0?`${w(T)} + ${(m*100).toFixed(1)}% of GPS`:w(T),j=t(2).pow(Math.min(R,15)),W=We(R),b=W>0?`${w(j)} + ${(W*100).toFixed(1)}% of GPS`:w(j),B=n.offlineUpgradeLevel||0,I=B>=Be,U=B+1,M=xn(U),F=n.renown.gte(M),{efficiency:G,duration:O}=Le(B),{efficiency:K,duration:ee}=Le(U),ne=X=>{const te=Math.floor(X/3600),Z=Math.floor(X%3600/60);return te>0?`${te}h ${Z}m`:`${Z}m`};return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"15px"},children:[e.jsxs("div",{style:{border:"2px solid var(--border-color)",borderRadius:"8px",background:"var(--bg-color)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"10px",background:"rgba(0,0,0,0.05)",color:"var(--text-color)",fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{children:r("empireModal.royalScepter","en")}),e.jsxs("span",{children:["Lvl ",g," / ",Ue]})]}),e.jsxs("div",{style:{padding:"15px"},children:[e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"10px",fontStyle:"italic"},children:r("empireModal.enhanceRoyalAuthority","en")}),e.jsxs("div",{style:{marginBottom:"10px",fontSize:"0.9rem",color:"var(--success-color)",fontWeight:"bold"},children:[r("empireModal.currentPower","en")," ",z]}),E?e.jsx("div",{style:{textAlign:"center",padding:"10px",color:"var(--gold-color)",fontWeight:"bold",border:"1px solid var(--gold-color)",borderRadius:"4px",background:"rgba(255, 215, 0, 0.1)"},children:r("empireModal.maximumLevelReached","en")}):e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.85rem",marginBottom:"10px",background:"rgba(255,255,255,0.5)",padding:"5px",borderRadius:"4px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:r("empireModal.nextLevel","en")}),e.jsxs("div",{style:{marginBottom:"5px"},children:[r("empireModal.power","en")," ",b]}),e.jsxs("div",{style:{color:L?"green":"red",fontWeight:"bold"},children:[r("empireModal.gold","en")," ",w(C)]})]}),e.jsx("button",{className:"btn",style:{width:"100%",background:L?"var(--accent-color)":"var(--border-color)",cursor:L?"pointer":"not-allowed"},disabled:!L,onClick:c,children:r("empireModal.upgradeScepter","en")})]})]})]}),e.jsxs("div",{style:{border:"2px solid var(--border-color)",borderRadius:"8px",background:"var(--bg-color)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"10px",background:"rgba(0,0,0,0.05)",color:"var(--text-color)",fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{children:r("empireModal.passiveIncome","en")}),e.jsxs("span",{children:["Lvl ",B," / ",Be]})]}),e.jsxs("div",{style:{padding:"15px"},children:[e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"10px",fontStyle:"italic"},children:[r("empireModal.improveEfficiency","en"),e.jsx("br",{}),r("empireModal.higherLevels","en")]}),e.jsxs("div",{style:{marginBottom:"10px",fontSize:"0.9rem",color:"var(--success-color)",fontWeight:"bold"},children:[r("empireModal.current","en")," ",(G*100).toFixed(0),"% ",r("empireModal.for","en")," ",ne(O)]}),!I&&e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("div",{style:{width:"100%",height:"8px",background:"#ccc",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${B/Be*100}%`,height:"100%",background:"var(--success-color)",transition:"width 0.3s ease"}})}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center",marginTop:"2px"},children:[Be-B," ",r("empireModal.levelsToMax","en")]})]}),I?e.jsx("div",{style:{textAlign:"center",padding:"10px",color:"var(--gold-color)",fontWeight:"bold",border:"1px solid var(--gold-color)",borderRadius:"4px",background:"rgba(255, 215, 0, 0.1)"},children:r("empireModal.maximumLevelReached","en")}):e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.85rem",marginBottom:"10px",background:"rgba(255,255,255,0.5)",padding:"5px",borderRadius:"4px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:r("empireModal.nextLevel","en")}),e.jsxs("div",{style:{marginBottom:"5px"},children:[r("empireModal.effect","en")," ",(K*100).toFixed(0),"% ",r("empireModal.for","en")," ",ne(ee)]}),e.jsxs("div",{style:{color:F?"#673ab7":"red",fontWeight:"bold"},children:[r("empireModal.renown","en")," ",w(M)]})]}),e.jsx("button",{className:"btn",style:{width:"100%",background:F?"#673ab7":"var(--border-color)",cursor:F?"pointer":"not-allowed"},disabled:!F,onClick:s,children:r("empireModal.upgradePassiveIncome","en")})]})]})]})]})};return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"1000px",width:"95%",height:"85vh",display:"flex",flexDirection:"column",padding:"0"},children:[e.jsxs("div",{style:{padding:"20px",background:"var(--accent-color)",color:"var(--text-on-accent)"},children:[e.jsxs("h2",{style:{margin:0,border:"none",fontSize:"1.4rem",textShadow:"1px 1px 0 rgba(0,0,0,0.3)"},children:["‚öîÔ∏è ",r("empireModal.title","en")]}),e.jsxs("p",{style:{margin:"5px 0 0 0",fontSize:"0.9rem",opacity:.9},children:[r("empireModal.investResources","en"),r("empireModal.allImprovements","en")]})]}),e.jsxs("div",{style:{display:"flex",background:"var(--bg-color)",borderBottom:"2px solid var(--border-color)",padding:"0 20px"},children:[e.jsx("button",{className:"btn",style:{background:l==="infrastructure"?"var(--accent-color)":"transparent",border:"none",borderBottom:l==="infrastructure"?"3px solid var(--gold-color)":"3px solid transparent",borderRadius:"0",padding:"15px 20px",margin:"0",fontWeight:"bold",color:l==="infrastructure"?"var(--text-on-accent)":"var(--text-color)"},onClick:()=>x("infrastructure"),children:e.jsx("h3",{children:r("empireModal.infrastructure","en")})}),e.jsxs("button",{className:"btn",style:{background:l==="royalScepter"?"var(--accent-color)":"transparent",border:"none",borderBottom:l==="royalScepter"?"3px solid var(--gold-color)":"3px solid transparent",borderRadius:"0",padding:"15px 20px",margin:"0",fontWeight:"bold",color:l==="royalScepter"?"var(--text-on-accent)":"var(--text-color)"},onClick:()=>x("royalScepter"),children:["üëë ",r("empireModal.royalScepter","en")]})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px",background:"var(--panel-bg)"},children:[l==="infrastructure"&&u(),l==="royalScepter"&&k()]}),e.jsx("div",{style:{padding:"15px",borderTop:"1px solid var(--border-color)",textAlign:"right",background:"var(--bg-color)"},children:e.jsx("button",{className:"btn",onClick:i,style:{background:"#5d4037",padding:"8px 20px",fontSize:"0.9rem",width:"auto"},children:r("common.close","en")})})]})})},nr=({toasts:n})=>e.jsx("div",{className:"toast-container",children:n.map(o=>e.jsxs("div",{className:`toast ${o.type}`,children:[o.type==="success"&&"‚úÖ",o.type==="warning"&&"‚ö†Ô∏è",o.type==="info"&&"‚ÑπÔ∏è",o.type==="error"&&"‚ùå",e.jsx("span",{children:o.message})]},o.id))}),rr=()=>{const[n,o]=y.useState(null);if(y.useEffect(()=>{const s=x=>{const h=x.target.closest("[data-tooltip]");if(h){const u=h.getAttribute("data-tooltip");u&&o({text:u,x:x.clientX,y:x.clientY})}else o(null)},i=x=>{n&&o(d=>d?{...d,x:x.clientX,y:x.clientY}:null)},l=()=>{o(null)};return document.addEventListener("mouseover",s),document.addEventListener("mousemove",i),document.addEventListener("mouseout",l),()=>{document.removeEventListener("mouseover",s),document.removeEventListener("mousemove",i),document.removeEventListener("mouseout",l)}},[n]),!n)return null;const c={left:n.x+15,top:n.y+15};return n.x+250>window.innerWidth&&(c.left=n.x-260),n.y+100>window.innerHeight&&(c.top=n.y-50),e.jsx("div",{className:"game-tooltip",style:c,children:n.text.split(`
`).map((s,i)=>e.jsx("div",{style:{marginBottom:i===n.text.split(`
`).length-1?0:"4px"},children:s},i))})},tr=({gameState:n})=>{const{weather:o,buildings:c,totalGold:s}=n,i=E=>{var R;return((R=c[E])==null?void 0:R.toNumber())||0};let l="wilderness";i("palace")>0?l="empire":i("castle")>0||i("market")>0?l="city":(i("peasant")>20||i("field")>10||s.gt(t(500)))&&(l="hamlet");let x="",d="";switch(l){case"wilderness":x="linear-gradient(to bottom, #87CEEB 0%, #87CEEB 60%, #556B2F 60%, #556B2F 100%)",d="üå≤ üå≥ üå≤ ü¶å üå≤ üåø";break;case"hamlet":x="linear-gradient(to bottom, #87CEEB 0%, #87CEEB 65%, #8B4513 65%, #228B22 80%)",d="üè° üåæ üêÑ üè° üåæ üöú";break;case"city":x="linear-gradient(to bottom, #B0C4DE 0%, #B0C4DE 60%, #696969 60%, #808080 100%)",d="üè∞ üè† ‚öíÔ∏è üè† ‚öñÔ∏è üè†";break;case"empire":x="linear-gradient(to bottom, #191970 0%, #4B0082 50%, #FFD700 100%)",d="üèØ üíÇ üèõÔ∏è üêâ üèõÔ∏è üíÇ";break}const h=o.current;let u="none",k="",g=0;return h==="rainy"?(u="linear-gradient(to bottom, rgba(0,0,50,0.3), rgba(0,0,100,0.3))",k="üåßÔ∏è üåßÔ∏è üåßÔ∏è üåßÔ∏è üåßÔ∏è",g=1):h==="stormy"?(u="linear-gradient(to bottom, rgba(0,0,0,0.6), rgba(50,50,50,0.6))",k="‚ö° ‚õàÔ∏è ‚ö° ‚õàÔ∏è ‚ö°",g=1):h==="sunny"?(u="radial-gradient(circle at top right, rgba(255,255,0,0.3), transparent)",k="‚òÄÔ∏è",g=.6):h==="windy"&&(k="üçÉ üçÉ üçÉ",g=.8),e.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:x,display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center",paddingBottom:"20vh",zIndex:0,overflow:"hidden",transition:"background 2s ease"},children:[e.jsx("div",{style:{position:"absolute",top:"10%",width:"100%",textAlign:"center",fontSize:"5rem",opacity:g,animation:h==="windy"?"float 3s infinite ease-in-out":"none"},children:k}),u!=="none"&&e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:u,pointerEvents:"none"}}),e.jsx("div",{style:{fontSize:"4rem",textAlign:"center",zIndex:1,textShadow:"0 4px 4px rgba(0,0,0,0.3)",whiteSpace:"nowrap"},children:d}),e.jsx("div",{style:{marginTop:"20px",fontSize:"1.5rem",color:"#fff",textShadow:"2px 2px 4px #000",fontStyle:"italic",zIndex:2,background:"rgba(0,0,0,0.5)",padding:"5px 15px",borderRadius:"15px"},children:"The Kingdom sleeps..."}),e.jsx("style",{children:`
            @keyframes float {
                0% { transform: translateX(0px); }
                50% { transform: translateX(20px); }
                100% { transform: translateX(0px); }
            }
        `})]})},or={apiKey:"AIzaSyA1Dw5M2Zk8bpTCjlU2Tuifvx0ZI3IeRv0",authDomain:"kingdomclicker-156dc.firebaseapp.com",projectId:"kingdomclicker-156dc",storageBucket:"kingdomclicker-156dc.firebasestorage.app",messagingSenderId:"496461589742",appId:"1:496461589742:web:e6413dfa2d1bbabd3ad7ff"},ir=Mn(or),Pe=En(ir);function sr(){return`#${Math.floor(Math.random()*99999).toString().padStart(5,"0")}`}function lr(){const n=new Date,o=n.getDay(),c=n.getDate()-o+(o===0?-6:1);return new Date(n.setDate(c))}async function ar(n){try{const o={...n,period:"alltime"},c={...n,period:"weekly"},s=Ze(Pe,"leaderboard_alltime",n.rulerId);await en(s,{...o,gold:Number(o.gold.toString()),buildings:Number(o.buildings),achievements:Number(o.achievements),renown:Number(o.renown.toString()),timestamp:nn()});const i=Ze(Pe,"leaderboard_weekly",n.rulerId);return await en(i,{...c,gold:Number(c.gold.toString()),buildings:Number(c.buildings),achievements:Number(c.achievements),renown:Number(c.renown.toString()),timestamp:nn()}),{allTimeId:n.rulerId,weeklyId:n.rulerId}}catch(o){throw console.error("‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥:"),console.error("–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:",o),o instanceof Error&&(console.error("–°–æ–æ–±—â–µ–Ω–∏–µ –æ—à–∏–±–∫–∏:",o.message),console.error("–°—Ç–µ–∫ –æ—à–∏–±–∫–∏:",o.stack)),"code"in o&&(console.error("–ö–æ–¥ –æ—à–∏–±–∫–∏ Firebase:",o.code),console.error("–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:",o.customData)),o}}async function cr(n=100){try{console.log("üîç –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö all-time –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞...");const o=hn(mn(Pe,"leaderboard_alltime"),bn("gold","desc"),yn(n));console.log("üì° –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∫ Firestore...");const c=await vn(o);console.log("üìä –ü–æ–ª—É—á–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:",c.docs.length);const s=c.docs.map(i=>{const l=i.data();return{id:i.id,...l,gold:l.gold instanceof he?l.gold:new he(l.gold),renown:l.renown instanceof he?l.renown:new he(l.renown),timestamp:l.timestamp}});return console.log("‚úÖ All-time –ª–∏–¥–µ—Ä–±–æ—Ä–¥ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω, –∑–∞–ø–∏—Å–µ–π:",s.length),s}catch(o){throw console.error("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ all-time –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞:"),console.error("–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:",o),o instanceof Error&&(console.error("–°–æ–æ–±—â–µ–Ω–∏–µ –æ—à–∏–±–∫–∏:",o.message),console.error("–°—Ç–µ–∫ –æ—à–∏–±–∫–∏:",o.stack)),"code"in o&&console.error("–ö–æ–¥ –æ—à–∏–±–∫–∏ Firebase:",o.code),o}}async function dr(n=100){try{console.log("üîç –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö weekly –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞...");const o=lr();console.log("üìÖ –ù–∞—á–∞–ª–æ –Ω–µ–¥–µ–ª–∏:",o.toISOString());const c=hn(mn(Pe,"leaderboard_weekly"),bn("gold","desc"),yn(n));console.log("üì° –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∫ Firestore...");const s=await vn(c);console.log("üìä –ü–æ–ª—É—á–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:",s.docs.length);const l=s.docs.map(x=>{const d=x.data();return{id:x.id,...d,gold:d.gold instanceof he?d.gold:new he(d.gold),renown:d.renown instanceof he?d.renown:new he(d.renown),timestamp:d.timestamp}}).filter(x=>{var u,k;const d=((k=(u=x.timestamp)==null?void 0:u.toDate)==null?void 0:k.call(u))||new Date(x.timestamp),h=d>=o;return h||console.log("üóëÔ∏è –ó–∞–ø–∏—Å—å –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–∞ (—Å—Ç–∞—Ä–∞—è –¥–∞—Ç–∞):",d.toISOString()),h});return console.log("‚úÖ Weekly –ª–∏–¥–µ—Ä–±–æ—Ä–¥ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω, –∑–∞–ø–∏—Å–µ–π –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:",l.length),l}catch(o){throw console.error("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ weekly –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞:"),console.error("–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:",o),o instanceof Error&&(console.error("–°–æ–æ–±—â–µ–Ω–∏–µ –æ—à–∏–±–∫–∏:",o.message),console.error("–°—Ç–µ–∫ –æ—à–∏–±–∫–∏:",o.stack)),"code"in o&&console.error("–ö–æ–¥ –æ—à–∏–±–∫–∏ Firebase:",o.code),o}}const ur=({isOpen:n,onClose:o,onConfirm:c,gameState:s})=>{const[i,l]=y.useState(""),[x,d]=y.useState(!1);if(!n)return null;const h=async()=>{if(i.trim().length<3){alert("Ruler name must contain at least 3 characters!");return}if(i.trim().length>20){alert("Ruler name must not exceed 20 characters!");return}d(!0);try{const k={id:`player_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,rulerName:i.trim(),rulerId:sr(),lastLeaderboardView:0,lastLeaderboardSubmit:0,hasChosenName:!0};c(k),o()}catch{alert("An error occurred while creating profile. Please try again.")}finally{d(!1)}};return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"#fdf6e3",border:"4px solid #8d6e63",borderRadius:"8px",padding:"32px",maxWidth:"500px",width:"90%",textAlign:"center",fontFamily:"Georgia, serif"},children:[e.jsxs("h2",{style:{color:"#3e2723",marginBottom:"16px"},children:["üëë ",r("rulerName.title",s.interface.language)," üëë"]}),e.jsxs("p",{style:{color:"#5d4037",marginBottom:"24px",lineHeight:"1.5"},children:[r("ruler.congratulations",s.interface.language)," ",e.jsx("strong",{children:gr(s.gold)})," ",r("game.gold",s.interface.language),"!",e.jsx("br",{}),r("ruler.chooseName",s.interface.language)]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("label",{style:{display:"block",color:"#3e2723",marginBottom:"8px",fontWeight:"bold"},children:[r("rulerName.name",s.interface.language),":"]}),e.jsx("input",{type:"text",value:i,onChange:u=>l(u.target.value),placeholder:r("rulerName.enterName",s.interface.language),maxLength:20,style:{width:"100%",padding:"12px",border:"2px solid #a1887f",borderRadius:"4px",fontSize:"16px",fontFamily:"Arial, sans-serif",backgroundColor:"#fff",color:"#3e2723"},onKeyPress:u=>u.key==="Enter"&&h()}),e.jsxs("div",{style:{fontSize:"12px",color:"#8d6e63",marginTop:"4px",textAlign:"left"},children:[i.length,"/20 characters"]})]}),e.jsxs("div",{style:{backgroundColor:"#fff3e0",border:"2px solid #bf9000",borderRadius:"4px",padding:"12px",marginBottom:"24px"},children:[e.jsx("p",{style:{color:"#bf9000",margin:0,fontSize:"14px",fontWeight:"bold"},children:"‚ö†Ô∏è Important: You'll be able to join the leaderboard and compete with players from around the world!"}),e.jsx("button",{className:"btn",onClick:o,style:{background:"#666",padding:"8px 16px",fontSize:"1rem",width:"100%",marginTop:"8px"},children:r("common.cancel",s.interface.language)})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[e.jsx("button",{type:"button",onClick:h,disabled:x||i.trim().length<3,style:{padding:"12px 24px",backgroundColor:x||i.trim().length<3?"#cccccc":"#2e7d32",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"bold",cursor:x||i.trim().length<3?"not-allowed":"pointer",fontFamily:"Georgia, serif"},children:r(x?"rulerName.submitting":"rulerName.confirm",s.interface.language)}),e.jsx("button",{type:"button",onClick:o,style:{padding:"12px 24px",backgroundColor:"#c62828",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",cursor:"pointer",fontFamily:"Georgia, serif",transition:"background-color 0.2s"},onMouseOver:u=>{u.currentTarget.style.backgroundColor="#d32f2f"},onMouseOut:u=>{u.currentTarget.style.backgroundColor="#c62828"},children:"Later"})]})]})})};function gr(n){return n.lt(1e3)?n.toFixed(0):n.lt(1e6)?n.toNumber().toLocaleString():n.toExponential(2)}const pr=({isOpen:n,onClose:o,playerProfile:c,onOpenRulerNameModal:s,gameState:i})=>{var O,K,ee,ne,X,te,Z,oe,ue,ge,ie,q,ae,re,ce,pe,ve,Me,Ee,ze,je,we,ke,Ce;const[l,x]=y.useState([]),[d,h]=y.useState([]),[u,k]=y.useState("alltime"),[g,E]=y.useState(!1),[R,C]=y.useState(null),[L,T]=y.useState(0),[m,z]=y.useState(0),j=()=>{const _=localStorage.getItem("leaderboardCache");if(_)try{const{data:S,timestamp:Q}=JSON.parse(_),se=Date.now(),Re=3600*1e3;if(se-Q<Re&&S&&S.allTime&&S.weekly)return S}catch(S){console.error("Cache parse error:",S)}return null},W=_=>{const S={data:_,timestamp:Date.now()};localStorage.setItem("leaderboardCache",JSON.stringify(S)),z(Date.now())},b=()=>{const _=localStorage.getItem("leaderboardCache");if(_){const{timestamp:S}=JSON.parse(_),Q=Date.now(),se=3600*1e3;return Q-S<se}return!1};y.useEffect(()=>{if(n){if(b())try{const _=j();if(_){x(_.allTime),h(_.weekly);const S=JSON.parse(localStorage.getItem("leaderboardCache"));z(S.timestamp);return}}catch(_){console.error("Cache read error:",_)}B()}},[n]);const B=async()=>{E(!0),C(null);try{const _=new Promise((se,Re)=>setTimeout(()=>Re(new Error("Loading timeout")),1e4)),[S,Q]=await Promise.all([Promise.race([cr(50),_]),Promise.race([dr(50),_])]);x(S),h(Q),W({allTime:S,weekly:Q})}catch(_){console.error("Error loading leaderboard:",_),C("Failed to load leaderboard. Please check your internet connection and try again.")}finally{E(!1)}},I=_=>{switch(_){case 1:return"ü•á";case 2:return"ü•à";case 3:return"ü•â";default:return`#${_}`}},U=()=>c?(u==="alltime"?l:d).findIndex(S=>S.rulerId===c.rulerId)+1:-1,M=()=>{const _=u==="alltime"?l:d;if(_.length>0){let S=0;if(_.forEach(Q=>{if(Q.timestamp){let se=0;typeof Q.timestamp=="object"&&Q.timestamp.toDate?se=Q.timestamp.toDate().getTime():typeof Q.timestamp=="number"?se=Q.timestamp:typeof Q.timestamp=="string"&&(se=new Date(Q.timestamp).getTime()),se>S&&(S=se)}}),S>0)return S}return m},F=u==="alltime"?l:d,G=F.length>0;return n?e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"800px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("h2",{children:["üèÜ ",r("leaderboard.title",((O=i==null?void 0:i.interface)==null?void 0:O.language)||"en")," üèÜ"]}),e.jsx("button",{className:"btn",onClick:o,children:r("common.close",((K=i==null?void 0:i.interface)==null?void 0:K.language)||"en")})]}),!c&&e.jsxs("div",{style:{backgroundColor:"rgba(191, 144, 0, 0.1)",border:"2px solid var(--gold-color)",borderRadius:"4px",padding:"15px",marginBottom:"16px",textAlign:"center"},children:[e.jsxs("h4",{style:{color:"var(--gold-color)",margin:"0 0 8px 0",fontSize:"14px"},children:["üëÅ ",r("leaderboard.viewOnlyMode",((ee=i==null?void 0:i.interface)==null?void 0:ee.language)||"en")]}),e.jsxs("p",{style:{color:"var(--text-secondary)",margin:"0",fontSize:"12px",lineHeight:"1.4"},children:[e.jsx("strong",{children:r("leaderboard.anyoneCanView",((ne=i==null?void 0:i.interface)==null?void 0:ne.language)||"en")})," ",r("leaderboard.chooseName",((X=i==null?void 0:i.interface)==null?void 0:X.language)||"en")]}),s&&i&&i.gold&&i.gold.gte(1e7)&&e.jsxs("button",{className:"btn",onClick:()=>{o(),s()},style:{backgroundColor:"var(--accent-color)",padding:"6px 12px",fontSize:"12px",marginTop:"8px"},children:["üëë ",r("leaderboard.chooseRulerName",((te=i==null?void 0:i.interface)==null?void 0:te.language)||"en")]})]}),G&&e.jsx("div",{style:{backgroundColor:"rgba(191, 144, 0, 0.1)",border:"2px solid var(--gold-color)",borderRadius:"4px",padding:"12px",marginBottom:"16px",textAlign:"center",fontSize:"12px"},children:e.jsxs("span",{style:{color:"var(--gold-color)"},children:["üìä ",r("leaderboard.dataUpdated",((Z=i==null?void 0:i.interface)==null?void 0:Z.language)||"en")," ",Math.floor((Date.now()-M())/6e4)," ",r("leaderboard.minutesAgo",((oe=i==null?void 0:i.interface)==null?void 0:oe.language)||"en")]})}),g&&e.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"var(--text-secondary)"},children:[r("leaderboard.loading",((ue=i==null?void 0:i.interface)==null?void 0:ue.language)||"en"),"..."]}),R&&e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--danger-color)"},children:R}),c&&G&&e.jsxs("div",{style:{backgroundColor:"rgba(191, 144, 0, 0.1)",border:"2px solid var(--gold-color)",borderRadius:"4px",padding:"12px",marginBottom:"16px",textAlign:"center"},children:[e.jsxs("div",{style:{color:"var(--gold-color)",fontSize:"14px",fontWeight:"bold"},children:[r("leaderboard.youArePlayingAs",((ge=i==null?void 0:i.interface)==null?void 0:ge.language)||"en")," ",c.rulerName," ",c.rulerId]}),F.length>0&&e.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"5px"},children:[r("leaderboard.yourRank",((ie=i==null?void 0:i.interface)==null?void 0:ie.language)||"en"),": ",U()>0?`#${U()}`:r("leaderboard.notRankedYet",((q=i==null?void 0:i.interface)==null?void 0:q.language)||"en")," ",r("leaderboard.in",((ae=i==null?void 0:i.interface)==null?void 0:ae.language)||"en")," ",u==="alltime"?r("leaderboard.allTime",((re=i==null?void 0:i.interface)==null?void 0:re.language)||"en"):r("leaderboard.weekly",((ce=i==null?void 0:i.interface)==null?void 0:ce.language)||"en")]})]}),G&&e.jsxs("div",{style:{display:"flex",marginBottom:"16px",borderBottom:"2px solid var(--border-color)"},children:[e.jsx("button",{onClick:()=>k("alltime"),className:u==="alltime"?"tab-btn active":"tab-btn",children:r("leaderboard.allTime",((pe=i==null?void 0:i.interface)==null?void 0:pe.language)||"en")}),e.jsx("button",{onClick:()=>k("weekly"),className:u==="weekly"?"tab-btn active":"tab-btn",children:r("leaderboard.thisWeek",((ve=i==null?void 0:i.interface)==null?void 0:ve.language)||"en")})]}),G&&!g&&!R&&e.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",border:"2px solid var(--border-color)",borderRadius:"4px",backgroundColor:"var(--panel-bg)"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{style:{backgroundColor:"var(--accent-color)",color:"white",position:"sticky",top:0},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"12px",textAlign:"left"},children:r("leaderboard.rank",((Me=i==null?void 0:i.interface)==null?void 0:Me.language)||"en")}),e.jsx("th",{style:{padding:"12px",textAlign:"left"},children:r("leaderboard.ruler",((Ee=i==null?void 0:i.interface)==null?void 0:Ee.language)||"en")}),e.jsx("th",{style:{padding:"12px",textAlign:"right"},children:r("leaderboard.gold",((ze=i==null?void 0:i.interface)==null?void 0:ze.language)||"en")}),e.jsx("th",{style:{padding:"12px",textAlign:"right"},children:r("leaderboard.renown",((je=i==null?void 0:i.interface)==null?void 0:je.language)||"en")}),e.jsx("th",{style:{padding:"12px",textAlign:"right"},children:r("leaderboard.buildings",((we=i==null?void 0:i.interface)==null?void 0:we.language)||"en")}),e.jsx("th",{style:{padding:"12px",textAlign:"right"},children:r("leaderboard.achievements",((ke=i==null?void 0:i.interface)==null?void 0:ke.language)||"en")})]})}),e.jsx("tbody",{children:F.map((_,S)=>e.jsxs("tr",{style:{backgroundColor:(c==null?void 0:c.rulerId)===_.rulerId?"rgba(191, 144, 0, 0.1)":S%2===0?"rgba(0, 0, 0, 0.02)":"transparent",borderBottom:"1px solid var(--border-color)"},children:[e.jsx("td",{style:{padding:"10px",fontWeight:"bold",color:"var(--text-color)"},children:I(S+1)}),e.jsx("td",{style:{padding:"10px",color:"var(--text-color)"},children:e.jsxs("div",{children:[e.jsx("strong",{children:_.rulerName}),e.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:_.rulerId})]})}),e.jsx("td",{style:{padding:"10px",textAlign:"right",color:"var(--gold-color)",fontWeight:"bold"},children:w(_.gold,"standard")}),e.jsx("td",{style:{padding:"10px",textAlign:"right",color:"var(--text-secondary)"},children:w(_.renown,"standard")}),e.jsx("td",{style:{padding:"10px",textAlign:"right",color:"var(--text-secondary)"},children:_.buildings}),e.jsx("td",{style:{padding:"10px",textAlign:"right",color:"var(--text-secondary)"},children:_.achievements})]},_.id))})]})}),e.jsxs("div",{style:{marginTop:"16px",fontSize:"12px",color:"var(--text-secondary)",textAlign:"center"},children:["üí° ",r("leaderboard.updatesAutomatically",((Ce=i==null?void 0:i.interface)==null?void 0:Ce.language)||"en")]})]})}):null},xr=({gained:n,effectiveTime:o,totalTime:c,efficiency:s,completedProjects:i,currentLevel:l,maxDuration:x,onClose:d,numberFormat:h})=>{const u=k=>{const g=Math.floor(k/3600),E=Math.floor(k%3600/60),R=Math.floor(k%60),C=[];return g>0&&C.push(`${g}h`),E>0&&C.push(`${E}m`),(R>0||C.length===0)&&C.push(`${R}s`),C.join(" ")};return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",style:{border:"4px solid var(--accent-color)"},children:[e.jsx("h2",{children:"üåô Welcome Back, Ruler!"}),e.jsxs("div",{style:{padding:"20px",textAlign:"left"},children:[e.jsx("p",{children:"Your kingdom continued to operate while you were away."}),e.jsxs("div",{style:{background:"var(--panel-bg)",border:"1px solid var(--border-color)",padding:"15px",borderRadius:"4px",marginBottom:"15px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{children:"Time Away:"}),e.jsx("strong",{children:u(c.toNumber())})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{children:"Effective Production Time:"}),e.jsx("strong",{children:u(o.toNumber())})]}),o.toNumber()<c.toNumber()&&e.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",fontStyle:"italic",marginBottom:"5px",textAlign:"center"},children:["‚ö†Ô∏è Production time limited by upgrade level (max ",u(x),")"]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsxs("span",{children:[r("offline.efficiency","en"),":"]}),e.jsxs("strong",{children:[(s*100).toFixed(0),"% (Level ",l,"/20)"]})]}),e.jsxs("h2",{style:{borderBottom:"none",margin:0,fontSize:"1.4rem",textShadow:"1px 1px 0 rgba(0,0,0,0.3)"},children:["‚è∞ ",r("offline.title","en")]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.2rem",color:"var(--gold-color)"},children:[e.jsxs("span",{children:[r("offline.goldEarned","en"),":"]}),e.jsxs("strong",{children:["+",w(n,h)]})]})]}),i.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{children:["‚úÖ ",r("offline.projectsCompleted","en")]}),e.jsx("ul",{style:{paddingLeft:"20px",maxHeight:"150px",overflowY:"auto"},children:i.map((k,g)=>e.jsx("li",{style:{color:"var(--success-color)",marginBottom:"5px"},children:k},g))})]})]}),e.jsx("button",{className:"btn",onClick:d,style:{background:"#5d4037",padding:"8px 20px",fontSize:"0.9rem",width:"auto"},children:r("common.close","en")})]})})},xe={density:"normal",showFloatingText:!0,showWeatherWidget:!0,reduceMotion:!1,crownAnimations:!0,lastBuyAmount:t(1),language:"en",layout:{left:t(1),center:t(1),right:t(1)},borderWidth:t(4),customColors:{enabled:!1,bg:"#e8dcc5",panel:"#fdf6e3",text:"#3e2723",secondaryText:"#5d4037",accent:"#8d6e63",accentHover:"#6d4c41",gold:"#bf9000",border:"#a1887f",success:"#2e7d32",danger:"#c62828"}},be={gold:t(0),totalGold:t(0),totalRenownEarned:t(0),startTime:t(Date.now()),lastSaveTime:t(Date.now()),buildings:{},achievements:[],renown:t(0),prestigeCount:0,soldiers:t(0),eliteUnits:{},nationalProjects:{},clickUpgradeLevel:0,offlineUpgradeLevel:0,weather:{current:"clear",timeLeft:t(120)},event:null,theme:"default",numberFormat:"standard",idleModeEnabled:!1,interface:xe,stats:{totalClicks:t(0),dragonsKilled:t(0),tavernGamesPlayed:t(0)},playerProfile:null},Ne=n=>{if(n==null||typeof n=="string"||typeof n=="number"||typeof n=="boolean")return n;if(Array.isArray(n))return n.map(Ne);if(typeof n=="object"&&n.toString&&typeof n.toString=="function"&&(n.hasOwnProperty("mantissa")||n.hasOwnProperty("exponent")))return n.toString();if(typeof n=="object"){const o={};for(const c in n)n.hasOwnProperty(c)&&(o[c]=Ne(n[c]));return o}return n},br=()=>{var Ke;const[n,o]=y.useState(()=>{var p,f,N,A,P,D;const a=localStorage.getItem("kingdom_save");if(a)try{const v=JSON.parse(a),$=v.interface||{},H={...xe,...$,lastBuyAmount:t($.lastBuyAmount??1),crownAnimations:$.crownAnimations??!0,language:$.language??xe.language,layout:{left:t(((p=$.layout)==null?void 0:p.left)??xe.layout.left),center:t(((f=$.layout)==null?void 0:f.center)??xe.layout.center),right:t(((N=$.layout)==null?void 0:N.right)??xe.layout.right)},borderWidth:t($.borderWidth??xe.borderWidth),customColors:{...xe.customColors,...$.customColors||{}}};return{...be,...v,renown:t(v.renown||0),totalRenownEarned:t(v.totalRenownEarned||0),prestigeCount:v.prestigeCount||0,gold:t(v.gold||0),totalGold:t(v.totalGold||0),startTime:t(v.startTime||Date.now()),lastSaveTime:t(v.lastSaveTime||Date.now()),soldiers:t(v.soldiers||0),buildings:Object.keys(v.buildings||{}).reduce((V,Y)=>(V[Y]=t(v.buildings[Y]),V),{}),stats:{...be.stats,...v.stats||{},totalClicks:t(((A=v.stats)==null?void 0:A.totalClicks)||0),dragonsKilled:t(((P=v.stats)==null?void 0:P.dragonsKilled)||0),tavernGamesPlayed:t(((D=v.stats)==null?void 0:D.tavernGamesPlayed)||0)},eliteUnits:Object.keys(v.eliteUnits||{}).reduce((V,Y)=>(V[Y]=t(v.eliteUnits[Y]),V),{}),nationalProjects:v.nationalProjects||{},clickUpgradeLevel:v.clickUpgradeLevel||0,offlineUpgradeLevel:v.offlineUpgradeLevel||0,weather:v.weather?{...v.weather,timeLeft:t(Number(v.weather.timeLeft)||120)}:be.weather,theme:v.theme||"default",numberFormat:v.numberFormat||"standard",idleModeEnabled:v.idleModeEnabled!==void 0?v.idleModeEnabled:!1,interface:H,playerProfile:v.playerProfile?{...v.playerProfile,lastLeaderboardSubmit:v.playerProfile.lastLeaderboardSubmit||0}:null}}catch(v){console.error("Save load failed",v)}return be}),c=y.useRef(n);y.useEffect(()=>{c.current=n},[n]);const s=y.useRef("");y.useEffect(()=>{const a=p=>{s.current=(s.current+p.key).slice(-20);const f=s.current.toLowerCase();f.endsWith("godon")?(o(N=>({...N,godMode:!0})),q(r("game.godModeEnabled",n.interface.language),"success"),s.current=""):f.endsWith("godoff")&&(o(N=>({...N,godMode:!1})),q(r("game.godModeDisabled",n.interface.language),"info"),s.current="")};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[]);const i=()=>{C(null);const a=localStorage.getItem("kingdom_last_save_time"),p=Date.now();if(a){const f=p-parseInt(a),N=t(f/1e3);if(N.gte(t(60))){const A=n.offlineUpgradeLevel||0,{efficiency:P,duration:D}=Le(A),v=t(D),$=N.lt(v)?N:v,V=ae(n).times(t(P)).times($).floor();V.gt(t(0))&&(C({gained:V,effectiveTime:$,totalTime:N,efficiency:P,completedProjects:[],currentLevel:A,maxDuration:D}),o(Y=>({...Y,gold:Y.gold.plus(V),totalGold:Y.totalGold.plus(V)})))}}localStorage.setItem("kingdom_last_save_time",p.toString())},[l,x]=y.useState(!1);y.useEffect(()=>{let a;const p=()=>{x(!1),clearTimeout(a),n.idleModeEnabled&&(a=setTimeout(()=>{x(!0)},2e4))};p();const f=["mousemove","mousedown","keydown","touchstart","scroll"];return f.forEach(N=>window.addEventListener(N,p)),()=>{clearTimeout(a),f.forEach(N=>window.removeEventListener(N,p))}},[n.idleModeEnabled]),y.useEffect(()=>{n.event&&x(!1)},[n.event]),y.useEffect(()=>{const a=w(n.gold);document.title=`Gold: ${a} - Kingdom Clicker`},[n.gold]),y.useEffect(()=>{const a=document.documentElement,p=n.interface||xe,f=n.theme||"default",N=$e[f]||$e.default;N&&Object.entries(N.colors).forEach(([D,v])=>{a.style.setProperty(D,v)});const A={compact:"8px",normal:"12px",spacious:"20px"},P={compact:"6px",normal:"12px",spacious:"16px"};a.style.setProperty("--panel-padding",A[p.density]),a.style.setProperty("--gap-size",P[p.density]),a.style.setProperty("--col-left",String(p.layout.left)),a.style.setProperty("--col-center",String(p.layout.center)),a.style.setProperty("--col-right",String(p.layout.right)),p.reduceMotion?document.body.classList.add("no-motion"):document.body.classList.remove("no-motion")},[n.theme,n.interface]);const[d,h]=y.useState(!1);y.useEffect(()=>{var a;n.gold.gte(t(1e7))&&!((a=n.playerProfile)!=null&&a.hasChosenName)&&!d&&ue(!0)},[n.gold,n.playerProfile,d]);const[u,k]=y.useState(null),[g,E]=y.useState([]),[R,C]=y.useState(null),[L,T]=y.useState("buildings"),[m,z]=y.useState("army"),[j,W]=y.useState(!1),[b,B]=y.useState("throne");y.useEffect(()=>{const a=()=>{W(window.innerWidth<768)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const[I,U]=y.useState(!1),[M,F]=y.useState(!1),[G,O]=y.useState(!1),[K,ee]=y.useState(!1),[ne,X]=y.useState(!1),[te,Z]=y.useState(!1),[oe,ue]=y.useState(!1),[ge,ie]=y.useState(!1),q=(a,p="info")=>{const f=Date.now().toString()+Math.random();E(N=>[...N,{id:f,message:a,type:p}]),setTimeout(()=>{E(N=>N.filter(A=>A.id!==f))},3e3)};y.useEffect(()=>{const a=Date.now();if(n.lastSaveTime&&t(a).minus(n.lastSaveTime).gt(t(6e4))){const p=t(a).minus(n.lastSaveTime).dividedBy(t(1e3)),{efficiency:f,duration:N}=Le(n.offlineUpgradeLevel||0),A=t(N),P=p.lt(A)?p:A,v=ae(n).times(t(f)).times(P).floor(),$=[];let H={...n.nationalProjects},V=!1;Object.keys(H).forEach(Y=>{var le;const J=H[Y];if(J.active&&J.endTime&&a>=J.endTime){H[Y]={...J,active:!1,level:J.level+1,startTime:0,endTime:0};const me=(le=fe.find(De=>De.id===Y))==null?void 0:le.name;me&&$.push(`${me} Infrastructure (Lvl ${J.level+1})`),V=!0}}),(v.gt(t(0))||$.length>0)&&(C(Y=>Y||{gained:v,effectiveTime:P,totalTime:p,efficiency:f,completedProjects:$,currentLevel:n.offlineUpgradeLevel||0,maxDuration:N}),o(Y=>({...Y,gold:Y.gold.plus(v),totalGold:Y.totalGold.plus(v),nationalProjects:V?H:Y.nationalProjects})))}},[]),y.useEffect(()=>{const a=setInterval(()=>{Date.now()%3e4<1e3&&o(p=>{const f={...p,lastSaveTime:t(Date.now())},N=Ne(f);return localStorage.setItem("kingdom_save",JSON.stringify(N)),f})},1e3);return()=>clearInterval(a)},[]),y.useEffect(()=>{const a=()=>{const f=c.current,N=Ne(f);localStorage.setItem("kingdom_save",JSON.stringify(N)),localStorage.setItem("kingdom_last_save_time",Date.now().toString())};window.addEventListener("beforeunload",a);const p=()=>{document.visibilityState==="hidden"?a():document.visibilityState==="visible"&&i()};return document.addEventListener("visibilitychange",p),()=>{window.removeEventListener("beforeunload",a),document.removeEventListener("visibilitychange",p)}},[]),y.useEffect(()=>{var p;if(!((p=n.playerProfile)!=null&&p.hasChosenName))return;const a=setInterval(()=>{var D;const f=c.current,N=Date.now(),A=((D=f.playerProfile)==null?void 0:D.lastLeaderboardSubmit)||0,P=3600*1e3;N-A>=P&&ar({rulerName:f.playerProfile.rulerName,rulerId:f.playerProfile.rulerId,gold:f.totalGold,renown:f.renown,buildings:Object.keys(f.buildings).length,achievements:f.achievements.length,period:"alltime"}).then(()=>{o(v=>({...v,playerProfile:{...v.playerProfile,lastLeaderboardSubmit:Date.now()}})),q(r("toast.leaderboardSubmitted",n.interface.language),"success")}).catch(v=>{console.error("Auto leaderboard submission failed:",v)})},6e4);return()=>clearInterval(a)},[(Ke=n.playerProfile)==null?void 0:Ke.hasChosenName]),y.useEffect(()=>{const a=setInterval(()=>{if(!n.event&&Math.random()<.05){const N=["dragon","merchant","jester"],A=N[Math.floor(Math.random()*N.length)],P=A==="dragon"?6e5:3e4,D={id:Date.now().toString(),type:A,expiresAt:t(Date.now()).plus(t(P)),hp:A==="dragon"?t(10):void 0,maxHp:A==="dragon"?t(10):void 0,reward:t(0),startTime:A==="dragon"?Date.now():void 0};o(v=>({...v,event:D}))}},1e4);return()=>clearInterval(a)},[n.event]);const ae=a=>{var D;let p=t(0);const f=((D=a.weather)==null?void 0:D.current)||"clear";fe.forEach(v=>{const $=a.buildings[v.id]||t(0);let H=v.baseProduction;f==="sunny"?(v.id==="peasant"||v.id==="field"||v.id==="stable"||v.id==="cathedral")&&(H=H.times(t(1.2))):f==="rainy"?(v.id==="silver_mine"||v.id==="alchemist"||v.id==="market"||v.id==="tavern")&&(H=H.times(t(1.2))):f==="stormy"?((v.id==="blacksmith"||v.id==="void_portal")&&(H=H.times(t(1.3))),(v.id==="field"||v.id==="stable")&&(H=H.times(t(.8)))):f==="windy"&&(v.id==="market"||v.id==="castle"||v.id==="time_chamber")&&(H=H.times(t(1.15))),p=p.plus($.times(H))});let N=0;a.nationalProjects&&Object.values(a.nationalProjects).forEach(v=>{N+=v.level||0});let A=t(1);const P=t(1).plus(t(N*Fe));if(A=A.times(P),A=A.times(de(a.totalRenownEarned).plus(t(a.achievements.length*.02))),a.event&&a.event.type==="dragon"&&a.event.startTime){const v=Math.floor((Date.now()-a.event.startTime)/1e3),H=1-Math.min(99,v)/100;A=A.times(t(H))}return p=p.times(A),p},re=ae(n),ce=y.useRef(re);ce.current=re,y.useEffect(()=>{const a=setInterval(()=>{o(p=>{const f=Date.now(),N=ce.current.times(t(Ie)).dividedBy(t(1e3));let A=p.totalGold.plus(N),P=p.gold.plus(N),D={...p.weather};const v=t(Ie/1e3);if(D.timeLeft=D.timeLeft.minus(v),D.timeLeft.lte(t(0))){const J=["clear","sunny","rainy","stormy","windy"],le=J[Math.floor(Math.random()*J.length)],me=t(Math.floor(Math.random()*120)+60);D={current:le,timeLeft:me}}let $=p.event;$&&$.expiresAt&&t($.expiresAt).lt(t(f))&&($=null);let H={...p.nationalProjects||{}};Object.keys(H).forEach(J=>{var me;const le=H[J];le.active&&le.endTime&&f>=le.endTime&&(H[J]={...le,active:!1,level:le.level+1,startTime:0,endTime:0},q(r("toast.projectCompleted",n.interface.language).replace("{building}",((me=fe.find(De=>De.id===J))==null?void 0:me.name)||"").replace("{level}",String(le.level+1)),"success"))});const V=[...p.achievements];let Y=null;return Ae.forEach(J=>{V.includes(J.id)||J.condition({...p,totalGold:A,gold:P},ce.current)&&(V.push(J.id),Y=J)}),Y&&(k(Y),setTimeout(()=>k(null),3e3)),{...p,gold:P,totalGold:A,achievements:V,event:$,soldiers:p.soldiers,weather:D,nationalProjects:H}})},Ie);return()=>clearInterval(a)},[]);const pe=(a="light")=>{if("vibrate"in navigator&&j)switch(a){case"light":navigator.vibrate(10);break;case"medium":navigator.vibrate(20);break;case"heavy":navigator.vibrate([30,10,30]);break}},ve=(a=!1)=>{a||pe("light");const p=Me(c.current);o(f=>({...f,gold:f.gold.plus(p),totalGold:f.totalGold.plus(p),stats:{...f.stats,totalClicks:a?f.stats.totalClicks:f.stats.totalClicks.plus(t(1))}}))},Me=a=>{const p=de(a.totalRenownEarned),f=t(1),N=a.clickUpgradeLevel||0,A=Math.min(N,15),P=t(2).pow(A),D=f.times(P),v=ae(a),$=We(N),H=v.times($);let V=D.plus(H);if(V=V.times(p),a.godMode){const Y=v.times(t(99999));V=V.plus(Y)}return V},Ee=()=>{const a=n.clickUpgradeLevel||0;if(a>=Ue){q("Maximum Royal Scepter level reached!","warning");return}const p=pn(a+1);if(n.gold.lt(p)){q(r("error.notEnoughGold",n.interface.language),"error");return}o(f=>({...f,gold:f.gold.minus(p),clickUpgradeLevel:f.clickUpgradeLevel+1})),q(`Royal Scepter upgraded to level ${a+1}!`,"success")},ze=()=>{const a=n.offlineUpgradeLevel||0;if(a>=Be){q("Maximum Passive Income level reached!","warning");return}const p=xn(a+1);if(n.renown.lt(p)){q("Not enough Renown!","error");return}o(f=>({...f,renown:f.renown.minus(p),offlineUpgradeLevel:f.offlineUpgradeLevel+1})),q(`Passive Income upgraded to level ${a+1}!`,"success")},je=(a,p)=>{const f=fe.find(P=>P.id===a);if(!f||p<=0)return;const N=n.buildings[a]||t(0),A=ye(f.baseCost,N,t(p)).floor();n.gold.gte(A)&&(pe("medium"),o(P=>({...P,gold:P.gold.minus(A),buildings:{...P.buildings,[a]:(P.buildings[a]||t(0)).plus(t(p))}})))},we=(a,p)=>{const f=fe.find(D=>D.id===a);if(!f||p<=0)return;const N=n.buildings[a]||t(0),A=t(Math.min(p,N.toNumber()));if(A.lte(t(0)))return;const P=ye(f.baseCost,N.minus(A),A).times(t(.25)).floor();o(D=>({...D,gold:D.gold.plus(P),buildings:{...D.buildings,[a]:N.minus(A)}}))},ke=a=>{const p=_e.times(t(a));n.gold.gte(p)&&o(f=>({...f,gold:f.gold.minus(p),soldiers:f.soldiers.plus(p.dividedBy(_e))}))},Ce=(a,p)=>{const f=dn.find(P=>P.id===a);if(!f)return;const N=f.goldCost.times(t(p)),A=f.soldierCost.times(t(p));n.gold.gte(N)&&n.soldiers.gte(A)&&o(P=>({...P,gold:P.gold.minus(N),soldiers:P.soldiers.minus(A),eliteUnits:{...P.eliteUnits,[a]:(P.eliteUnits[a]||t(0)).plus(t(p))}}))},_=a=>{if(a.type==="merchant"){const p=ce.current.times(t(10));o(f=>({...f,gold:f.gold.plus(p),totalGold:f.totalGold.plus(p),event:null})),q(`The merchant gifted you ${w(p.floor(),n.numberFormat)} gold!`,"success")}else if(a.type==="jester"){const p=n.gold.times(t(.1)),f=Math.random()>.5;o(N=>({...N,gold:f?N.gold.plus(p):N.gold.minus(p),totalGold:f?N.totalGold.plus(p):N.totalGold,event:null})),f?q(`Jester pays out! +${w(p.floor(),n.numberFormat)}`,"success"):q(`Jester tricked you! -${w(p.floor(),n.numberFormat)}`,"warning")}else if(a.type==="dragon")try{let p=!1;o(f=>{if(!f.event||f.event.type!=="dragon")return f;const A=t(f.event.hp||10).minus(t(1));if(A.lte(0)){const P=ce.current.times(t(30));return p=!0,{...f,gold:f.gold.plus(P),totalGold:f.totalGold.plus(P),event:null,stats:{...f.stats,dragonsKilled:f.stats.dragonsKilled.plus(t(1))}}}return{...f,event:{...f.event,hp:A}}}),p&&q("Dragon Slain! +Treasury Boost","success")}catch(p){console.error("Error handling dragon interaction:",p),q("Error interacting with dragon","error")}},S=()=>{const a=t(1),p=t(1e12),f=n.totalGold;if(f.lt(p))return;const N=f.dividedBy(p),P=t(Math.floor(Math.pow(N.toNumber(),.33))).times(a).minus(n.renown);if(P.lte(0))return;const D={...n.nationalProjects};Object.keys(D).forEach(v=>{D[v].active&&(D[v]={...D[v],active:!1,startTime:0,endTime:0})}),o({...be,renown:n.renown.plus(P),totalRenownEarned:n.totalRenownEarned.plus(P),prestigeCount:n.prestigeCount+1,totalGold:n.totalGold,achievements:n.achievements,nationalProjects:D,offlineUpgradeLevel:n.offlineUpgradeLevel,playerProfile:n.playerProfile,startTime:t(Date.now()),lastSaveTime:t(Date.now()),theme:n.theme,idleModeEnabled:n.idleModeEnabled,interface:n.interface}),F(!1),q(r("toast.abdicationSuccessful",n.interface.language),"success")},Q=()=>{localStorage.removeItem("kingdom_save"),o({...be,startTime:t(Date.now())}),O(!1),q(r("toast.gameReset",n.interface.language),"warning")},se=()=>{const p=Ne(n);localStorage.setItem("kingdom_save",JSON.stringify(p)),q(r("toast.gameSaved",n.interface.language),"info")},Re=a=>{o(p=>({...p,playerProfile:a})),localStorage.setItem(`playerProfile_${a.id}`,JSON.stringify(a)),q(`Welcome, ${a.rulerName} ${a.rulerId}!`,"success"),h(!1)},kn=async()=>{S()},qe=a=>{o(p=>({...p,interface:{...p.interface,lastBuyAmount:a}}))},Cn=a=>{o(p=>({...p,interface:{...p.interface,language:a}}))},Ve=a=>({flex:a==="left"?"var(--col-left)":"var(--col-right)",display:"flex",flexDirection:"column",borderRight:a==="left"?"var(--custom-border-width) double var(--border-color)":"none",borderLeft:a==="right"?"var(--custom-border-width) double var(--border-color)":"none",background:"var(--panel-bg)",minWidth:0,transition:"transform 0.8s ease-in-out",transform:l&&n.idleModeEnabled?a==="left"?"translateX(-120%)":"translateX(120%)":"translateX(0)",zIndex:10});return e.jsxs("div",{style:{display:"flex",height:"100dvh",width:"100vw",backgroundColor:"var(--bg-color)",overflow:"hidden",position:"relative",flexDirection:j?"column":"row"},children:[e.jsx(nr,{toasts:g}),e.jsx(rr,{}),l&&n.idleModeEnabled&&e.jsx(tr,{gameState:n}),!j&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:Ve("left"),children:[e.jsx("div",{style:{display:"flex",borderBottom:"var(--custom-border-width) solid var(--border-color)"},children:e.jsx("button",{className:`tab-btn ${L==="buildings"?"active":""}`,onClick:()=>T("buildings"),children:r("tabs.estates",n.interface.language)})}),e.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden"},children:L==="buildings"&&e.jsx(sn,{gameState:n,onBuyBuilding:je,onSellBuilding:we,onSetBuyAmount:qe})})]}),e.jsx("div",{style:{flex:"var(--col-center)",display:"flex",flexDirection:"column",position:"relative",borderRight:l&&n.idleModeEnabled?"none":"var(--custom-border-width) double var(--border-color)",minWidth:0,zIndex:5,transition:"border 0.8s"},children:e.jsx(an,{gameState:n,gps:re,onClick:()=>ve(!1),onEventInteract:_,onOpenTavern:()=>U(!0),onOpenPrestige:()=>F(!0),onOpenSettings:()=>O(!0),onOpenStatistics:()=>X(!0),onOpenLeaderboard:()=>{ie(!0)},onOpenEmpire:()=>Z(!0),isIdle:l&&n.idleModeEnabled})}),e.jsxs("div",{style:Ve("right"),children:[e.jsx("div",{style:{display:"flex",borderBottom:"var(--custom-border-width) solid var(--border-color)"},children:e.jsx("button",{className:`tab-btn ${m==="army"?"active":""}`,onClick:()=>z("army"),children:r("tabs.workforce",n.interface.language)})}),e.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden"},children:m==="army"&&e.jsx(ln,{gameState:n,onTrainSoldier:ke,onTrainElite:Ce})})]})]}),j&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",position:"relative",minHeight:0,height:"100%"},children:[b==="buildings"&&e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",height:"100%",minHeight:0},children:[e.jsx("div",{style:{display:"flex",borderBottom:"var(--custom-border-width) solid var(--border-color)",flexShrink:0},children:e.jsx("button",{className:"tab-btn active",onClick:()=>{},children:r("tabs.estates",n.interface.language)})}),e.jsx("div",{className:"scrollable-content",style:{flex:1,overflowY:"auto",overflowX:"hidden",minHeight:0,WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:e.jsx(sn,{gameState:n,onBuyBuilding:je,onSellBuilding:we,onSetBuyAmount:qe})})]}),b==="throne"&&e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,height:"100%"},children:e.jsx(an,{gameState:n,gps:re,onClick:()=>ve(!1),onEventInteract:_,onOpenTavern:()=>U(!0),onOpenPrestige:()=>F(!0),onOpenSettings:()=>O(!0),onOpenStatistics:()=>X(!0),onOpenLeaderboard:()=>ie(!0),onOpenEmpire:()=>Z(!0),isIdle:l&&n.idleModeEnabled})}),b==="army"&&e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",height:"100%",minHeight:0},children:[e.jsx("div",{style:{display:"flex",borderBottom:"var(--custom-border-width) solid var(--border-color)",flexShrink:0},children:e.jsx("button",{className:"tab-btn active",children:r("tabs.workforce",n.interface.language)})}),e.jsx("div",{className:"scrollable-content",style:{flex:1,overflowY:"auto",overflowX:"hidden",minHeight:0,WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:e.jsx(ln,{gameState:n,onTrainSoldier:ke,onTrainElite:Ce})})]}),b==="empire"&&e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,height:"100%"},children:e.jsx("div",{className:"scrollable-content",style:{flex:1,overflowY:"auto",overflowX:"hidden",minHeight:0,WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:e.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)"},children:[e.jsx("h3",{children:"üèóÔ∏è National Projects"}),e.jsx("p",{children:"Construct massive infrastructure to boost global production."}),e.jsx("button",{className:"btn",onClick:()=>Z(!0),style:{margin:"10px",padding:"15px 20px",fontSize:"16px"},children:"üèóÔ∏è Manage Projects"})]})})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",height:"60px",backgroundColor:"var(--panel-bg)",borderTop:"var(--custom-border-width) solid var(--border-color)",flexShrink:0},children:[e.jsxs("button",{className:`mobile-nav-btn ${b==="buildings"?"active":""}`,onClick:()=>{pe("light"),B("buildings")},style:{flex:1,height:"100%",border:"none",backgroundColor:"transparent",fontSize:"12px",color:b==="buildings"?"var(--accent-color)":"var(--text-color)",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer"},children:[e.jsx("div",{style:{fontSize:"20px"},children:"üèòÔ∏è"}),e.jsx("div",{children:r("tabs.estates",n.interface.language)})]}),e.jsxs("button",{className:`mobile-nav-btn ${b==="throne"?"active":""}`,onClick:()=>{pe("light"),B("throne")},style:{flex:1,height:"100%",border:"none",backgroundColor:"transparent",fontSize:"12px",color:b==="throne"?"var(--accent-color)":"var(--text-color)",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer"},children:[e.jsx("div",{style:{fontSize:"20px"},children:"üëë"}),e.jsx("div",{children:r("tabs.throne",n.interface.language)})]}),e.jsxs("button",{className:`mobile-nav-btn ${b==="army"?"active":""}`,onClick:()=>{pe("light"),B("army")},style:{flex:1,height:"100%",border:"none",backgroundColor:"transparent",fontSize:"12px",color:b==="army"?"var(--accent-color)":"var(--text-color)",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer"},children:[e.jsx("div",{style:{fontSize:"20px"},children:"üë∑"}),e.jsx("div",{children:r("tabs.workforce",n.interface.language)})]}),e.jsxs("button",{className:`mobile-nav-btn ${b==="empire"?"active":""}`,onClick:()=>{pe("light"),B("empire")},style:{flex:1,height:"100%",border:"none",backgroundColor:"transparent",fontSize:"12px",color:b==="empire"?"var(--accent-color)":"var(--text-color)",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer"},children:[e.jsx("div",{style:{fontSize:"20px"},children:"üèóÔ∏è"}),e.jsx("div",{children:r("tabs.empire",n.interface.language)})]})]})]}),!(l&&n.idleModeEnabled)&&u&&e.jsxs("div",{className:"achievement-popup",children:[e.jsx("div",{style:{fontSize:"2rem"},children:u.icon}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",color:"var(--text-color)"},children:r("achievements.popupUnlocked",n.interface.language)}),e.jsx("div",{style:{color:"var(--accent-color)"},children:u.name})]})]}),R&&e.jsx(xr,{gained:R.gained,effectiveTime:R.effectiveTime,totalTime:R.totalTime,efficiency:R.efficiency,completedProjects:R.completedProjects,currentLevel:R.currentLevel,maxDuration:R.maxDuration,numberFormat:n.numberFormat,onClose:()=>C(null)}),te&&e.jsx(er,{gameState:n,onClose:()=>Z(!1),onStartProject:a=>{var A,P,D,v;const p=((A=n.nationalProjects[a])==null?void 0:A.level)||0;if(p>=Oe)return;const f=gn(a,p+1);if(n.gold.lt(f.gold)||n.soldiers.lt(f.laborers)||(P=n.eliteUnits.carpenter)!=null&&P.lt(f.carpenter||0)||(D=n.eliteUnits.mason)!=null&&D.lt(f.mason||0)||(v=n.eliteUnits.architect)!=null&&v.lt(f.architect||0))return;const N=fn(p+1);o($=>({...$,gold:$.gold.minus(f.gold),soldiers:$.soldiers.minus(f.laborers),eliteUnits:{...$.eliteUnits,carpenter:($.eliteUnits.carpenter||t(0)).minus(f.carpenter||0),mason:($.eliteUnits.mason||t(0)).minus(f.mason||0),architect:($.eliteUnits.architect||t(0)).minus(f.architect||0)},nationalProjects:{...$.nationalProjects,[a]:{level:p,active:!0,startTime:Date.now(),endTime:Date.now()+N*1e3}}})),q("Construction started!","info")},onUpgradeClickPower:Ee,onUpgradeOffline:ze}),I&&e.jsx(qn,{gameState:n,onGamble:(a,p)=>{const f=t(a);o(N=>({...N,gold:p?N.gold.plus(f):N.gold.minus(f).max(0),stats:{...N.stats,tavernGamesPlayed:N.stats.tavernGamesPlayed.plus(t(1))}}))},onClose:()=>U(!1)}),M&&e.jsx(Vn,{gameState:n,onPrestige:kn,onClose:()=>F(!1)}),G&&e.jsx(Kn,{gameState:n,onClose:()=>O(!1),onHardReset:Q,onSave:se,onSetTheme:a=>o(p=>({...p,theme:a})),onSetNumberFormat:a=>o(p=>({...p,numberFormat:a})),onToggleIdleMode:()=>o(a=>({...a,idleModeEnabled:!a.idleModeEnabled})),onUpdateInterface:a=>o(p=>({...p,interface:{...p.interface,...a}})),onSetLanguage:Cn}),ne&&e.jsx(Qn,{gameState:n,currentGps:re,onClose:()=>X(!1)}),K&&e.jsx(Xn,{onClose:()=>ee(!1)}),oe&&e.jsx(ur,{isOpen:oe,onClose:()=>{ue(!1),h(!0)},onConfirm:Re,gameState:n}),ge&&e.jsx(pr,{isOpen:ge,onClose:()=>ie(!1),playerProfile:n.playerProfile})]})};export{br as A,Se as R,e as j};
